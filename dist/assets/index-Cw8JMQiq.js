(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();function Z_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var If={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function ET(){if(cy)return ql;cy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:h}}return ql.Fragment=e,ql.jsx=i,ql.jsxs=i,ql}var hy;function TT(){return hy||(hy=1,If.exports=ET()),If.exports}var I=TT(),Of={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function AT(){if(fy)return St;fy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,tt={};function J(D,Z,it){this.props=D,this.context=Z,this.refs=tt,this.updater=it||B}J.prototype.isReactComponent={},J.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},J.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function mt(){}mt.prototype=J.prototype;function ut(D,Z,it){this.props=D,this.context=Z,this.refs=tt,this.updater=it||B}var st=ut.prototype=new mt;st.constructor=ut,G(st,J.prototype),st.isPureReactComponent=!0;var Rt=Array.isArray,ht={H:null,A:null,T:null,S:null,V:null},wt=Object.prototype.hasOwnProperty;function V(D,Z,it,W,ft,bt){return it=bt.ref,{$$typeof:r,type:D,key:Z,ref:it!==void 0?it:null,props:bt}}function S(D,Z){return V(D.type,Z,void 0,void 0,void 0,D.props)}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(it){return Z[it]})}var M=/\/+/g;function L(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):Z.toString(36)}function C(){}function Ae(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ee(D,Z,it,W,ft){var bt=typeof D;(bt==="undefined"||bt==="boolean")&&(D=null);var vt=!1;if(D===null)vt=!0;else switch(bt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(D.$$typeof){case r:case e:vt=!0;break;case A:return vt=D._init,ee(vt(D._payload),Z,it,W,ft)}}if(vt)return ft=ft(D),vt=W===""?"."+L(D,0):W,Rt(ft)?(it="",vt!=null&&(it=vt.replace(M,"$&/")+"/"),ee(ft,Z,it,"",function(ue){return ue})):ft!=null&&(x(ft)&&(ft=S(ft,it+(ft.key==null||D&&D.key===ft.key?"":(""+ft.key).replace(M,"$&/")+"/")+vt)),Z.push(ft)),1;vt=0;var me=W===""?".":W+":";if(Rt(D))for(var gt=0;gt<D.length;gt++)W=D[gt],bt=me+L(W,gt),vt+=ee(W,Z,it,bt,ft);else if(gt=b(D),typeof gt=="function")for(D=gt.call(D),gt=0;!(W=D.next()).done;)W=W.value,bt=me+L(W,gt++),vt+=ee(W,Z,it,bt,ft);else if(bt==="object"){if(typeof D.then=="function")return ee(Ae(D),Z,it,W,ft);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return vt}function F(D,Z,it){if(D==null)return D;var W=[],ft=0;return ee(D,W,"","",function(bt){return Z.call(it,bt,ft++)}),W}function et(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(it){(D._status===0||D._status===-1)&&(D._status=1,D._result=it)},function(it){(D._status===0||D._status===-1)&&(D._status=2,D._result=it)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var ot=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function jt(){}return St.Children={map:F,forEach:function(D,Z,it){F(D,function(){Z.apply(this,arguments)},it)},count:function(D){var Z=0;return F(D,function(){Z++}),Z},toArray:function(D){return F(D,function(Z){return Z})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},St.Component=J,St.Fragment=i,St.Profiler=o,St.PureComponent=ut,St.StrictMode=a,St.Suspense=y,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,St.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ht.H.useMemoCache(D)}},St.cache=function(D){return function(){return D.apply(null,arguments)}},St.cloneElement=function(D,Z,it){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var W=G({},D.props),ft=D.key,bt=void 0;if(Z!=null)for(vt in Z.ref!==void 0&&(bt=void 0),Z.key!==void 0&&(ft=""+Z.key),Z)!wt.call(Z,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&Z.ref===void 0||(W[vt]=Z[vt]);var vt=arguments.length-2;if(vt===1)W.children=it;else if(1<vt){for(var me=Array(vt),gt=0;gt<vt;gt++)me[gt]=arguments[gt+2];W.children=me}return V(D.type,ft,void 0,void 0,bt,W)},St.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:h,_context:D},D},St.createElement=function(D,Z,it){var W,ft={},bt=null;if(Z!=null)for(W in Z.key!==void 0&&(bt=""+Z.key),Z)wt.call(Z,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ft[W]=Z[W]);var vt=arguments.length-2;if(vt===1)ft.children=it;else if(1<vt){for(var me=Array(vt),gt=0;gt<vt;gt++)me[gt]=arguments[gt+2];ft.children=me}if(D&&D.defaultProps)for(W in vt=D.defaultProps,vt)ft[W]===void 0&&(ft[W]=vt[W]);return V(D,bt,void 0,void 0,null,ft)},St.createRef=function(){return{current:null}},St.forwardRef=function(D){return{$$typeof:g,render:D}},St.isValidElement=x,St.lazy=function(D){return{$$typeof:A,_payload:{_status:-1,_result:D},_init:et}},St.memo=function(D,Z){return{$$typeof:v,type:D,compare:Z===void 0?null:Z}},St.startTransition=function(D){var Z=ht.T,it={};ht.T=it;try{var W=D(),ft=ht.S;ft!==null&&ft(it,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(jt,ot)}catch(bt){ot(bt)}finally{ht.T=Z}},St.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},St.use=function(D){return ht.H.use(D)},St.useActionState=function(D,Z,it){return ht.H.useActionState(D,Z,it)},St.useCallback=function(D,Z){return ht.H.useCallback(D,Z)},St.useContext=function(D){return ht.H.useContext(D)},St.useDebugValue=function(){},St.useDeferredValue=function(D,Z){return ht.H.useDeferredValue(D,Z)},St.useEffect=function(D,Z,it){var W=ht.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(D,Z)},St.useId=function(){return ht.H.useId()},St.useImperativeHandle=function(D,Z,it){return ht.H.useImperativeHandle(D,Z,it)},St.useInsertionEffect=function(D,Z){return ht.H.useInsertionEffect(D,Z)},St.useLayoutEffect=function(D,Z){return ht.H.useLayoutEffect(D,Z)},St.useMemo=function(D,Z){return ht.H.useMemo(D,Z)},St.useOptimistic=function(D,Z){return ht.H.useOptimistic(D,Z)},St.useReducer=function(D,Z,it){return ht.H.useReducer(D,Z,it)},St.useRef=function(D){return ht.H.useRef(D)},St.useState=function(D){return ht.H.useState(D)},St.useSyncExternalStore=function(D,Z,it){return ht.H.useSyncExternalStore(D,Z,it)},St.useTransition=function(){return ht.H.useTransition()},St.version="19.1.0",St}var dy;function gd(){return dy||(dy=1,Of.exports=AT()),Of.exports}var Zt=gd();const bT=Z_(Zt);var Vf={exports:{}},Hl={},Mf={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function ST(){return my||(my=1,function(r){function e(F,et){var ot=F.length;F.push(et);t:for(;0<ot;){var jt=ot-1>>>1,D=F[jt];if(0<o(D,et))F[jt]=et,F[ot]=D,ot=jt;else break t}}function i(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var et=F[0],ot=F.pop();if(ot!==et){F[0]=ot;t:for(var jt=0,D=F.length,Z=D>>>1;jt<Z;){var it=2*(jt+1)-1,W=F[it],ft=it+1,bt=F[ft];if(0>o(W,ot))ft<D&&0>o(bt,W)?(F[jt]=bt,F[ft]=ot,jt=ft):(F[jt]=W,F[it]=ot,jt=it);else if(ft<D&&0>o(bt,ot))F[jt]=bt,F[ft]=ot,jt=ft;else break t}}return et}function o(F,et){var ot=F.sortIndex-et.sortIndex;return ot!==0?ot:F.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var y=[],v=[],A=1,w=null,b=3,B=!1,G=!1,tt=!1,J=!1,mt=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,st=typeof setImmediate<"u"?setImmediate:null;function Rt(F){for(var et=i(v);et!==null;){if(et.callback===null)a(v);else if(et.startTime<=F)a(v),et.sortIndex=et.expirationTime,e(y,et);else break;et=i(v)}}function ht(F){if(tt=!1,Rt(F),!G)if(i(y)!==null)G=!0,wt||(wt=!0,L());else{var et=i(v);et!==null&&ee(ht,et.startTime-F)}}var wt=!1,V=-1,S=5,x=-1;function O(){return J?!0:!(r.unstable_now()-x<S)}function M(){if(J=!1,wt){var F=r.unstable_now();x=F;var et=!0;try{t:{G=!1,tt&&(tt=!1,ut(V),V=-1),B=!0;var ot=b;try{e:{for(Rt(F),w=i(y);w!==null&&!(w.expirationTime>F&&O());){var jt=w.callback;if(typeof jt=="function"){w.callback=null,b=w.priorityLevel;var D=jt(w.expirationTime<=F);if(F=r.unstable_now(),typeof D=="function"){w.callback=D,Rt(F),et=!0;break e}w===i(y)&&a(y),Rt(F)}else a(y);w=i(y)}if(w!==null)et=!0;else{var Z=i(v);Z!==null&&ee(ht,Z.startTime-F),et=!1}}break t}finally{w=null,b=ot,B=!1}et=void 0}}finally{et?L():wt=!1}}}var L;if(typeof st=="function")L=function(){st(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ae=C.port2;C.port1.onmessage=M,L=function(){Ae.postMessage(null)}}else L=function(){mt(M,0)};function ee(F,et){V=mt(function(){F(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(F){switch(b){case 1:case 2:case 3:var et=3;break;default:et=b}var ot=b;b=et;try{return F()}finally{b=ot}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(F,et){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ot=b;b=F;try{return et()}finally{b=ot}},r.unstable_scheduleCallback=function(F,et,ot){var jt=r.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?jt+ot:jt):ot=jt,F){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ot+D,F={id:A++,callback:et,priorityLevel:F,startTime:ot,expirationTime:D,sortIndex:-1},ot>jt?(F.sortIndex=ot,e(v,F),i(y)===null&&F===i(v)&&(tt?(ut(V),V=-1):tt=!0,ee(ht,ot-jt))):(F.sortIndex=D,e(y,F),G||B||(G=!0,wt||(wt=!0,L()))),F},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(F){var et=b;return function(){var ot=b;b=et;try{return F.apply(this,arguments)}finally{b=ot}}}}(Lf)),Lf}var gy;function RT(){return gy||(gy=1,Mf.exports=ST()),Mf.exports}var Uf={exports:{}},Qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function wT(){if(py)return Qe;py=1;var r=gd();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(y,v,A){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:y,containerInfo:v,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Qe.createPortal=function(y,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return h(y,v,null,A)},Qe.flushSync=function(y){var v=d.T,A=a.p;try{if(d.T=null,a.p=2,y)return y()}finally{d.T=v,a.p=A,a.d.f()}},Qe.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,a.d.C(y,v))},Qe.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},Qe.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var A=v.as,w=g(A,v.crossOrigin),b=typeof v.integrity=="string"?v.integrity:void 0,B=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?a.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:w,integrity:b,fetchPriority:B}):A==="script"&&a.d.X(y,{crossOrigin:w,integrity:b,fetchPriority:B,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Qe.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=g(v.as,v.crossOrigin);a.d.M(y,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&a.d.M(y)},Qe.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,w=g(A,v.crossOrigin);a.d.L(y,A,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Qe.preloadModule=function(y,v){if(typeof y=="string")if(v){var A=g(v.as,v.crossOrigin);a.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else a.d.m(y)},Qe.requestFormReset=function(y){a.d.r(y)},Qe.unstable_batchedUpdates=function(y,v){return y(v)},Qe.useFormState=function(y,v,A){return d.H.useFormState(y,v,A)},Qe.useFormStatus=function(){return d.H.useHostTransitionStatus()},Qe.version="19.1.0",Qe}var yy;function CT(){if(yy)return Uf.exports;yy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Uf.exports=wT(),Uf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function xT(){if(_y)return Hl;_y=1;var r=RT(),e=gd(),i=CT();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function y(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return g(c),t;if(f===l)return g(c),n;f=f.sibling}throw Error(a(188))}if(s.return!==l.return)s=c,l=f;else{for(var _=!1,E=c.child;E;){if(E===s){_=!0,s=c,l=f;break}if(E===l){_=!0,l=c,s=f;break}E=E.sibling}if(!_){for(E=f.child;E;){if(E===s){_=!0,s=f,l=c;break}if(E===l){_=!0,l=f,s=c;break}E=E.sibling}if(!_)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,w=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),mt=Symbol.for("react.provider"),ut=Symbol.for("react.consumer"),st=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case J:return"Profiler";case tt:return"StrictMode";case ht:return"Suspense";case wt:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case st:return(t.displayName||"Context")+".Provider";case ut:return(t._context.displayName||"Context")+".Consumer";case Rt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return n=t.displayName||null,n!==null?n:Ae(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return Ae(t(n))}catch{}}return null}var ee=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},jt=[],D=-1;function Z(t){return{current:t}}function it(t){0>D||(t.current=jt[D],jt[D]=null,D--)}function W(t,n){D++,jt[D]=t.current,t.current=n}var ft=Z(null),bt=Z(null),vt=Z(null),me=Z(null);function gt(t,n){switch(W(vt,n),W(bt,t),W(ft,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?jp(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=jp(n),t=zp(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}it(ft),W(ft,t)}function ue(){it(ft),it(bt),it(vt)}function zn(t){t.memoizedState!==null&&W(me,t);var n=ft.current,s=zp(n,t.type);n!==s&&(W(bt,t),W(ft,s))}function ui(t){bt.current===t&&(it(ft),it(bt)),me.current===t&&(it(me),Pl._currentValue=ot)}var xs=Object.prototype.hasOwnProperty,Ds=r.unstable_scheduleCallback,Ns=r.unstable_cancelCallback,Ma=r.unstable_shouldYield,_o=r.unstable_requestPaint,pn=r.unstable_now,Nc=r.unstable_getCurrentPriorityLevel,La=r.unstable_ImmediatePriority,Tr=r.unstable_UserBlockingPriority,Is=r.unstable_NormalPriority,Ic=r.unstable_LowPriority,Ar=r.unstable_IdlePriority,Ua=r.log,vo=r.unstable_setDisableYieldValue,ae=null,Ht=null;function ln(t){if(typeof Ua=="function"&&vo(t),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(ae,t)}catch{}}var Fe=Math.clz32?Math.clz32:Os,Eo=Math.log,Oc=Math.LN2;function Os(t){return t>>>=0,t===0?32:31-(Eo(t)/Oc|0)|0}var Vs=256,Ms=4194304;function In(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function br(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?c=In(l):(_&=E,_!==0?c=In(_):s||(s=E&~t,s!==0&&(c=In(s))))):(E=l&~f,E!==0?c=In(E):_!==0?c=In(_):s||(s=l&~t,s!==0&&(c=In(s)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,s=n&-n,f>=s||f===32&&(s&4194048)!==0)?n:c}function Ls(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Pa(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ja(){var t=Vs;return Vs<<=1,(Vs&4194048)===0&&(Vs=256),t}function za(){var t=Ms;return Ms<<=1,(Ms&62914560)===0&&(Ms=4194304),t}function ci(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function hi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ba(t,n,s,l,c,f){var _=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var E=t.entanglements,R=t.expirationTimes,z=t.hiddenUpdates;for(s=_&~s;0<s;){var Y=31-Fe(s),X=1<<Y;E[Y]=0,R[Y]=-1;var k=z[Y];if(k!==null)for(z[Y]=null,Y=0;Y<k.length;Y++){var q=k[Y];q!==null&&(q.lane&=-536870913)}s&=~X}l!==0&&Bn(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~n))}function Bn(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Fe(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function ka(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-Fe(s),c=1<<l;c&n|t[l]&n&&(t[l]|=n),s&=~c}}function zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Sr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bi(){var t=et.p;return t!==0?t:(t=window.event,t===void 0?32:sy(t.type))}function To(t,n){var s=et.p;try{return et.p=t,n()}finally{et.p=s}}var ne=Math.random().toString(36).slice(2),be="__reactFiber$"+ne,ge="__reactProps$"+ne,yn="__reactContainer$"+ne,qa="__reactEvents$"+ne,Vc="__reactListeners$"+ne,ki="__reactHandles$"+ne,Ao="__reactResources$"+ne,Us="__reactMarker$"+ne;function qi(t){delete t[be],delete t[ge],delete t[qa],delete t[Vc],delete t[ki]}function fi(t){var n=t[be];if(n)return n;for(var s=t.parentNode;s;){if(n=s[yn]||s[be]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Hp(t);t!==null;){if(s=t[be])return s;t=Hp(t)}return n}t=s,s=t.parentNode}return null}function kn(t){if(t=t[be]||t[yn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function qn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Je(t){var n=t[Ao];return n||(n=t[Ao]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ce(t){t[Us]=!0}var Ha=new Set,Rr={};function On(t,n){di(t,n),di(t+"Capture",n)}function di(t,n){for(Rr[t]=n,t=0;t<n.length;t++)Ha.add(n[t])}var bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),So={},Ps={};function Ro(t){return xs.call(Ps,t)?!0:xs.call(So,t)?!1:bo.test(t)?Ps[t]=!0:(So[t]=!0,!1)}function Hi(t,n,s){if(Ro(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Hn(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Pe(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var js,wo;function mi(t){if(js===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);js=n&&n[1]||"",wo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+t+wo}var wr=!1;function Cr(t,n){if(!t||wr)return"";wr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(q){var k=q}Reflect.construct(t,[],X)}else{try{X.call()}catch(q){k=q}t.call(X.prototype)}}else{try{throw Error()}catch(q){k=q}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(q){if(q&&k&&typeof q.stack=="string")return[q.stack,k.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],E=f[1];if(_&&E){var R=_.split(`
`),z=E.split(`
`);for(c=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;if(l===R.length||c===z.length)for(l=R.length-1,c=z.length-1;1<=l&&0<=c&&R[l]!==z[c];)c--;for(;1<=l&&0<=c;l--,c--)if(R[l]!==z[c]){if(l!==1||c!==1)do if(l--,c--,0>c||R[l]!==z[c]){var Y=`
`+R[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=c);break}}}finally{wr=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?mi(s):""}function Ga(t){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Cr(t.type,!1);case 11:return Cr(t.type.render,!1);case 1:return Cr(t.type,!0);case 31:return mi("Activity");default:return""}}function xr(t){try{var n="";do n+=Ga(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function We(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fa(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Mc(t){var n=Fa(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Dr(t){t._valueTracker||(t._valueTracker=Mc(t))}function Ya(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=Fa(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function zs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Lc=/[\n"\\]/g;function pe(t){return t.replace(Lc,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function on(t,n,s,l,c,f,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+We(n)):t.value!==""+We(n)&&(t.value=""+We(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?Gi(t,_,We(n)):s!=null?Gi(t,_,We(s)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+We(E):t.removeAttribute("name")}function Bs(t,n,s,l,c,f,_,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;s=s!=null?""+We(s):"",n=n!=null?""+We(n):s,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Gi(t,n,s){n==="number"&&zs(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function gi(t,n,s,l){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+We(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Yt(t,n,s){if(n!=null&&(n=""+We(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+We(s):""}function ks(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(ee(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=We(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function _n(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Co(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||qs.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function Qa(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&s[c]!==l&&Co(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&Co(t,f,n[f])}function Ka(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nr(t){return Pc.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var pi=null;function vn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yi=null,_i=null;function Xa(t){var n=kn(t);if(n&&(t=n.stateNode)){var s=t[ge]||null;t:switch(t=n.stateNode,n.type){case"input":if(on(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+pe(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var c=l[ge]||null;if(!c)throw Error(a(90));on(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&Ya(l)}break t;case"textarea":Yt(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&gi(t,!!s.multiple,n,!1)}}}var Gn=!1;function xo(t,n,s){if(Gn)return t(n,s);Gn=!0;try{var l=t(n);return l}finally{if(Gn=!1,(yi!==null||_i!==null)&&(Tu(),yi&&(n=yi,t=_i,_i=yi=null,Xa(n),t)))for(n=0;n<t.length;n++)Xa(t[n])}}function Hs(t,n){var s=t.stateNode;if(s===null)return null;var l=s[ge]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),En=!1;if(Vn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){En=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{En=!1}var Fn=null,Fi=null,vi=null;function $a(){if(vi)return vi;var t,n=Fi,s=n.length,l,c="value"in Fn?Fn.value:Fn.textContent,f=c.length;for(t=0;t<s&&n[t]===c[t];t++);var _=s-t;for(l=1;l<=_&&n[s-l]===c[f-l];l++);return vi=c.slice(t,1<l?1-l:void 0)}function Yn(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Qn(){return!0}function Za(){return!1}function De(t){function n(s,l,c,f,_){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(s=t[E],this[E]=s?s(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Qn:Za,this.isPropagationStopped=Za,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),n}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=De(kt),Fs=A({},kt,{view:0,detail:0}),Do=De(Fs),Or,Vr,Kn,Ys=A({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kn&&(Kn&&t.type==="mousemove"?(Or=t.screenX-Kn.screenX,Vr=t.screenY-Kn.screenY):Vr=Or=0,Kn=t),Or)},movementY:function(t){return"movementY"in t?t.movementY:Vr}}),Tn=De(Ys),No=A({},Ys,{dataTransfer:0}),jc=De(No),Qs=A({},Fs,{relatedTarget:0}),Mr=De(Qs),Ja=A({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),Lr=De(Ja),Io=A({},kt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ur=De(Io),zc=A({},kt,{data:0}),Wa=De(zc),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Vo[t])?!!n[t]:!1}function Xs(){return tl}var Mo=A({},Fs,{key:function(t){if(t.key){var n=Ks[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Yn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Oo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xs,charCode:function(t){return t.type==="keypress"?Yn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pr=De(Mo),Lo=A({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=De(Lo),Ei=A({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xs}),Uo=De(Ei),Po=A({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),jo=De(Po),zo=A({},Ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jr=De(zo),tn=A({},kt,{newState:0,oldState:0}),Bo=De(tn),ko=[9,13,27,32],Xn=Vn&&"CompositionEvent"in window,u=null;Vn&&"documentMode"in document&&(u=document.documentMode);var m=Vn&&"TextEvent"in window&&!u,p=Vn&&(!Xn||u&&8<u&&11>=u),T=" ",P=!1;function H(t,n){switch(t){case"keyup":return ko.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vt=!1;function Se(t,n){switch(t){case"compositionend":return nt(n);case"keypress":return n.which!==32?null:(P=!0,T);case"textInput":return t=n.data,t===T&&P?null:t;default:return null}}function Mt(t,n){if(Vt)return t==="compositionend"||!Xn&&H(t,n)?(t=$a(),vi=Fi=Fn=null,Vt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return p&&n.locale!=="ko"?null:n.data;default:return null}}var Ne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Re(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ne[t.type]:n==="textarea"}function Ti(t,n,s,l){yi?_i?_i.push(l):_i=[l]:yi=l,n=Cu(n,"onChange"),0<n.length&&(s=new Ir("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var je=null,$n=null;function nl(t){Vp(t,0)}function qo(t){var n=qn(t);if(Ya(n))return t}function tm(t,n){if(t==="change")return n}var em=!1;if(Vn){var Bc;if(Vn){var kc="oninput"in document;if(!kc){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),kc=typeof nm.oninput=="function"}Bc=kc}else Bc=!1;em=Bc&&(!document.documentMode||9<document.documentMode)}function im(){je&&(je.detachEvent("onpropertychange",sm),$n=je=null)}function sm(t){if(t.propertyName==="value"&&qo($n)){var n=[];Ti(n,$n,t,vn(t)),xo(nl,n)}}function $0(t,n,s){t==="focusin"?(im(),je=n,$n=s,je.attachEvent("onpropertychange",sm)):t==="focusout"&&im()}function Z0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qo($n)}function J0(t,n){if(t==="click")return qo(n)}function W0(t,n){if(t==="input"||t==="change")return qo(n)}function tE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var un=typeof Object.is=="function"?Object.is:tE;function il(t,n){if(un(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!xs.call(n,c)||!un(t[c],n[c]))return!1}return!0}function rm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,n){var s=rm(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=rm(s)}}function lm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?lm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function om(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=zs(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=zs(t.document)}return n}function qc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var eE=Vn&&"documentMode"in document&&11>=document.documentMode,zr=null,Hc=null,sl=null,Gc=!1;function um(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Gc||zr==null||zr!==zs(l)||(l=zr,"selectionStart"in l&&qc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sl&&il(sl,l)||(sl=l,l=Cu(Hc,"onSelect"),0<l.length&&(n=new Ir("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=zr)))}function $s(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Br={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},Fc={},cm={};Vn&&(cm=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function Zs(t){if(Fc[t])return Fc[t];if(!Br[t])return t;var n=Br[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in cm)return Fc[t]=n[s];return t}var hm=Zs("animationend"),fm=Zs("animationiteration"),dm=Zs("animationstart"),nE=Zs("transitionrun"),iE=Zs("transitionstart"),sE=Zs("transitioncancel"),mm=Zs("transitionend"),gm=new Map,Yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yc.push("scrollEnd");function Mn(t,n){gm.set(t,n),On(n,[t])}var pm=new WeakMap;function An(t,n){if(typeof t=="object"&&t!==null){var s=pm.get(t);return s!==void 0?s:(n={value:t,source:n,stack:xr(n)},pm.set(t,n),n)}return{value:t,source:n,stack:xr(n)}}var bn=[],kr=0,Qc=0;function Ho(){for(var t=kr,n=Qc=kr=0;n<t;){var s=bn[n];bn[n++]=null;var l=bn[n];bn[n++]=null;var c=bn[n];bn[n++]=null;var f=bn[n];if(bn[n++]=null,l!==null&&c!==null){var _=l.pending;_===null?c.next=c:(c.next=_.next,_.next=c),l.pending=c}f!==0&&ym(s,c,f)}}function Go(t,n,s,l){bn[kr++]=t,bn[kr++]=n,bn[kr++]=s,bn[kr++]=l,Qc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Kc(t,n,s,l){return Go(t,n,s,l),Fo(t)}function qr(t,n){return Go(t,null,null,n),Fo(t)}function ym(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var c=!1,f=t.return;f!==null;)f.childLanes|=s,l=f.alternate,l!==null&&(l.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-Fe(s),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=s|536870912),f):null}function Fo(t){if(50<Dl)throw Dl=0,tf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Hr={};function rE(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,n,s,l){return new rE(t,n,s,l)}function Xc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ai(t,n){var s=t.alternate;return s===null?(s=cn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function _m(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Yo(t,n,s,l,c,f){var _=0;if(l=t,typeof t=="function")Xc(t)&&(_=1);else if(typeof t=="string")_=lT(t,s,ft.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case x:return t=cn(31,s,n,c),t.elementType=x,t.lanes=f,t;case G:return Js(s.children,c,f,n);case tt:_=8,c|=24;break;case J:return t=cn(12,s,n,c|2),t.elementType=J,t.lanes=f,t;case ht:return t=cn(13,s,n,c),t.elementType=ht,t.lanes=f,t;case wt:return t=cn(19,s,n,c),t.elementType=wt,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mt:case st:_=10;break t;case ut:_=9;break t;case Rt:_=11;break t;case V:_=14;break t;case S:_=16,l=null;break t}_=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=cn(_,s,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function Js(t,n,s,l){return t=cn(7,t,l,n),t.lanes=s,t}function $c(t,n,s){return t=cn(6,t,null,n),t.lanes=s,t}function Zc(t,n,s){return n=cn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Gr=[],Fr=0,Qo=null,Ko=0,Sn=[],Rn=0,Ws=null,bi=1,Si="";function tr(t,n){Gr[Fr++]=Ko,Gr[Fr++]=Qo,Qo=t,Ko=n}function vm(t,n,s){Sn[Rn++]=bi,Sn[Rn++]=Si,Sn[Rn++]=Ws,Ws=t;var l=bi;t=Si;var c=32-Fe(l)-1;l&=~(1<<c),s+=1;var f=32-Fe(n)+c;if(30<f){var _=c-c%5;f=(l&(1<<_)-1).toString(32),l>>=_,c-=_,bi=1<<32-Fe(n)+c|s<<c|l,Si=f+t}else bi=1<<f|s<<c|l,Si=t}function Jc(t){t.return!==null&&(tr(t,1),vm(t,1,0))}function Wc(t){for(;t===Qo;)Qo=Gr[--Fr],Gr[Fr]=null,Ko=Gr[--Fr],Gr[Fr]=null;for(;t===Ws;)Ws=Sn[--Rn],Sn[Rn]=null,Si=Sn[--Rn],Sn[Rn]=null,bi=Sn[--Rn],Sn[Rn]=null}var en=null,le=null,Bt=!1,er=null,Zn=!1,th=Error(a(519));function nr(t){var n=Error(a(418,""));throw ll(An(n,t)),th}function Em(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[be]=t,n[ge]=l,s){case"dialog":It("cancel",n),It("close",n);break;case"iframe":case"object":case"embed":It("load",n);break;case"video":case"audio":for(s=0;s<Il.length;s++)It(Il[s],n);break;case"source":It("error",n);break;case"img":case"image":case"link":It("error",n),It("load",n);break;case"details":It("toggle",n);break;case"input":It("invalid",n),Bs(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Dr(n);break;case"select":It("invalid",n);break;case"textarea":It("invalid",n),ks(n,l.value,l.defaultValue,l.children),Dr(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||Pp(n.textContent,s)?(l.popover!=null&&(It("beforetoggle",n),It("toggle",n)),l.onScroll!=null&&It("scroll",n),l.onScrollEnd!=null&&It("scrollend",n),l.onClick!=null&&(n.onclick=xu),n=!0):n=!1,n||nr(t)}function Tm(t){for(en=t.return;en;)switch(en.tag){case 5:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:en=en.return}}function rl(t){if(t!==en)return!1;if(!Bt)return Tm(t),Bt=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||yf(t.type,t.memoizedProps)),s=!s),s&&le&&nr(t),Tm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){le=Un(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}le=null}}else n===27?(n=le,ls(t.type)?(t=Tf,Tf=null,le=t):le=n):le=en?Un(t.stateNode.nextSibling):null;return!0}function al(){le=en=null,Bt=!1}function Am(){var t=er;return t!==null&&(rn===null?rn=t:rn.push.apply(rn,t),er=null),t}function ll(t){er===null?er=[t]:er.push(t)}var eh=Z(null),ir=null,Ri=null;function Yi(t,n,s){W(eh,n._currentValue),n._currentValue=s}function wi(t){t._currentValue=eh.current,it(eh)}function nh(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function ih(t,n,s,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var _=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var R=0;R<n.length;R++)if(E.context===n[R]){f.lanes|=s,E=f.alternate,E!==null&&(E.lanes|=s),nh(f.return,s,t),l||(_=null);break t}f=E.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(a(341));_.lanes|=s,f=_.alternate,f!==null&&(f.lanes|=s),nh(_,s,t),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===t){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function ol(t,n,s,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var E=c.type;un(c.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(c===me.current){if(_=c.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}c=c.return}t!==null&&ih(n,t,s,l),n.flags|=262144}function Xo(t){for(t=t.firstContext;t!==null;){if(!un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sr(t){ir=t,Ri=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ye(t){return bm(ir,t)}function $o(t,n){return ir===null&&sr(t),bm(t,n)}function bm(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Ri===null){if(t===null)throw Error(a(308));Ri=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ri=Ri.next=n;return s}var aE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},lE=r.unstable_scheduleCallback,oE=r.unstable_NormalPriority,we={$$typeof:st,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sh(){return{controller:new aE,data:new Map,refCount:0}}function ul(t){t.refCount--,t.refCount===0&&lE(oE,function(){t.controller.abort()})}var cl=null,rh=0,Yr=0,Qr=null;function uE(t,n){if(cl===null){var s=cl=[];rh=0,Yr=of(),Qr={status:"pending",value:void 0,then:function(l){s.push(l)}}}return rh++,n.then(Sm,Sm),n}function Sm(){if(--rh===0&&cl!==null){Qr!==null&&(Qr.status="fulfilled");var t=cl;cl=null,Yr=0,Qr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function cE(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var Rm=F.S;F.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&uE(t,n),Rm!==null&&Rm(t,n)};var rr=Z(null);function ah(){var t=rr.current;return t!==null?t:Wt.pooledCache}function Zo(t,n){n===null?W(rr,rr.current):W(rr,n.pool)}function wm(){var t=ah();return t===null?null:{parent:we._currentValue,pool:t}}var hl=Error(a(460)),Cm=Error(a(474)),Jo=Error(a(542)),lh={then:function(){}};function xm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wo(){}function Dm(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Wo,Wo),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Im(t),t;default:if(typeof n.status=="string")n.then(Wo,Wo);else{if(t=Wt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Im(t),t}throw fl=n,hl}}var fl=null;function Nm(){if(fl===null)throw Error(a(459));var t=fl;return fl=null,t}function Im(t){if(t===hl||t===Jo)throw Error(a(483))}var Qi=!1;function oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ki(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xi(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Gt&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=Fo(t),ym(t,null,s),n}return Go(t,l,n,s),Fo(t)}function dl(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,ka(t,s)}}function ch(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?c=f=_:f=f.next=_,s=s.next}while(s!==null);f===null?c=f=n:f=f.next=n}else c=f=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var hh=!1;function ml(){if(hh){var t=Qr;if(t!==null)throw t}}function gl(t,n,s,l){hh=!1;var c=t.updateQueue;Qi=!1;var f=c.firstBaseUpdate,_=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var R=E,z=R.next;R.next=null,_===null?f=z:_.next=z,_=R;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==_&&(E===null?Y.firstBaseUpdate=z:E.next=z,Y.lastBaseUpdate=R))}if(f!==null){var X=c.baseState;_=0,Y=z=R=null,E=f;do{var k=E.lane&-536870913,q=k!==E.lane;if(q?(Lt&k)===k:(l&k)===k){k!==0&&k===Yr&&(hh=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=t,pt=E;k=n;var Xt=s;switch(pt.tag){case 1:if(Et=pt.payload,typeof Et=="function"){X=Et.call(Xt,X,k);break t}X=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=pt.payload,k=typeof Et=="function"?Et.call(Xt,X,k):Et,k==null)break t;X=A({},X,k);break t;case 2:Qi=!0}}k=E.callback,k!==null&&(t.flags|=64,q&&(t.flags|=8192),q=c.callbacks,q===null?c.callbacks=[k]:q.push(k))}else q={lane:k,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(z=Y=q,R=X):Y=Y.next=q,_|=k;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;q=E,E=q.next,q.next=null,c.lastBaseUpdate=q,c.shared.pending=null}}while(!0);Y===null&&(R=X),c.baseState=R,c.firstBaseUpdate=z,c.lastBaseUpdate=Y,f===null&&(c.shared.lanes=0),is|=_,t.lanes=_,t.memoizedState=X}}function Om(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Vm(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Om(s[t],n)}var Kr=Z(null),tu=Z(0);function Mm(t,n){t=Vi,W(tu,t),W(Kr,n),Vi=t|n.baseLanes}function fh(){W(tu,Vi),W(Kr,Kr.current)}function dh(){Vi=tu.current,it(Kr),it(tu)}var $i=0,Ct=null,Qt=null,ye=null,eu=!1,Xr=!1,ar=!1,nu=0,pl=0,$r=null,hE=0;function he(){throw Error(a(321))}function mh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!un(t[s],n[s]))return!1;return!0}function gh(t,n,s,l,c,f){return $i=f,Ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=t===null||t.memoizedState===null?yg:_g,ar=!1,f=s(l,c),ar=!1,Xr&&(f=Um(n,s,l,c)),Lm(t),f}function Lm(t){F.H=ou;var n=Qt!==null&&Qt.next!==null;if($i=0,ye=Qt=Ct=null,eu=!1,pl=0,$r=null,n)throw Error(a(300));t===null||Ie||(t=t.dependencies,t!==null&&Xo(t)&&(Ie=!0))}function Um(t,n,s,l){Ct=t;var c=0;do{if(Xr&&($r=null),pl=0,Xr=!1,25<=c)throw Error(a(301));if(c+=1,ye=Qt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=_E,f=n(s,l)}while(Xr);return f}function fE(){var t=F.H,n=t.useState()[0];return n=typeof n.then=="function"?yl(n):n,t=t.useState()[0],(Qt!==null?Qt.memoizedState:null)!==t&&(Ct.flags|=1024),n}function ph(){var t=nu!==0;return nu=0,t}function yh(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function _h(t){if(eu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}eu=!1}$i=0,ye=Qt=Ct=null,Xr=!1,pl=nu=0,$r=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?Ct.memoizedState=ye=t:ye=ye.next=t,ye}function _e(){if(Qt===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=Qt.next;var n=ye===null?Ct.memoizedState:ye.next;if(n!==null)ye=n,Qt=t;else{if(t===null)throw Ct.alternate===null?Error(a(467)):Error(a(310));Qt=t,t={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},ye===null?Ct.memoizedState=ye=t:ye=ye.next=t}return ye}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var n=pl;return pl+=1,$r===null&&($r=[]),t=Dm($r,t,n),n=Ct,(ye===null?n.memoizedState:ye.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?yg:_g),t}function iu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===st)return Ye(t)}throw Error(a(438,String(t)))}function Eh(t){var n=null,s=Ct.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=Ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=vh(),Ct.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=O;return n.index++,s}function Ci(t,n){return typeof n=="function"?n(t):n}function su(t){var n=_e();return Th(n,Qt,t)}function Th(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var _=c.next;c.next=f.next,f.next=_}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var E=_=null,R=null,z=n,Y=!1;do{var X=z.lane&-536870913;if(X!==z.lane?(Lt&X)===X:($i&X)===X){var k=z.revertLane;if(k===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),X===Yr&&(Y=!0);else if(($i&k)===k){z=z.next,k===Yr&&(Y=!0);continue}else X={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(E=R=X,_=f):R=R.next=X,Ct.lanes|=k,is|=k;X=z.action,ar&&s(f,X),f=z.hasEagerState?z.eagerState:s(f,X)}else k={lane:X,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(E=R=k,_=f):R=R.next=k,Ct.lanes|=X,is|=X;z=z.next}while(z!==null&&z!==n);if(R===null?_=f:R.next=E,!un(f,t.memoizedState)&&(Ie=!0,Y&&(s=Qr,s!==null)))throw s;t.memoizedState=f,t.baseState=_,t.baseQueue=R,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ah(t){var n=_e(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,f=n.memoizedState;if(c!==null){s.pending=null;var _=c=c.next;do f=t(f,_.action),_=_.next;while(_!==c);un(f,n.memoizedState)||(Ie=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,l]}function Pm(t,n,s){var l=Ct,c=_e(),f=Bt;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=n();var _=!un((Qt||c).memoizedState,s);_&&(c.memoizedState=s,Ie=!0),c=c.queue;var E=Bm.bind(null,l,c,t);if(_l(2048,8,E,[t]),c.getSnapshot!==n||_||ye!==null&&ye.memoizedState.tag&1){if(l.flags|=2048,Zr(9,ru(),zm.bind(null,l,c,s,n),null),Wt===null)throw Error(a(349));f||($i&124)!==0||jm(l,n,s)}return s}function jm(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ct.updateQueue,n===null?(n=vh(),Ct.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function zm(t,n,s,l){n.value=s,n.getSnapshot=l,km(n)&&qm(t)}function Bm(t,n,s){return s(function(){km(n)&&qm(t)})}function km(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!un(t,s)}catch{return!0}}function qm(t){var n=qr(t,2);n!==null&&gn(n,t,2)}function bh(t){var n=nn();if(typeof t=="function"){var s=t;if(t=s(),ar){ln(!0);try{s()}finally{ln(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},n}function Hm(t,n,s,l){return t.baseState=s,Th(t,Qt,typeof l=="function"?l:Ci)}function dE(t,n,s,l,c){if(lu(t))throw Error(a(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};F.T!==null?s(!0):f.isTransition=!1,l(f),s=n.pending,s===null?(f.next=n.pending=f,Gm(n,f)):(f.next=s.next,n.pending=s.next=f)}}function Gm(t,n){var s=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=F.T,_={};F.T=_;try{var E=s(c,l),R=F.S;R!==null&&R(_,E),Fm(t,n,E)}catch(z){Sh(t,n,z)}finally{F.T=f}}else try{f=s(c,l),Fm(t,n,f)}catch(z){Sh(t,n,z)}}function Fm(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Ym(t,n,l)},function(l){return Sh(t,n,l)}):Ym(t,n,s)}function Ym(t,n,s){n.status="fulfilled",n.value=s,Qm(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,Gm(t,s)))}function Sh(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,Qm(n),n=n.next;while(n!==l)}t.action=null}function Qm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Km(t,n){return n}function Xm(t,n){if(Bt){var s=Wt.formState;if(s!==null){t:{var l=Ct;if(Bt){if(le){e:{for(var c=le,f=Zn;c.nodeType!==8;){if(!f){c=null;break e}if(c=Un(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){le=Un(c.nextSibling),l=c.data==="F!";break t}}nr(l)}l=!1}l&&(n=s[0])}}return s=nn(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Km,lastRenderedState:n},s.queue=l,s=mg.bind(null,Ct,l),l.dispatch=s,l=bh(!1),f=Dh.bind(null,Ct,!1,l.queue),l=nn(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,s=dE.bind(null,Ct,c,f,s),c.dispatch=s,l.memoizedState=t,[n,s,!1]}function $m(t){var n=_e();return Zm(n,Qt,t)}function Zm(t,n,s){if(n=Th(t,n,Km)[0],t=su(Ci)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=yl(n)}catch(_){throw _===hl?Jo:_}else l=n;n=_e();var c=n.queue,f=c.dispatch;return s!==n.memoizedState&&(Ct.flags|=2048,Zr(9,ru(),mE.bind(null,c,s),null)),[l,f,t]}function mE(t,n){t.action=n}function Jm(t){var n=_e(),s=Qt;if(s!==null)return Zm(n,s,t);_e(),n=n.memoizedState,s=_e();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function Zr(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=Ct.updateQueue,n===null&&(n=vh(),Ct.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function ru(){return{destroy:void 0,resource:void 0}}function Wm(){return _e().memoizedState}function au(t,n,s,l){var c=nn();l=l===void 0?null:l,Ct.flags|=t,c.memoizedState=Zr(1|n,ru(),s,l)}function _l(t,n,s,l){var c=_e();l=l===void 0?null:l;var f=c.memoizedState.inst;Qt!==null&&l!==null&&mh(l,Qt.memoizedState.deps)?c.memoizedState=Zr(n,f,s,l):(Ct.flags|=t,c.memoizedState=Zr(1|n,f,s,l))}function tg(t,n){au(8390656,8,t,n)}function eg(t,n){_l(2048,8,t,n)}function ng(t,n){return _l(4,2,t,n)}function ig(t,n){return _l(4,4,t,n)}function sg(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function rg(t,n,s){s=s!=null?s.concat([t]):null,_l(4,4,sg.bind(null,n,t),s)}function Rh(){}function ag(t,n){var s=_e();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&mh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function lg(t,n){var s=_e();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&mh(n,l[1]))return l[0];if(l=t(),ar){ln(!0);try{t()}finally{ln(!1)}}return s.memoizedState=[l,n],l}function wh(t,n,s){return s===void 0||($i&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=cp(),Ct.lanes|=t,is|=t,s)}function og(t,n,s,l){return un(s,n)?s:Kr.current!==null?(t=wh(t,s,l),un(t,n)||(Ie=!0),t):($i&42)===0?(Ie=!0,t.memoizedState=s):(t=cp(),Ct.lanes|=t,is|=t,n)}function ug(t,n,s,l,c){var f=et.p;et.p=f!==0&&8>f?f:8;var _=F.T,E={};F.T=E,Dh(t,!1,n,s);try{var R=c(),z=F.S;if(z!==null&&z(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=cE(R,l);vl(t,n,Y,mn(t))}else vl(t,n,l,mn(t))}catch(X){vl(t,n,{then:function(){},status:"rejected",reason:X},mn())}finally{et.p=f,F.T=_}}function gE(){}function Ch(t,n,s,l){if(t.tag!==5)throw Error(a(476));var c=cg(t).queue;ug(t,c,n,ot,s===null?gE:function(){return hg(t),s(l)})}function cg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:ot},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function hg(t){var n=cg(t).next.queue;vl(t,n,{},mn())}function xh(){return Ye(Pl)}function fg(){return _e().memoizedState}function dg(){return _e().memoizedState}function pE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=mn();t=Ki(s);var l=Xi(n,t,s);l!==null&&(gn(l,n,s),dl(l,n,s)),n={cache:sh()},t.payload=n;return}n=n.return}}function yE(t,n,s){var l=mn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},lu(t)?gg(n,s):(s=Kc(t,n,s,l),s!==null&&(gn(s,t,l),pg(s,n,l)))}function mg(t,n,s){var l=mn();vl(t,n,s,l)}function vl(t,n,s,l){var c={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(lu(t))gg(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var _=n.lastRenderedState,E=f(_,s);if(c.hasEagerState=!0,c.eagerState=E,un(E,_))return Go(t,n,c,0),Wt===null&&Ho(),!1}catch{}finally{}if(s=Kc(t,n,c,l),s!==null)return gn(s,t,l),pg(s,n,l),!0}return!1}function Dh(t,n,s,l){if(l={lane:2,revertLane:of(),action:l,hasEagerState:!1,eagerState:null,next:null},lu(t)){if(n)throw Error(a(479))}else n=Kc(t,s,l,2),n!==null&&gn(n,t,2)}function lu(t){var n=t.alternate;return t===Ct||n!==null&&n===Ct}function gg(t,n){Xr=eu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function pg(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,ka(t,s)}}var ou={readContext:Ye,use:iu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},yg={readContext:Ye,use:iu,useCallback:function(t,n){return nn().memoizedState=[t,n===void 0?null:n],t},useContext:Ye,useEffect:tg,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,au(4194308,4,sg.bind(null,n,t),s)},useLayoutEffect:function(t,n){return au(4194308,4,t,n)},useInsertionEffect:function(t,n){au(4,2,t,n)},useMemo:function(t,n){var s=nn();n=n===void 0?null:n;var l=t();if(ar){ln(!0);try{t()}finally{ln(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=nn();if(s!==void 0){var c=s(n);if(ar){ln(!0);try{s(n)}finally{ln(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=yE.bind(null,Ct,t),[l.memoizedState,t]},useRef:function(t){var n=nn();return t={current:t},n.memoizedState=t},useState:function(t){t=bh(t);var n=t.queue,s=mg.bind(null,Ct,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Rh,useDeferredValue:function(t,n){var s=nn();return wh(s,t,n)},useTransition:function(){var t=bh(!1);return t=ug.bind(null,Ct,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=Ct,c=nn();if(Bt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),Wt===null)throw Error(a(349));(Lt&124)!==0||jm(l,n,s)}c.memoizedState=s;var f={value:s,getSnapshot:n};return c.queue=f,tg(Bm.bind(null,l,f,t),[t]),l.flags|=2048,Zr(9,ru(),zm.bind(null,l,f,s,n),null),s},useId:function(){var t=nn(),n=Wt.identifierPrefix;if(Bt){var s=Si,l=bi;s=(l&~(1<<32-Fe(l)-1)).toString(32)+s,n="«"+n+"R"+s,s=nu++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=hE++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:xh,useFormState:Xm,useActionState:Xm,useOptimistic:function(t){var n=nn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Dh.bind(null,Ct,!0,s),s.dispatch=n,[t,n]},useMemoCache:Eh,useCacheRefresh:function(){return nn().memoizedState=pE.bind(null,Ct)}},_g={readContext:Ye,use:iu,useCallback:ag,useContext:Ye,useEffect:eg,useImperativeHandle:rg,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:lg,useReducer:su,useRef:Wm,useState:function(){return su(Ci)},useDebugValue:Rh,useDeferredValue:function(t,n){var s=_e();return og(s,Qt.memoizedState,t,n)},useTransition:function(){var t=su(Ci)[0],n=_e().memoizedState;return[typeof t=="boolean"?t:yl(t),n]},useSyncExternalStore:Pm,useId:fg,useHostTransitionStatus:xh,useFormState:$m,useActionState:$m,useOptimistic:function(t,n){var s=_e();return Hm(s,Qt,t,n)},useMemoCache:Eh,useCacheRefresh:dg},_E={readContext:Ye,use:iu,useCallback:ag,useContext:Ye,useEffect:eg,useImperativeHandle:rg,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:lg,useReducer:Ah,useRef:Wm,useState:function(){return Ah(Ci)},useDebugValue:Rh,useDeferredValue:function(t,n){var s=_e();return Qt===null?wh(s,t,n):og(s,Qt.memoizedState,t,n)},useTransition:function(){var t=Ah(Ci)[0],n=_e().memoizedState;return[typeof t=="boolean"?t:yl(t),n]},useSyncExternalStore:Pm,useId:fg,useHostTransitionStatus:xh,useFormState:Jm,useActionState:Jm,useOptimistic:function(t,n){var s=_e();return Qt!==null?Hm(s,Qt,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Eh,useCacheRefresh:dg},Jr=null,El=0;function uu(t){var n=El;return El+=1,Jr===null&&(Jr=[]),Dm(Jr,t,n)}function Tl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function cu(t,n){throw n.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function vg(t){var n=t._init;return n(t._payload)}function Eg(t){function n(U,N){if(t){var j=U.deletions;j===null?(U.deletions=[N],U.flags|=16):j.push(N)}}function s(U,N){if(!t)return null;for(;N!==null;)n(U,N),N=N.sibling;return null}function l(U){for(var N=new Map;U!==null;)U.key!==null?N.set(U.key,U):N.set(U.index,U),U=U.sibling;return N}function c(U,N){return U=Ai(U,N),U.index=0,U.sibling=null,U}function f(U,N,j){return U.index=j,t?(j=U.alternate,j!==null?(j=j.index,j<N?(U.flags|=67108866,N):j):(U.flags|=67108866,N)):(U.flags|=1048576,N)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,N,j,Q){return N===null||N.tag!==6?(N=$c(j,U.mode,Q),N.return=U,N):(N=c(N,j),N.return=U,N)}function R(U,N,j,Q){var lt=j.type;return lt===G?Y(U,N,j.props.children,Q,j.key):N!==null&&(N.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&vg(lt)===N.type)?(N=c(N,j.props),Tl(N,j),N.return=U,N):(N=Yo(j.type,j.key,j.props,null,U.mode,Q),Tl(N,j),N.return=U,N)}function z(U,N,j,Q){return N===null||N.tag!==4||N.stateNode.containerInfo!==j.containerInfo||N.stateNode.implementation!==j.implementation?(N=Zc(j,U.mode,Q),N.return=U,N):(N=c(N,j.children||[]),N.return=U,N)}function Y(U,N,j,Q,lt){return N===null||N.tag!==7?(N=Js(j,U.mode,Q,lt),N.return=U,N):(N=c(N,j),N.return=U,N)}function X(U,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=$c(""+N,U.mode,j),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return j=Yo(N.type,N.key,N.props,null,U.mode,j),Tl(j,N),j.return=U,j;case B:return N=Zc(N,U.mode,j),N.return=U,N;case S:var Q=N._init;return N=Q(N._payload),X(U,N,j)}if(ee(N)||L(N))return N=Js(N,U.mode,j,null),N.return=U,N;if(typeof N.then=="function")return X(U,uu(N),j);if(N.$$typeof===st)return X(U,$o(U,N),j);cu(U,N)}return null}function k(U,N,j,Q){var lt=N!==null?N.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return lt!==null?null:E(U,N,""+j,Q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return j.key===lt?R(U,N,j,Q):null;case B:return j.key===lt?z(U,N,j,Q):null;case S:return lt=j._init,j=lt(j._payload),k(U,N,j,Q)}if(ee(j)||L(j))return lt!==null?null:Y(U,N,j,Q,null);if(typeof j.then=="function")return k(U,N,uu(j),Q);if(j.$$typeof===st)return k(U,N,$o(U,j),Q);cu(U,j)}return null}function q(U,N,j,Q,lt){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return U=U.get(j)||null,E(N,U,""+Q,lt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return U=U.get(Q.key===null?j:Q.key)||null,R(N,U,Q,lt);case B:return U=U.get(Q.key===null?j:Q.key)||null,z(N,U,Q,lt);case S:var Dt=Q._init;return Q=Dt(Q._payload),q(U,N,j,Q,lt)}if(ee(Q)||L(Q))return U=U.get(j)||null,Y(N,U,Q,lt,null);if(typeof Q.then=="function")return q(U,N,j,uu(Q),lt);if(Q.$$typeof===st)return q(U,N,j,$o(N,Q),lt);cu(N,Q)}return null}function Et(U,N,j,Q){for(var lt=null,Dt=null,ct=N,yt=N=0,Ve=null;ct!==null&&yt<j.length;yt++){ct.index>yt?(Ve=ct,ct=null):Ve=ct.sibling;var zt=k(U,ct,j[yt],Q);if(zt===null){ct===null&&(ct=Ve);break}t&&ct&&zt.alternate===null&&n(U,ct),N=f(zt,N,yt),Dt===null?lt=zt:Dt.sibling=zt,Dt=zt,ct=Ve}if(yt===j.length)return s(U,ct),Bt&&tr(U,yt),lt;if(ct===null){for(;yt<j.length;yt++)ct=X(U,j[yt],Q),ct!==null&&(N=f(ct,N,yt),Dt===null?lt=ct:Dt.sibling=ct,Dt=ct);return Bt&&tr(U,yt),lt}for(ct=l(ct);yt<j.length;yt++)Ve=q(ct,U,yt,j[yt],Q),Ve!==null&&(t&&Ve.alternate!==null&&ct.delete(Ve.key===null?yt:Ve.key),N=f(Ve,N,yt),Dt===null?lt=Ve:Dt.sibling=Ve,Dt=Ve);return t&&ct.forEach(function(fs){return n(U,fs)}),Bt&&tr(U,yt),lt}function pt(U,N,j,Q){if(j==null)throw Error(a(151));for(var lt=null,Dt=null,ct=N,yt=N=0,Ve=null,zt=j.next();ct!==null&&!zt.done;yt++,zt=j.next()){ct.index>yt?(Ve=ct,ct=null):Ve=ct.sibling;var fs=k(U,ct,zt.value,Q);if(fs===null){ct===null&&(ct=Ve);break}t&&ct&&fs.alternate===null&&n(U,ct),N=f(fs,N,yt),Dt===null?lt=fs:Dt.sibling=fs,Dt=fs,ct=Ve}if(zt.done)return s(U,ct),Bt&&tr(U,yt),lt;if(ct===null){for(;!zt.done;yt++,zt=j.next())zt=X(U,zt.value,Q),zt!==null&&(N=f(zt,N,yt),Dt===null?lt=zt:Dt.sibling=zt,Dt=zt);return Bt&&tr(U,yt),lt}for(ct=l(ct);!zt.done;yt++,zt=j.next())zt=q(ct,U,yt,zt.value,Q),zt!==null&&(t&&zt.alternate!==null&&ct.delete(zt.key===null?yt:zt.key),N=f(zt,N,yt),Dt===null?lt=zt:Dt.sibling=zt,Dt=zt);return t&&ct.forEach(function(vT){return n(U,vT)}),Bt&&tr(U,yt),lt}function Xt(U,N,j,Q){if(typeof j=="object"&&j!==null&&j.type===G&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case b:t:{for(var lt=j.key;N!==null;){if(N.key===lt){if(lt=j.type,lt===G){if(N.tag===7){s(U,N.sibling),Q=c(N,j.props.children),Q.return=U,U=Q;break t}}else if(N.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&vg(lt)===N.type){s(U,N.sibling),Q=c(N,j.props),Tl(Q,j),Q.return=U,U=Q;break t}s(U,N);break}else n(U,N);N=N.sibling}j.type===G?(Q=Js(j.props.children,U.mode,Q,j.key),Q.return=U,U=Q):(Q=Yo(j.type,j.key,j.props,null,U.mode,Q),Tl(Q,j),Q.return=U,U=Q)}return _(U);case B:t:{for(lt=j.key;N!==null;){if(N.key===lt)if(N.tag===4&&N.stateNode.containerInfo===j.containerInfo&&N.stateNode.implementation===j.implementation){s(U,N.sibling),Q=c(N,j.children||[]),Q.return=U,U=Q;break t}else{s(U,N);break}else n(U,N);N=N.sibling}Q=Zc(j,U.mode,Q),Q.return=U,U=Q}return _(U);case S:return lt=j._init,j=lt(j._payload),Xt(U,N,j,Q)}if(ee(j))return Et(U,N,j,Q);if(L(j)){if(lt=L(j),typeof lt!="function")throw Error(a(150));return j=lt.call(j),pt(U,N,j,Q)}if(typeof j.then=="function")return Xt(U,N,uu(j),Q);if(j.$$typeof===st)return Xt(U,N,$o(U,j),Q);cu(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,N!==null&&N.tag===6?(s(U,N.sibling),Q=c(N,j),Q.return=U,U=Q):(s(U,N),Q=$c(j,U.mode,Q),Q.return=U,U=Q),_(U)):s(U,N)}return function(U,N,j,Q){try{El=0;var lt=Xt(U,N,j,Q);return Jr=null,lt}catch(ct){if(ct===hl||ct===Jo)throw ct;var Dt=cn(29,ct,null,U.mode);return Dt.lanes=Q,Dt.return=U,Dt}finally{}}}var Wr=Eg(!0),Tg=Eg(!1),wn=Z(null),Jn=null;function Zi(t){var n=t.alternate;W(Ce,Ce.current&1),W(wn,t),Jn===null&&(n===null||Kr.current!==null||n.memoizedState!==null)&&(Jn=t)}function Ag(t){if(t.tag===22){if(W(Ce,Ce.current),W(wn,t),Jn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Jn=t)}}else Ji()}function Ji(){W(Ce,Ce.current),W(wn,wn.current)}function xi(t){it(wn),Jn===t&&(Jn=null),it(Ce)}var Ce=Z(0);function hu(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Ef(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Nh(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:A({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ih={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=mn(),c=Ki(l);c.payload=n,s!=null&&(c.callback=s),n=Xi(t,c,l),n!==null&&(gn(n,t,l),dl(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=mn(),c=Ki(l);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=Xi(t,c,l),n!==null&&(gn(n,t,l),dl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=mn(),l=Ki(s);l.tag=2,n!=null&&(l.callback=n),n=Xi(t,l,s),n!==null&&(gn(n,t,s),dl(n,t,s))}};function bg(t,n,s,l,c,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):n.prototype&&n.prototype.isPureReactComponent?!il(s,l)||!il(c,f):!0}function Sg(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&Ih.enqueueReplaceState(n,n.state,null)}function lr(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=A({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}var fu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Rg(t){fu(t)}function wg(t){console.error(t)}function Cg(t){fu(t)}function du(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function xg(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Oh(t,n,s){return s=Ki(s),s.tag=3,s.payload={element:null},s.callback=function(){du(t,n)},s}function Dg(t){return t=Ki(t),t.tag=3,t}function Ng(t,n,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){xg(n,s,l)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){xg(n,s,l),typeof c!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function vE(t,n,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&ol(n,s,c,!0),s=wn.current,s!==null){switch(s.tag){case 13:return Jn===null?nf():s.alternate===null&&oe===0&&(oe=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===lh?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),rf(t,l,c)),!1;case 22:return s.flags|=65536,l===lh?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),rf(t,l,c)),!1}throw Error(a(435,s.tag))}return rf(t,l,c),nf(),!1}if(Bt)return n=wn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==th&&(t=Error(a(422),{cause:l}),ll(An(t,s)))):(l!==th&&(n=Error(a(423),{cause:l}),ll(An(n,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=An(l,s),c=Oh(t.stateNode,l,c),ch(t,c),oe!==4&&(oe=2)),!1;var f=Error(a(520),{cause:l});if(f=An(f,s),xl===null?xl=[f]:xl.push(f),oe!==4&&(oe=2),n===null)return!0;l=An(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=Oh(s.stateNode,l,t),ch(s,t),!1;case 1:if(n=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ss===null||!ss.has(f))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Dg(c),Ng(c,t,s,l),ch(s,c),!1}s=s.return}while(s!==null);return!1}var Ig=Error(a(461)),Ie=!1;function ze(t,n,s,l){n.child=t===null?Tg(n,null,s,l):Wr(n,t.child,s,l)}function Og(t,n,s,l,c){s=s.render;var f=n.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return sr(n),l=gh(t,n,s,_,f,c),E=ph(),t!==null&&!Ie?(yh(t,n,c),Di(t,n,c)):(Bt&&E&&Jc(n),n.flags|=1,ze(t,n,l,c),n.child)}function Vg(t,n,s,l,c){if(t===null){var f=s.type;return typeof f=="function"&&!Xc(f)&&f.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=f,Mg(t,n,f,l,c)):(t=Yo(s.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Bh(t,c)){var _=f.memoizedProps;if(s=s.compare,s=s!==null?s:il,s(_,l)&&t.ref===n.ref)return Di(t,n,c)}return n.flags|=1,t=Ai(f,l),t.ref=n.ref,t.return=n,n.child=t}function Mg(t,n,s,l,c){if(t!==null){var f=t.memoizedProps;if(il(f,l)&&t.ref===n.ref)if(Ie=!1,n.pendingProps=l=f,Bh(t,c))(t.flags&131072)!==0&&(Ie=!0);else return n.lanes=t.lanes,Di(t,n,c)}return Vh(t,n,s,l,c)}function Lg(t,n,s){var l=n.pendingProps,c=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=f!==null?f.baseLanes|s:s,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return Ug(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zo(n,f!==null?f.cachePool:null),f!==null?Mm(n,f):fh(),Ag(n);else return n.lanes=n.childLanes=536870912,Ug(t,n,f!==null?f.baseLanes|s:s,s)}else f!==null?(Zo(n,f.cachePool),Mm(n,f),Ji(),n.memoizedState=null):(t!==null&&Zo(n,null),fh(),Ji());return ze(t,n,c,s),n.child}function Ug(t,n,s,l){var c=ah();return c=c===null?null:{parent:we._currentValue,pool:c},n.memoizedState={baseLanes:s,cachePool:c},t!==null&&Zo(n,null),fh(),Ag(n),t!==null&&ol(t,n,l,!0),null}function mu(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Vh(t,n,s,l,c){return sr(n),s=gh(t,n,s,l,void 0,c),l=ph(),t!==null&&!Ie?(yh(t,n,c),Di(t,n,c)):(Bt&&l&&Jc(n),n.flags|=1,ze(t,n,s,c),n.child)}function Pg(t,n,s,l,c,f){return sr(n),n.updateQueue=null,s=Um(n,l,s,c),Lm(t),l=ph(),t!==null&&!Ie?(yh(t,n,f),Di(t,n,f)):(Bt&&l&&Jc(n),n.flags|=1,ze(t,n,s,f),n.child)}function jg(t,n,s,l,c){if(sr(n),n.stateNode===null){var f=Hr,_=s.contextType;typeof _=="object"&&_!==null&&(f=Ye(_)),f=new s(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ih,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},oh(n),_=s.contextType,f.context=typeof _=="object"&&_!==null?Ye(_):Hr,f.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(Nh(n,s,_,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Ih.enqueueReplaceState(f,f.state,null),gl(n,l,f,c),ml(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var E=n.memoizedProps,R=lr(s,E);f.props=R;var z=f.context,Y=s.contextType;_=Hr,typeof Y=="object"&&Y!==null&&(_=Ye(Y));var X=s.getDerivedStateFromProps;Y=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||z!==_)&&Sg(n,f,l,_),Qi=!1;var k=n.memoizedState;f.state=k,gl(n,l,f,c),ml(),z=n.memoizedState,E||k!==z||Qi?(typeof X=="function"&&(Nh(n,s,X,l),z=n.memoizedState),(R=Qi||bg(n,s,R,l,k,z,_))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=z),f.props=l,f.state=z,f.context=_,l=R):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,uh(t,n),_=n.memoizedProps,Y=lr(s,_),f.props=Y,X=n.pendingProps,k=f.context,z=s.contextType,R=Hr,typeof z=="object"&&z!==null&&(R=Ye(z)),E=s.getDerivedStateFromProps,(z=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==X||k!==R)&&Sg(n,f,l,R),Qi=!1,k=n.memoizedState,f.state=k,gl(n,l,f,c),ml();var q=n.memoizedState;_!==X||k!==q||Qi||t!==null&&t.dependencies!==null&&Xo(t.dependencies)?(typeof E=="function"&&(Nh(n,s,E,l),q=n.memoizedState),(Y=Qi||bg(n,s,Y,l,k,q,R)||t!==null&&t.dependencies!==null&&Xo(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,q,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,q,R)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&k===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&k===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=q),f.props=l,f.state=q,f.context=R,l=Y):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&k===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&k===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,mu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=Wr(n,t.child,null,c),n.child=Wr(n,null,s,c)):ze(t,n,s,c),n.memoizedState=f.state,t=n.child):t=Di(t,n,c),t}function zg(t,n,s,l){return al(),n.flags|=256,ze(t,n,s,l),n.child}var Mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lh(t){return{baseLanes:t,cachePool:wm()}}function Uh(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Cn),t}function Bg(t,n,s){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Ce.current&2)!==0),_&&(c=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(Bt){if(c?Zi(n):Ji(),Bt){var E=le,R;if(R=E){t:{for(R=E,E=Zn;R.nodeType!==8;){if(!E){E=null;break t}if(R=Un(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(n.memoizedState={dehydrated:E,treeContext:Ws!==null?{id:bi,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},R=cn(18,null,null,0),R.stateNode=E,R.return=n,n.child=R,en=n,le=null,R=!0):R=!1}R||nr(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ef(E)?n.lanes=32:n.lanes=536870912,null;xi(n)}return E=l.children,l=l.fallback,c?(Ji(),c=n.mode,E=gu({mode:"hidden",children:E},c),l=Js(l,c,s,null),E.return=n,l.return=n,E.sibling=l,n.child=E,c=n.child,c.memoizedState=Lh(s),c.childLanes=Uh(t,_,s),n.memoizedState=Mh,l):(Zi(n),Ph(n,E))}if(R=t.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(f)n.flags&256?(Zi(n),n.flags&=-257,n=jh(t,n,s)):n.memoizedState!==null?(Ji(),n.child=t.child,n.flags|=128,n=null):(Ji(),c=l.fallback,E=n.mode,l=gu({mode:"visible",children:l.children},E),c=Js(c,E,s,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,Wr(n,t.child,null,s),l=n.child,l.memoizedState=Lh(s),l.childLanes=Uh(t,_,s),n.memoizedState=Mh,n=c);else if(Zi(n),Ef(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(a(419)),l.stack="",l.digest=_,ll({value:l,source:null,stack:null}),n=jh(t,n,s)}else if(Ie||ol(t,n,s,!1),_=(s&t.childLanes)!==0,Ie||_){if(_=Wt,_!==null&&(l=s&-s,l=(l&42)!==0?1:zi(l),l=(l&(_.suspendedLanes|s))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,qr(t,l),gn(_,t,l),Ig;E.data==="$?"||nf(),n=jh(t,n,s)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=R.treeContext,le=Un(E.nextSibling),en=n,Bt=!0,er=null,Zn=!1,t!==null&&(Sn[Rn++]=bi,Sn[Rn++]=Si,Sn[Rn++]=Ws,bi=t.id,Si=t.overflow,Ws=n),n=Ph(n,l.children),n.flags|=4096);return n}return c?(Ji(),c=l.fallback,E=n.mode,R=t.child,z=R.sibling,l=Ai(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,z!==null?c=Ai(z,c):(c=Js(c,E,s,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,E=t.child.memoizedState,E===null?E=Lh(s):(R=E.cachePool,R!==null?(z=we._currentValue,R=R.parent!==z?{parent:z,pool:z}:R):R=wm(),E={baseLanes:E.baseLanes|s,cachePool:R}),c.memoizedState=E,c.childLanes=Uh(t,_,s),n.memoizedState=Mh,l):(Zi(n),s=t.child,t=s.sibling,s=Ai(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=s,n.memoizedState=null,s)}function Ph(t,n){return n=gu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function gu(t,n){return t=cn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function jh(t,n,s){return Wr(n,t.child,null,s),t=Ph(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function kg(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),nh(t.return,n,s)}function zh(t,n,s,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=c)}function qg(t,n,s){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(ze(t,n,l.children,s),l=Ce.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kg(t,s,n);else if(t.tag===19)kg(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(W(Ce,l),c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&hu(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),zh(n,!1,c,s,f);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&hu(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}zh(n,!0,s,null,f);break;case"together":zh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Di(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),is|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(ol(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Ai(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Ai(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Bh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Xo(t)))}function EE(t,n,s){switch(n.tag){case 3:gt(n,n.stateNode.containerInfo),Yi(n,we,t.memoizedState.cache),al();break;case 27:case 5:zn(n);break;case 4:gt(n,n.stateNode.containerInfo);break;case 10:Yi(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Zi(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Bg(t,n,s):(Zi(n),t=Di(t,n,s),t!==null?t.sibling:null);Zi(n);break;case 19:var c=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(ol(t,n,s,!1),l=(s&n.childLanes)!==0),c){if(l)return qg(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(Ce,Ce.current),l)break;return null;case 22:case 23:return n.lanes=0,Lg(t,n,s);case 24:Yi(n,we,t.memoizedState.cache)}return Di(t,n,s)}function Hg(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ie=!0;else{if(!Bh(t,s)&&(n.flags&128)===0)return Ie=!1,EE(t,n,s);Ie=(t.flags&131072)!==0}else Ie=!1,Bt&&(n.flags&1048576)!==0&&vm(n,Ko,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Xc(l)?(t=lr(l,t),n.tag=1,n=jg(null,n,l,t,s)):(n.tag=0,n=Vh(null,n,l,t,s));else{if(l!=null){if(c=l.$$typeof,c===Rt){n.tag=11,n=Og(null,n,l,t,s);break t}else if(c===V){n.tag=14,n=Vg(null,n,l,t,s);break t}}throw n=Ae(l)||l,Error(a(306,n,""))}}return n;case 0:return Vh(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,c=lr(l,n.pendingProps),jg(t,n,l,c,s);case 3:t:{if(gt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,uh(t,n),gl(n,l,null,s);var _=n.memoizedState;if(l=_.cache,Yi(n,we,l),l!==f.cache&&ih(n,[we],s,!0),ml(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=zg(t,n,l,s);break t}else if(l!==c){c=An(Error(a(424)),n),ll(c),n=zg(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(le=Un(t.firstChild),en=n,Bt=!0,er=null,Zn=!0,s=Tg(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(al(),l===c){n=Di(t,n,s);break t}ze(t,n,l,s)}n=n.child}return n;case 26:return mu(t,n),t===null?(s=Qp(n.type,null,n.pendingProps,null))?n.memoizedState=s:Bt||(s=n.type,t=n.pendingProps,l=Du(vt.current).createElement(s),l[be]=n,l[ge]=t,ke(l,s,t),ce(l),n.stateNode=l):n.memoizedState=Qp(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return zn(n),t===null&&Bt&&(l=n.stateNode=Gp(n.type,n.pendingProps,vt.current),en=n,Zn=!0,c=le,ls(n.type)?(Tf=c,le=Un(l.firstChild)):le=c),ze(t,n,n.pendingProps.children,s),mu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Bt&&((c=l=le)&&(l=KE(l,n.type,n.pendingProps,Zn),l!==null?(n.stateNode=l,en=n,le=Un(l.firstChild),Zn=!1,c=!0):c=!1),c||nr(n)),zn(n),c=n.type,f=n.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,yf(c,f)?l=null:_!==null&&yf(c,_)&&(n.flags|=32),n.memoizedState!==null&&(c=gh(t,n,fE,null,null,s),Pl._currentValue=c),mu(t,n),ze(t,n,l,s),n.child;case 6:return t===null&&Bt&&((t=s=le)&&(s=XE(s,n.pendingProps,Zn),s!==null?(n.stateNode=s,en=n,le=null,t=!0):t=!1),t||nr(n)),null;case 13:return Bg(t,n,s);case 4:return gt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Wr(n,null,l,s):ze(t,n,l,s),n.child;case 11:return Og(t,n,n.type,n.pendingProps,s);case 7:return ze(t,n,n.pendingProps,s),n.child;case 8:return ze(t,n,n.pendingProps.children,s),n.child;case 12:return ze(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,Yi(n,n.type,l.value),ze(t,n,l.children,s),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,sr(n),c=Ye(c),l=l(c),n.flags|=1,ze(t,n,l,s),n.child;case 14:return Vg(t,n,n.type,n.pendingProps,s);case 15:return Mg(t,n,n.type,n.pendingProps,s);case 19:return qg(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=gu(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Ai(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return Lg(t,n,s);case 24:return sr(n),l=Ye(we),t===null?(c=ah(),c===null&&(c=Wt,f=sh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=s),c=f),n.memoizedState={parent:l,cache:c},oh(n),Yi(n,we,c)):((t.lanes&s)!==0&&(uh(t,n),gl(n,null,null,s),ml()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Yi(n,we,l)):(l=f.cache,Yi(n,we,l),l!==c.cache&&ih(n,[we],s,!0))),ze(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Ni(t){t.flags|=4}function Gg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Jp(n)){if(n=wn.current,n!==null&&((Lt&4194048)===Lt?Jn!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||n!==Jn))throw fl=lh,Cm;t.flags|=8192}}function pu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?za():536870912,t.lanes|=n,ia|=n)}function Al(t,n){if(!Bt)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function se(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function TE(t,n,s){var l=n.pendingProps;switch(Wc(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(n),null;case 1:return se(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),wi(we),ue(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(rl(n)?Ni(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Am())),se(n),null;case 26:return s=n.memoizedState,t===null?(Ni(n),s!==null?(se(n),Gg(n,s)):(se(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Ni(n),se(n),Gg(n,s)):(se(n),n.flags&=-16777217):(t.memoizedProps!==l&&Ni(n),se(n),n.flags&=-16777217),null;case 27:ui(n),s=vt.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Ni(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return se(n),null}t=ft.current,rl(n)?Em(n):(t=Gp(c,l,s),n.stateNode=t,Ni(n))}return se(n),null;case 5:if(ui(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Ni(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return se(n),null}if(t=ft.current,rl(n))Em(n);else{switch(c=Du(vt.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(s,{is:l.is}):c.createElement(s)}}t[be]=n,t[ge]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(ke(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Ni(n)}}return se(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Ni(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=vt.current,rl(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,c=en,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[be]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Pp(t.nodeValue,s)),t||nr(n)}else t=Du(t).createTextNode(l),t[be]=n,n.stateNode=t}return se(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=rl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[be]=n}else al(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;se(n),c=!1}else c=Am(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(xi(n),n):(xi(n),null)}if(xi(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),pu(n,n.updateQueue),se(n),null;case 4:return ue(),t===null&&ff(n.stateNode.containerInfo),se(n),null;case 10:return wi(n.type),se(n),null;case 19:if(it(Ce),c=n.memoizedState,c===null)return se(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)Al(c,!1);else{if(oe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=hu(t),f!==null){for(n.flags|=128,Al(c,!1),t=f.updateQueue,n.updateQueue=t,pu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)_m(s,t),s=s.sibling;return W(Ce,Ce.current&1|2),n.child}t=t.sibling}c.tail!==null&&pn()>vu&&(n.flags|=128,l=!0,Al(c,!1),n.lanes=4194304)}else{if(!l)if(t=hu(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,pu(n,t),Al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Bt)return se(n),null}else 2*pn()-c.renderingStartTime>vu&&s!==536870912&&(n.flags|=128,l=!0,Al(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pn(),n.sibling=null,t=Ce.current,W(Ce,l?t&1|2:t&1),n):(se(n),null);case 22:case 23:return xi(n),dh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(se(n),n.subtreeFlags&6&&(n.flags|=8192)):se(n),s=n.updateQueue,s!==null&&pu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&it(rr),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),wi(we),se(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function AE(t,n){switch(Wc(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return wi(we),ue(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return ui(n),null;case 13:if(xi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));al()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return it(Ce),null;case 4:return ue(),null;case 10:return wi(n.type),null;case 22:case 23:return xi(n),dh(),t!==null&&it(rr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return wi(we),null;case 25:return null;default:return null}}function Fg(t,n){switch(Wc(n),n.tag){case 3:wi(we),ue();break;case 26:case 27:case 5:ui(n);break;case 4:ue();break;case 13:xi(n);break;case 19:it(Ce);break;case 10:wi(n.type);break;case 22:case 23:xi(n),dh(),t!==null&&it(rr);break;case 24:wi(we)}}function bl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&t)===t){l=void 0;var f=s.create,_=s.inst;l=f(),_.destroy=l}s=s.next}while(s!==c)}}catch(E){$t(n,n.return,E)}}function Wi(t,n,s){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,c=n;var R=s,z=E;try{z()}catch(Y){$t(c,R,Y)}}}l=l.next}while(l!==f)}}catch(Y){$t(n,n.return,Y)}}function Yg(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{Vm(n,s)}catch(l){$t(t,t.return,l)}}}function Qg(t,n,s){s.props=lr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){$t(t,n,l)}}function Sl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(c){$t(t,n,c)}}function Wn(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){$t(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){$t(t,n,c)}else s.current=null}function Kg(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){$t(t,t.return,c)}}function kh(t,n,s){try{var l=t.stateNode;HE(l,t.type,s,n),l[ge]=n}catch(c){$t(t,t.return,c)}}function Xg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ls(t.type)||t.tag===4}function qh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Xg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ls(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hh(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=xu));else if(l!==4&&(l===27&&ls(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Hh(t,n,s),t=t.sibling;t!==null;)Hh(t,n,s),t=t.sibling}function yu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&ls(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(yu(t,n,s),t=t.sibling;t!==null;)yu(t,n,s),t=t.sibling}function $g(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);ke(n,l,s),n[be]=t,n[ge]=s}catch(f){$t(t,t.return,f)}}var Ii=!1,fe=!1,Gh=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function bE(t,n){if(t=t.containerInfo,gf=Lu,t=om(t),qc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break t}var _=0,E=-1,R=-1,z=0,Y=0,X=t,k=null;e:for(;;){for(var q;X!==s||c!==0&&X.nodeType!==3||(E=_+c),X!==f||l!==0&&X.nodeType!==3||(R=_+l),X.nodeType===3&&(_+=X.nodeValue.length),(q=X.firstChild)!==null;)k=X,X=q;for(;;){if(X===t)break e;if(k===s&&++z===c&&(E=_),k===f&&++Y===l&&(R=_),(q=X.nextSibling)!==null)break;X=k,k=X.parentNode}X=q}s=E===-1||R===-1?null:{start:E,end:R}}else s=null}s=s||{start:0,end:0}}else s=null;for(pf={focusedElem:t,selectionRange:s},Lu=!1,Oe=n;Oe!==null;)if(n=Oe,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Oe=t;else for(;Oe!==null;){switch(n=Oe,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=n,c=f.memoizedProps,f=f.memoizedState,l=s.stateNode;try{var Et=lr(s.type,c,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Et,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(pt){$t(s,s.return,pt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)vf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,Oe=t;break}Oe=n.return}}function Jg(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ts(t,s),l&4&&bl(5,s);break;case 1:if(ts(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(_){$t(s,s.return,_)}else{var c=lr(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){$t(s,s.return,_)}}l&64&&Yg(s),l&512&&Sl(s,s.return);break;case 3:if(ts(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Vm(t,n)}catch(_){$t(s,s.return,_)}}break;case 27:n===null&&l&4&&$g(s);case 26:case 5:ts(t,s),n===null&&l&4&&Kg(s),l&512&&Sl(s,s.return);break;case 12:ts(t,s);break;case 13:ts(t,s),l&4&&ep(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=OE.bind(null,s),$E(t,s))));break;case 22:if(l=s.memoizedState!==null||Ii,!l){n=n!==null&&n.memoizedState!==null||fe,c=Ii;var f=fe;Ii=l,(fe=n)&&!f?es(t,s,(s.subtreeFlags&8772)!==0):ts(t,s),Ii=c,fe=f}break;case 30:break;default:ts(t,s)}}function Wg(t){var n=t.alternate;n!==null&&(t.alternate=null,Wg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&qi(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ie=null,sn=!1;function Oi(t,n,s){for(s=s.child;s!==null;)tp(t,n,s),s=s.sibling}function tp(t,n,s){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ae,s)}catch{}switch(s.tag){case 26:fe||Wn(s,n),Oi(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:fe||Wn(s,n);var l=ie,c=sn;ls(s.type)&&(ie=s.stateNode,sn=!1),Oi(t,n,s),Vl(s.stateNode),ie=l,sn=c;break;case 5:fe||Wn(s,n);case 6:if(l=ie,c=sn,ie=null,Oi(t,n,s),ie=l,sn=c,ie!==null)if(sn)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(s.stateNode)}catch(f){$t(s,n,f)}else try{ie.removeChild(s.stateNode)}catch(f){$t(s,n,f)}break;case 18:ie!==null&&(sn?(t=ie,qp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),kl(t)):qp(ie,s.stateNode));break;case 4:l=ie,c=sn,ie=s.stateNode.containerInfo,sn=!0,Oi(t,n,s),ie=l,sn=c;break;case 0:case 11:case 14:case 15:fe||Wi(2,s,n),fe||Wi(4,s,n),Oi(t,n,s);break;case 1:fe||(Wn(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Qg(s,n,l)),Oi(t,n,s);break;case 21:Oi(t,n,s);break;case 22:fe=(l=fe)||s.memoizedState!==null,Oi(t,n,s),fe=l;break;default:Oi(t,n,s)}}function ep(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(s){$t(n,n.return,s)}}function SE(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Zg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Zg),n;default:throw Error(a(435,t.tag))}}function Fh(t,n){var s=SE(t);n.forEach(function(l){var c=VE.bind(null,t,l);s.has(l)||(s.add(l),l.then(c,c))})}function hn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],f=t,_=n,E=_;t:for(;E!==null;){switch(E.tag){case 27:if(ls(E.type)){ie=E.stateNode,sn=!1;break t}break;case 5:ie=E.stateNode,sn=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,sn=!0;break t}E=E.return}if(ie===null)throw Error(a(160));tp(f,_,c),ie=null,sn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)np(n,t),n=n.sibling}var Ln=null;function np(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(n,t),fn(t),l&4&&(Wi(3,t,t.return),bl(3,t),Wi(5,t,t.return));break;case 1:hn(n,t),fn(t),l&512&&(fe||s===null||Wn(s,s.return)),l&64&&Ii&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=Ln;if(hn(n,t),fn(t),l&512&&(fe||s===null||Wn(s,s.return)),l&4){var f=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Us]||f[be]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),ke(f,l,s),f[be]=t,ce(f),l=f;break t;case"link":var _=$p("link","href",c).get(l+(s.href||""));if(_){for(var E=0;E<_.length;E++)if(f=_[E],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(E,1);break e}}f=c.createElement(l),ke(f,l,s),c.head.appendChild(f);break;case"meta":if(_=$p("meta","content",c).get(l+(s.content||""))){for(E=0;E<_.length;E++)if(f=_[E],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(E,1);break e}}f=c.createElement(l),ke(f,l,s),c.head.appendChild(f);break;default:throw Error(a(468,l))}f[be]=t,ce(f),l=f}t.stateNode=l}else Zp(c,t.type,t.stateNode);else t.stateNode=Xp(c,l,t.memoizedProps);else f!==l?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,l===null?Zp(c,t.type,t.stateNode):Xp(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&kh(t,t.memoizedProps,s.memoizedProps)}break;case 27:hn(n,t),fn(t),l&512&&(fe||s===null||Wn(s,s.return)),s!==null&&l&4&&kh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(hn(n,t),fn(t),l&512&&(fe||s===null||Wn(s,s.return)),t.flags&32){c=t.stateNode;try{_n(c,"")}catch(q){$t(t,t.return,q)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,kh(t,c,s!==null?s.memoizedProps:c)),l&1024&&(Gh=!0);break;case 6:if(hn(n,t),fn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(q){$t(t,t.return,q)}}break;case 3:if(Ou=null,c=Ln,Ln=Nu(n.containerInfo),hn(n,t),Ln=c,fn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{kl(n.containerInfo)}catch(q){$t(t,t.return,q)}Gh&&(Gh=!1,ip(t));break;case 4:l=Ln,Ln=Nu(t.stateNode.containerInfo),hn(n,t),fn(t),Ln=l;break;case 12:hn(n,t),fn(t);break;case 13:hn(n,t),fn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Zh=pn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Fh(t,l)));break;case 22:c=t.memoizedState!==null;var R=s!==null&&s.memoizedState!==null,z=Ii,Y=fe;if(Ii=z||c,fe=Y||R,hn(n,t),fe=Y,Ii=z,fn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(s===null||R||Ii||fe||or(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){R=s=n;try{if(f=R.stateNode,c)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=R.stateNode;var X=R.memoizedProps.style,k=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(q){$t(R,R.return,q)}}}else if(n.tag===6){if(s===null){R=n;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(q){$t(R,R.return,q)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Fh(t,s))));break;case 19:hn(n,t),fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Fh(t,l)));break;case 30:break;case 21:break;default:hn(n,t),fn(t)}}function fn(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Xg(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,f=qh(t);yu(t,f,c);break;case 5:var _=s.stateNode;s.flags&32&&(_n(_,""),s.flags&=-33);var E=qh(t);yu(t,E,_);break;case 3:case 4:var R=s.stateNode.containerInfo,z=qh(t);Hh(t,z,R);break;default:throw Error(a(161))}}catch(Y){$t(t,t.return,Y)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function ip(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;ip(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ts(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jg(t,n.alternate,n),n=n.sibling}function or(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Wi(4,n,n.return),or(n);break;case 1:Wn(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Qg(n,n.return,s),or(n);break;case 27:Vl(n.stateNode);case 26:case 5:Wn(n,n.return),or(n);break;case 22:n.memoizedState===null&&or(n);break;case 30:or(n);break;default:or(n)}t=t.sibling}}function es(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,_=f.flags;switch(f.tag){case 0:case 11:case 15:es(c,f,s),bl(4,f);break;case 1:if(es(c,f,s),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(z){$t(l,l.return,z)}if(l=f,c=l.updateQueue,c!==null){var E=l.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)Om(R[c],E)}catch(z){$t(l,l.return,z)}}s&&_&64&&Yg(f),Sl(f,f.return);break;case 27:$g(f);case 26:case 5:es(c,f,s),s&&l===null&&_&4&&Kg(f),Sl(f,f.return);break;case 12:es(c,f,s);break;case 13:es(c,f,s),s&&_&4&&ep(c,f);break;case 22:f.memoizedState===null&&es(c,f,s),Sl(f,f.return);break;case 30:break;default:es(c,f,s)}n=n.sibling}}function Yh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&ul(s))}function Qh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ul(t))}function ti(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sp(t,n,s,l),n=n.sibling}function sp(t,n,s,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ti(t,n,s,l),c&2048&&bl(9,n);break;case 1:ti(t,n,s,l);break;case 3:ti(t,n,s,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ul(t)));break;case 12:if(c&2048){ti(t,n,s,l),t=n.stateNode;try{var f=n.memoizedProps,_=f.id,E=f.onPostCommit;typeof E=="function"&&E(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){$t(n,n.return,R)}}else ti(t,n,s,l);break;case 13:ti(t,n,s,l);break;case 23:break;case 22:f=n.stateNode,_=n.alternate,n.memoizedState!==null?f._visibility&2?ti(t,n,s,l):Rl(t,n):f._visibility&2?ti(t,n,s,l):(f._visibility|=2,ta(t,n,s,l,(n.subtreeFlags&10256)!==0)),c&2048&&Yh(_,n);break;case 24:ti(t,n,s,l),c&2048&&Qh(n.alternate,n);break;default:ti(t,n,s,l)}}function ta(t,n,s,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,_=n,E=s,R=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:ta(f,_,E,R,c),bl(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?ta(f,_,E,R,c):Rl(f,_):(Y._visibility|=2,ta(f,_,E,R,c)),c&&z&2048&&Yh(_.alternate,_);break;case 24:ta(f,_,E,R,c),c&&z&2048&&Qh(_.alternate,_);break;default:ta(f,_,E,R,c)}n=n.sibling}}function Rl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,c=l.flags;switch(l.tag){case 22:Rl(s,l),c&2048&&Yh(l.alternate,l);break;case 24:Rl(s,l),c&2048&&Qh(l.alternate,l);break;default:Rl(s,l)}n=n.sibling}}var wl=8192;function ea(t){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)rp(t),t=t.sibling}function rp(t){switch(t.tag){case 26:ea(t),t.flags&wl&&t.memoizedState!==null&&uT(Ln,t.memoizedState,t.memoizedProps);break;case 5:ea(t);break;case 3:case 4:var n=Ln;Ln=Nu(t.stateNode.containerInfo),ea(t),Ln=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=wl,wl=16777216,ea(t),wl=n):ea(t));break;default:ea(t)}}function ap(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Cl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Oe=l,op(l,t)}ap(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lp(t),t=t.sibling}function lp(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Wi(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,_u(t)):Cl(t);break;default:Cl(t)}}function _u(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Oe=l,op(l,t)}ap(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Wi(8,n,n.return),_u(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,_u(n));break;default:_u(n)}t=t.sibling}}function op(t,n){for(;Oe!==null;){var s=Oe;switch(s.tag){case 0:case 11:case 15:Wi(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ul(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Oe=l;else t:for(s=t;Oe!==null;){l=Oe;var c=l.sibling,f=l.return;if(Wg(l),l===s){Oe=null;break t}if(c!==null){c.return=f,Oe=c;break t}Oe=f}}}var RE={getCacheForType:function(t){var n=Ye(we),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},wE=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Wt=null,Nt=null,Lt=0,Ft=0,dn=null,ns=!1,na=!1,Kh=!1,Vi=0,oe=0,is=0,ur=0,Xh=0,Cn=0,ia=0,xl=null,rn=null,$h=!1,Zh=0,vu=1/0,Eu=null,ss=null,Be=0,rs=null,sa=null,ra=0,Jh=0,Wh=null,up=null,Dl=0,tf=null;function mn(){if((Gt&2)!==0&&Lt!==0)return Lt&-Lt;if(F.T!==null){var t=Yr;return t!==0?t:of()}return Bi()}function cp(){Cn===0&&(Cn=(Lt&536870912)===0||Bt?ja():536870912);var t=wn.current;return t!==null&&(t.flags|=32),Cn}function gn(t,n,s){(t===Wt&&(Ft===2||Ft===9)||t.cancelPendingCommit!==null)&&(aa(t,0),as(t,Lt,Cn,!1)),hi(t,s),((Gt&2)===0||t!==Wt)&&(t===Wt&&((Gt&2)===0&&(ur|=s),oe===4&&as(t,Lt,Cn,!1)),ei(t))}function hp(t,n,s){if((Gt&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||Ls(t,n),c=l?DE(t,n):sf(t,n,!0),f=l;do{if(c===0){na&&!l&&as(t,n,0,!1);break}else{if(s=t.current.alternate,f&&!CE(s)){c=sf(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var E=t;c=xl;var R=E.current.memoizedState.isDehydrated;if(R&&(aa(E,_).flags|=256),_=sf(E,_,!1),_!==2){if(Kh&&!R){E.errorRecoveryDisabledLanes|=f,ur|=f,c=4;break t}f=rn,rn=c,f!==null&&(rn===null?rn=f:rn.push.apply(rn,f))}c=_}if(f=!1,c!==2)continue}}if(c===1){aa(t,0),as(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:as(l,n,Cn,!ns);break t;case 2:rn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=Zh+300-pn(),10<c)){if(as(l,n,Cn,!ns),br(l,0,!0)!==0)break t;l.timeoutHandle=Bp(fp.bind(null,l,s,rn,Eu,$h,n,Cn,ur,ia,ns,f,2,-0,0),c);break t}fp(l,s,rn,Eu,$h,n,Cn,ur,ia,ns,f,0,-0,0)}}break}while(!0);ei(t)}function fp(t,n,s,l,c,f,_,E,R,z,Y,X,k,q){if(t.timeoutHandle=-1,X=n.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:oT},rp(n),X=cT(),X!==null)){t.cancelPendingCommit=X(vp.bind(null,t,n,f,s,l,c,_,E,R,Y,1,k,q)),as(t,f,_,!z);return}vp(t,n,f,s,l,c,_,E,R)}function CE(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],f=c.getSnapshot;c=c.value;try{if(!un(f(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function as(t,n,s,l){n&=~Xh,n&=~ur,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-Fe(c),_=1<<f;l[f]=-1,c&=~_}s!==0&&Bn(t,s,n)}function Tu(){return(Gt&6)===0?(Nl(0),!1):!0}function ef(){if(Nt!==null){if(Ft===0)var t=Nt.return;else t=Nt,Ri=ir=null,_h(t),Jr=null,El=0,t=Nt;for(;t!==null;)Fg(t.alternate,t),t=t.return;Nt=null}}function aa(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,FE(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),ef(),Wt=t,Nt=s=Ai(t.current,null),Lt=n,Ft=0,dn=null,ns=!1,na=Ls(t,n),Kh=!1,ia=Cn=Xh=ur=is=oe=0,rn=xl=null,$h=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-Fe(l),f=1<<c;n|=t[c],l&=~f}return Vi=n,Ho(),s}function dp(t,n){Ct=null,F.H=ou,n===hl||n===Jo?(n=Nm(),Ft=3):n===Cm?(n=Nm(),Ft=4):Ft=n===Ig?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,dn=n,Nt===null&&(oe=1,du(t,An(n,t.current)))}function mp(){var t=F.H;return F.H=ou,t===null?ou:t}function gp(){var t=F.A;return F.A=RE,t}function nf(){oe=4,ns||(Lt&4194048)!==Lt&&wn.current!==null||(na=!0),(is&134217727)===0&&(ur&134217727)===0||Wt===null||as(Wt,Lt,Cn,!1)}function sf(t,n,s){var l=Gt;Gt|=2;var c=mp(),f=gp();(Wt!==t||Lt!==n)&&(Eu=null,aa(t,n)),n=!1;var _=oe;t:do try{if(Ft!==0&&Nt!==null){var E=Nt,R=dn;switch(Ft){case 8:ef(),_=6;break t;case 3:case 2:case 9:case 6:wn.current===null&&(n=!0);var z=Ft;if(Ft=0,dn=null,la(t,E,R,z),s&&na){_=0;break t}break;default:z=Ft,Ft=0,dn=null,la(t,E,R,z)}}xE(),_=oe;break}catch(Y){dp(t,Y)}while(!0);return n&&t.shellSuspendCounter++,Ri=ir=null,Gt=l,F.H=c,F.A=f,Nt===null&&(Wt=null,Lt=0,Ho()),_}function xE(){for(;Nt!==null;)pp(Nt)}function DE(t,n){var s=Gt;Gt|=2;var l=mp(),c=gp();Wt!==t||Lt!==n?(Eu=null,vu=pn()+500,aa(t,n)):na=Ls(t,n);t:do try{if(Ft!==0&&Nt!==null){n=Nt;var f=dn;e:switch(Ft){case 1:Ft=0,dn=null,la(t,n,f,1);break;case 2:case 9:if(xm(f)){Ft=0,dn=null,yp(n);break}n=function(){Ft!==2&&Ft!==9||Wt!==t||(Ft=7),ei(t)},f.then(n,n);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:xm(f)?(Ft=0,dn=null,yp(n)):(Ft=0,dn=null,la(t,n,f,7));break;case 5:var _=null;switch(Nt.tag){case 26:_=Nt.memoizedState;case 5:case 27:var E=Nt;if(!_||Jp(_)){Ft=0,dn=null;var R=E.sibling;if(R!==null)Nt=R;else{var z=E.return;z!==null?(Nt=z,Au(z)):Nt=null}break e}}Ft=0,dn=null,la(t,n,f,5);break;case 6:Ft=0,dn=null,la(t,n,f,6);break;case 8:ef(),oe=6;break t;default:throw Error(a(462))}}NE();break}catch(Y){dp(t,Y)}while(!0);return Ri=ir=null,F.H=l,F.A=c,Gt=s,Nt!==null?0:(Wt=null,Lt=0,Ho(),oe)}function NE(){for(;Nt!==null&&!Ma();)pp(Nt)}function pp(t){var n=Hg(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,n===null?Au(t):Nt=n}function yp(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=Pg(s,n,n.pendingProps,n.type,void 0,Lt);break;case 11:n=Pg(s,n,n.pendingProps,n.type.render,n.ref,Lt);break;case 5:_h(n);default:Fg(s,n),n=Nt=_m(n,Vi),n=Hg(s,n,Vi)}t.memoizedProps=t.pendingProps,n===null?Au(t):Nt=n}function la(t,n,s,l){Ri=ir=null,_h(n),Jr=null,El=0;var c=n.return;try{if(vE(t,c,n,s,Lt)){oe=1,du(t,An(s,t.current)),Nt=null;return}}catch(f){if(c!==null)throw Nt=c,f;oe=1,du(t,An(s,t.current)),Nt=null;return}n.flags&32768?(Bt||l===1?t=!0:na||(Lt&536870912)!==0?t=!1:(ns=t=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),_p(n,t)):Au(n)}function Au(t){var n=t;do{if((n.flags&32768)!==0){_p(n,ns);return}t=n.return;var s=TE(n.alternate,n,Vi);if(s!==null){Nt=s;return}if(n=n.sibling,n!==null){Nt=n;return}Nt=n=t}while(n!==null);oe===0&&(oe=5)}function _p(t,n){do{var s=AE(t.alternate,t);if(s!==null){s.flags&=32767,Nt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Nt=t;return}Nt=t=s}while(t!==null);oe=6,Nt=null}function vp(t,n,s,l,c,f,_,E,R){t.cancelPendingCommit=null;do bu();while(Be!==0);if((Gt&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Qc,Ba(t,s,f,_,E,R),t===Wt&&(Nt=Wt=null,Lt=0),sa=n,rs=t,ra=s,Jh=f,Wh=c,up=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ME(Is,function(){return Sp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,c=et.p,et.p=2,_=Gt,Gt|=4;try{bE(t,n,s)}finally{Gt=_,et.p=c,F.T=l}}Be=1,Ep(),Tp(),Ap()}}function Ep(){if(Be===1){Be=0;var t=rs,n=sa,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=F.T,F.T=null;var l=et.p;et.p=2;var c=Gt;Gt|=4;try{np(n,t);var f=pf,_=om(t.containerInfo),E=f.focusedElem,R=f.selectionRange;if(_!==E&&E&&E.ownerDocument&&lm(E.ownerDocument.documentElement,E)){if(R!==null&&qc(E)){var z=R.start,Y=R.end;if(Y===void 0&&(Y=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(Y,E.value.length);else{var X=E.ownerDocument||document,k=X&&X.defaultView||window;if(k.getSelection){var q=k.getSelection(),Et=E.textContent.length,pt=Math.min(R.start,Et),Xt=R.end===void 0?pt:Math.min(R.end,Et);!q.extend&&pt>Xt&&(_=Xt,Xt=pt,pt=_);var U=am(E,pt),N=am(E,Xt);if(U&&N&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==N.node||q.focusOffset!==N.offset)){var j=X.createRange();j.setStart(U.node,U.offset),q.removeAllRanges(),pt>Xt?(q.addRange(j),q.extend(N.node,N.offset)):(j.setEnd(N.node,N.offset),q.addRange(j))}}}}for(X=[],q=E;q=q.parentNode;)q.nodeType===1&&X.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Q=X[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Lu=!!gf,pf=gf=null}finally{Gt=c,et.p=l,F.T=s}}t.current=n,Be=2}}function Tp(){if(Be===2){Be=0;var t=rs,n=sa,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=F.T,F.T=null;var l=et.p;et.p=2;var c=Gt;Gt|=4;try{Jg(t,n.alternate,n)}finally{Gt=c,et.p=l,F.T=s}}Be=3}}function Ap(){if(Be===4||Be===3){Be=0,_o();var t=rs,n=sa,s=ra,l=up;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Be=5:(Be=0,sa=rs=null,bp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(ss=null),Sr(s),n=n.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ae,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=F.T,c=et.p,et.p=2,F.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];f(E.value,{componentStack:E.stack})}}finally{F.T=n,et.p=c}}(ra&3)!==0&&bu(),ei(t),c=t.pendingLanes,(s&4194090)!==0&&(c&42)!==0?t===tf?Dl++:(Dl=0,tf=t):Dl=0,Nl(0)}}function bp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,ul(n)))}function bu(t){return Ep(),Tp(),Ap(),Sp()}function Sp(){if(Be!==5)return!1;var t=rs,n=Jh;Jh=0;var s=Sr(ra),l=F.T,c=et.p;try{et.p=32>s?32:s,F.T=null,s=Wh,Wh=null;var f=rs,_=ra;if(Be=0,sa=rs=null,ra=0,(Gt&6)!==0)throw Error(a(331));var E=Gt;if(Gt|=4,lp(f.current),sp(f,f.current,_,s),Gt=E,Nl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ae,f)}catch{}return!0}finally{et.p=c,F.T=l,bp(t,n)}}function Rp(t,n,s){n=An(s,n),n=Oh(t.stateNode,n,2),t=Xi(t,n,2),t!==null&&(hi(t,2),ei(t))}function $t(t,n,s){if(t.tag===3)Rp(t,t,s);else for(;n!==null;){if(n.tag===3){Rp(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ss===null||!ss.has(l))){t=An(s,t),s=Dg(2),l=Xi(n,s,2),l!==null&&(Ng(s,l,n,t),hi(l,2),ei(l));break}}n=n.return}}function rf(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new wE;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(Kh=!0,c.add(s),t=IE.bind(null,t,n,s),n.then(t,t))}function IE(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Wt===t&&(Lt&s)===s&&(oe===4||oe===3&&(Lt&62914560)===Lt&&300>pn()-Zh?(Gt&2)===0&&aa(t,0):Xh|=s,ia===Lt&&(ia=0)),ei(t)}function wp(t,n){n===0&&(n=za()),t=qr(t,n),t!==null&&(hi(t,n),ei(t))}function OE(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),wp(t,s)}function VE(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),wp(t,s)}function ME(t,n){return Ds(t,n)}var Su=null,oa=null,af=!1,Ru=!1,lf=!1,cr=0;function ei(t){t!==oa&&t.next===null&&(oa===null?Su=oa=t:oa=oa.next=t),Ru=!0,af||(af=!0,UE())}function Nl(t,n){if(!lf&&Ru){lf=!0;do for(var s=!1,l=Su;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var _=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-Fe(42|t)+1)-1,f&=c&~(_&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,Np(l,f))}else f=Lt,f=br(l,l===Wt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ls(l,f)||(s=!0,Np(l,f));l=l.next}while(s);lf=!1}}function LE(){Cp()}function Cp(){Ru=af=!1;var t=0;cr!==0&&(GE()&&(t=cr),cr=0);for(var n=pn(),s=null,l=Su;l!==null;){var c=l.next,f=xp(l,n);f===0?(l.next=null,s===null?Su=c:s.next=c,c===null&&(oa=s)):(s=l,(t!==0||(f&3)!==0)&&(Ru=!0)),l=c}Nl(t)}function xp(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Fe(f),E=1<<_,R=c[_];R===-1?((E&s)===0||(E&l)!==0)&&(c[_]=Pa(E,n)):R<=n&&(t.expiredLanes|=E),f&=~E}if(n=Wt,s=Lt,s=br(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(Ft===2||Ft===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ns(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Ls(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&Ns(l),Sr(s)){case 2:case 8:s=Tr;break;case 32:s=Is;break;case 268435456:s=Ar;break;default:s=Is}return l=Dp.bind(null,t),s=Ds(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&Ns(l),t.callbackPriority=2,t.callbackNode=null,2}function Dp(t,n){if(Be!==0&&Be!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(bu()&&t.callbackNode!==s)return null;var l=Lt;return l=br(t,t===Wt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(hp(t,l,n),xp(t,pn()),t.callbackNode!=null&&t.callbackNode===s?Dp.bind(null,t):null)}function Np(t,n){if(bu())return null;hp(t,n,!0)}function UE(){YE(function(){(Gt&6)!==0?Ds(La,LE):Cp()})}function of(){return cr===0&&(cr=ja()),cr}function Ip(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Nr(""+t)}function Op(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function PE(t,n,s,l,c){if(n==="submit"&&s&&s.stateNode===c){var f=Ip((c[ge]||null).action),_=l.submitter;_&&(n=(n=_[ge]||null)?Ip(n.formAction):_.getAttribute("formAction"),n!==null&&(f=n,_=null));var E=new Ir("action","action",null,l,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(cr!==0){var R=_?Op(c,_):new FormData(c);Ch(s,{pending:!0,data:R,method:c.method,action:f},null,R)}}else typeof f=="function"&&(E.preventDefault(),R=_?Op(c,_):new FormData(c),Ch(s,{pending:!0,data:R,method:c.method,action:f},f,R))},currentTarget:c}]})}}for(var uf=0;uf<Yc.length;uf++){var cf=Yc[uf],jE=cf.toLowerCase(),zE=cf[0].toUpperCase()+cf.slice(1);Mn(jE,"on"+zE)}Mn(hm,"onAnimationEnd"),Mn(fm,"onAnimationIteration"),Mn(dm,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(nE,"onTransitionRun"),Mn(iE,"onTransitionStart"),Mn(sE,"onTransitionCancel"),Mn(mm,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),On("onBeforeInput",["compositionend","keypress","textInput","paste"]),On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function Vp(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var _=l.length-1;0<=_;_--){var E=l[_],R=E.instance,z=E.currentTarget;if(E=E.listener,R!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=z;try{f(c)}catch(Y){fu(Y)}c.currentTarget=null,f=R}else for(_=0;_<l.length;_++){if(E=l[_],R=E.instance,z=E.currentTarget,E=E.listener,R!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=z;try{f(c)}catch(Y){fu(Y)}c.currentTarget=null,f=R}}}}function It(t,n){var s=n[qa];s===void 0&&(s=n[qa]=new Set);var l=t+"__bubble";s.has(l)||(Mp(n,t,2,!1),s.add(l))}function hf(t,n,s){var l=0;n&&(l|=4),Mp(s,t,l,n)}var wu="_reactListening"+Math.random().toString(36).slice(2);function ff(t){if(!t[wu]){t[wu]=!0,Ha.forEach(function(s){s!=="selectionchange"&&(BE.has(s)||hf(s,!1,t),hf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[wu]||(n[wu]=!0,hf("selectionchange",!1,n))}}function Mp(t,n,s,l){switch(sy(n)){case 2:var c=dT;break;case 8:c=mT;break;default:c=wf}s=c.bind(null,n,s,t),c=void 0,!En||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function df(t,n,s,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===c)break;if(_===4)for(_=l.return;_!==null;){var R=_.tag;if((R===3||R===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;E!==null;){if(_=fi(E),_===null)return;if(R=_.tag,R===5||R===6||R===26||R===27){l=f=_;continue t}E=E.parentNode}}l=l.return}xo(function(){var z=f,Y=vn(s),X=[];t:{var k=gm.get(t);if(k!==void 0){var q=Ir,Et=t;switch(t){case"keypress":if(Yn(s)===0)break t;case"keydown":case"keyup":q=Pr;break;case"focusin":Et="focus",q=Mr;break;case"focusout":Et="blur",q=Mr;break;case"beforeblur":case"afterblur":q=Mr;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Uo;break;case hm:case fm:case dm:q=Lr;break;case mm:q=jo;break;case"scroll":case"scrollend":q=Do;break;case"wheel":q=jr;break;case"copy":case"cut":case"paste":q=Ur;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=el;break;case"toggle":case"beforetoggle":q=Bo}var pt=(n&4)!==0,Xt=!pt&&(t==="scroll"||t==="scrollend"),U=pt?k!==null?k+"Capture":null:k;pt=[];for(var N=z,j;N!==null;){var Q=N;if(j=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||j===null||U===null||(Q=Hs(N,U),Q!=null&&pt.push(Ol(N,Q,j))),Xt)break;N=N.return}0<pt.length&&(k=new q(k,Et,null,s,Y),X.push({event:k,listeners:pt}))}}if((n&7)===0){t:{if(k=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",k&&s!==pi&&(Et=s.relatedTarget||s.fromElement)&&(fi(Et)||Et[yn]))break t;if((q||k)&&(k=Y.window===Y?Y:(k=Y.ownerDocument)?k.defaultView||k.parentWindow:window,q?(Et=s.relatedTarget||s.toElement,q=z,Et=Et?fi(Et):null,Et!==null&&(Xt=h(Et),pt=Et.tag,Et!==Xt||pt!==5&&pt!==27&&pt!==6)&&(Et=null)):(q=null,Et=z),q!==Et)){if(pt=Tn,Q="onMouseLeave",U="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(pt=el,Q="onPointerLeave",U="onPointerEnter",N="pointer"),Xt=q==null?k:qn(q),j=Et==null?k:qn(Et),k=new pt(Q,N+"leave",q,s,Y),k.target=Xt,k.relatedTarget=j,Q=null,fi(Y)===z&&(pt=new pt(U,N+"enter",Et,s,Y),pt.target=j,pt.relatedTarget=Xt,Q=pt),Xt=Q,q&&Et)e:{for(pt=q,U=Et,N=0,j=pt;j;j=ua(j))N++;for(j=0,Q=U;Q;Q=ua(Q))j++;for(;0<N-j;)pt=ua(pt),N--;for(;0<j-N;)U=ua(U),j--;for(;N--;){if(pt===U||U!==null&&pt===U.alternate)break e;pt=ua(pt),U=ua(U)}pt=null}else pt=null;q!==null&&Lp(X,k,q,pt,!1),Et!==null&&Xt!==null&&Lp(X,Xt,Et,pt,!0)}}t:{if(k=z?qn(z):window,q=k.nodeName&&k.nodeName.toLowerCase(),q==="select"||q==="input"&&k.type==="file")var lt=tm;else if(Re(k))if(em)lt=W0;else{lt=Z0;var Dt=$0}else q=k.nodeName,!q||q.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?z&&Ka(z.elementType)&&(lt=tm):lt=J0;if(lt&&(lt=lt(t,z))){Ti(X,lt,s,Y);break t}Dt&&Dt(t,k,z),t==="focusout"&&z&&k.type==="number"&&z.memoizedProps.value!=null&&Gi(k,"number",k.value)}switch(Dt=z?qn(z):window,t){case"focusin":(Re(Dt)||Dt.contentEditable==="true")&&(zr=Dt,Hc=z,sl=null);break;case"focusout":sl=Hc=zr=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,um(X,s,Y);break;case"selectionchange":if(eE)break;case"keydown":case"keyup":um(X,s,Y)}var ct;if(Xn)t:{switch(t){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else Vt?H(t,s)&&(yt="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(yt="onCompositionStart");yt&&(p&&s.locale!=="ko"&&(Vt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Vt&&(ct=$a()):(Fn=Y,Fi="value"in Fn?Fn.value:Fn.textContent,Vt=!0)),Dt=Cu(z,yt),0<Dt.length&&(yt=new Wa(yt,t,null,s,Y),X.push({event:yt,listeners:Dt}),ct?yt.data=ct:(ct=nt(s),ct!==null&&(yt.data=ct)))),(ct=m?Se(t,s):Mt(t,s))&&(yt=Cu(z,"onBeforeInput"),0<yt.length&&(Dt=new Wa("onBeforeInput","beforeinput",null,s,Y),X.push({event:Dt,listeners:yt}),Dt.data=ct)),PE(X,t,z,s,Y)}Vp(X,n)})}function Ol(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Cu(t,n){for(var s=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Hs(t,s),c!=null&&l.unshift(Ol(t,c,f)),c=Hs(t,n),c!=null&&l.push(Ol(t,c,f))),t.tag===3)return l;t=t.return}return[]}function ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Lp(t,n,s,l,c){for(var f=n._reactName,_=[];s!==null&&s!==l;){var E=s,R=E.alternate,z=E.stateNode;if(E=E.tag,R!==null&&R===l)break;E!==5&&E!==26&&E!==27||z===null||(R=z,c?(z=Hs(s,f),z!=null&&_.unshift(Ol(s,z,R))):c||(z=Hs(s,f),z!=null&&_.push(Ol(s,z,R)))),s=s.return}_.length!==0&&t.push({event:n,listeners:_})}var kE=/\r\n?/g,qE=/\u0000|\uFFFD/g;function Up(t){return(typeof t=="string"?t:""+t).replace(kE,`
`).replace(qE,"")}function Pp(t,n){return n=Up(n),Up(t)===n}function xu(){}function Kt(t,n,s,l,c,f){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||_n(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&_n(t,""+l);break;case"className":Hn(t,"class",l);break;case"tabIndex":Hn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,s,l);break;case"style":Qa(t,l,f);break;case"data":if(n!=="object"){Hn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Nr(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(n!=="input"&&Kt(t,n,"name",c.name,c,null),Kt(t,n,"formEncType",c.formEncType,c,null),Kt(t,n,"formMethod",c.formMethod,c,null),Kt(t,n,"formTarget",c.formTarget,c,null)):(Kt(t,n,"encType",c.encType,c,null),Kt(t,n,"method",c.method,c,null),Kt(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Nr(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=xu);break;case"onScroll":l!=null&&It("scroll",t);break;case"onScrollEnd":l!=null&&It("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Nr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":It("beforetoggle",t),It("toggle",t),Hi(t,"popover",l);break;case"xlinkActuate":Pe(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pe(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pe(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pe(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pe(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pe(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pe(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Hi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Uc.get(s)||s,Hi(t,s,l))}}function mf(t,n,s,l,c,f){switch(s){case"style":Qa(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?_n(t,l):(typeof l=="number"||typeof l=="bigint")&&_n(t,""+l);break;case"onScroll":l!=null&&It("scroll",t);break;case"onScrollEnd":l!=null&&It("scrollend",t);break;case"onClick":l!=null&&(t.onclick=xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),f=t[ge]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,c);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Hi(t,s,l)}}}function ke(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",t),It("load",t);var l=!1,c=!1,f;for(f in s)if(s.hasOwnProperty(f)){var _=s[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Kt(t,n,f,_,s,null)}}c&&Kt(t,n,"srcSet",s.srcSet,s,null),l&&Kt(t,n,"src",s.src,s,null);return;case"input":It("invalid",t);var E=f=_=c=null,R=null,z=null;for(l in s)if(s.hasOwnProperty(l)){var Y=s[l];if(Y!=null)switch(l){case"name":c=Y;break;case"type":_=Y;break;case"checked":R=Y;break;case"defaultChecked":z=Y;break;case"value":f=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,n));break;default:Kt(t,n,l,Y,s,null)}}Bs(t,f,E,R,z,_,c,!1),Dr(t);return;case"select":It("invalid",t),l=_=f=null;for(c in s)if(s.hasOwnProperty(c)&&(E=s[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:Kt(t,n,c,E,s,null)}n=f,s=_,t.multiple=!!l,n!=null?gi(t,!!l,n,!1):s!=null&&gi(t,!!l,s,!0);return;case"textarea":It("invalid",t),f=c=l=null;for(_ in s)if(s.hasOwnProperty(_)&&(E=s[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:Kt(t,n,_,E,s,null)}ks(t,l,c,f),Dr(t);return;case"option":for(R in s)if(s.hasOwnProperty(R)&&(l=s[R],l!=null))switch(R){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Kt(t,n,R,l,s,null)}return;case"dialog":It("beforetoggle",t),It("toggle",t),It("cancel",t),It("close",t);break;case"iframe":case"object":It("load",t);break;case"video":case"audio":for(l=0;l<Il.length;l++)It(Il[l],t);break;case"image":It("error",t),It("load",t);break;case"details":It("toggle",t);break;case"embed":case"source":case"link":It("error",t),It("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in s)if(s.hasOwnProperty(z)&&(l=s[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Kt(t,n,z,l,s,null)}return;default:if(Ka(n)){for(Y in s)s.hasOwnProperty(Y)&&(l=s[Y],l!==void 0&&mf(t,n,Y,l,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(l=s[E],l!=null&&Kt(t,n,E,l,s,null))}function HE(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,_=null,E=null,R=null,z=null,Y=null;for(q in s){var X=s[q];if(s.hasOwnProperty(q)&&X!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=X;default:l.hasOwnProperty(q)||Kt(t,n,q,null,l,X)}}for(var k in l){var q=l[k];if(X=s[k],l.hasOwnProperty(k)&&(q!=null||X!=null))switch(k){case"type":f=q;break;case"name":c=q;break;case"checked":z=q;break;case"defaultChecked":Y=q;break;case"value":_=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(a(137,n));break;default:q!==X&&Kt(t,n,k,q,l,X)}}on(t,_,E,R,z,Y,f,c);return;case"select":q=_=E=k=null;for(f in s)if(R=s[f],s.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":q=R;default:l.hasOwnProperty(f)||Kt(t,n,f,null,l,R)}for(c in l)if(f=l[c],R=s[c],l.hasOwnProperty(c)&&(f!=null||R!=null))switch(c){case"value":k=f;break;case"defaultValue":E=f;break;case"multiple":_=f;default:f!==R&&Kt(t,n,c,f,l,R)}n=E,s=_,l=q,k!=null?gi(t,!!s,k,!1):!!l!=!!s&&(n!=null?gi(t,!!s,n,!0):gi(t,!!s,s?[]:"",!1));return;case"textarea":q=k=null;for(E in s)if(c=s[E],s.hasOwnProperty(E)&&c!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Kt(t,n,E,null,l,c)}for(_ in l)if(c=l[_],f=s[_],l.hasOwnProperty(_)&&(c!=null||f!=null))switch(_){case"value":k=c;break;case"defaultValue":q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==f&&Kt(t,n,_,c,l,f)}Yt(t,k,q);return;case"option":for(var Et in s)if(k=s[Et],s.hasOwnProperty(Et)&&k!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":t.selected=!1;break;default:Kt(t,n,Et,null,l,k)}for(R in l)if(k=l[R],q=s[R],l.hasOwnProperty(R)&&k!==q&&(k!=null||q!=null))switch(R){case"selected":t.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Kt(t,n,R,k,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in s)k=s[pt],s.hasOwnProperty(pt)&&k!=null&&!l.hasOwnProperty(pt)&&Kt(t,n,pt,null,l,k);for(z in l)if(k=l[z],q=s[z],l.hasOwnProperty(z)&&k!==q&&(k!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(137,n));break;default:Kt(t,n,z,k,l,q)}return;default:if(Ka(n)){for(var Xt in s)k=s[Xt],s.hasOwnProperty(Xt)&&k!==void 0&&!l.hasOwnProperty(Xt)&&mf(t,n,Xt,void 0,l,k);for(Y in l)k=l[Y],q=s[Y],!l.hasOwnProperty(Y)||k===q||k===void 0&&q===void 0||mf(t,n,Y,k,l,q);return}}for(var U in s)k=s[U],s.hasOwnProperty(U)&&k!=null&&!l.hasOwnProperty(U)&&Kt(t,n,U,null,l,k);for(X in l)k=l[X],q=s[X],!l.hasOwnProperty(X)||k===q||k==null&&q==null||Kt(t,n,X,k,l,q)}var gf=null,pf=null;function Du(t){return t.nodeType===9?t:t.ownerDocument}function jp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zp(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function yf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _f=null;function GE(){var t=window.event;return t&&t.type==="popstate"?t===_f?!1:(_f=t,!0):(_f=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,FE=typeof clearTimeout=="function"?clearTimeout:void 0,kp=typeof Promise=="function"?Promise:void 0,YE=typeof queueMicrotask=="function"?queueMicrotask:typeof kp<"u"?function(t){return kp.resolve(null).then(t).catch(QE)}:Bp;function QE(t){setTimeout(function(){throw t})}function ls(t){return t==="head"}function qp(t,n){var s=n,l=0,c=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(0<l&&8>l){s=l;var _=t.ownerDocument;if(s&1&&Vl(_.documentElement),s&2&&Vl(_.body),s&4)for(s=_.head,Vl(s),_=s.firstChild;_;){var E=_.nextSibling,R=_.nodeName;_[Us]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||s.removeChild(_),_=E}}if(c===0){t.removeChild(f),kl(n);return}c--}else s==="$"||s==="$?"||s==="$!"?c++:l=s.charCodeAt(0)-48;else l=0;s=f}while(s);kl(n)}function vf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":vf(s),qi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function KE(t,n,s,l){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Us])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Un(t.nextSibling),t===null)break}return null}function XE(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Un(t.nextSibling),t===null))return null;return t}function Ef(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function $E(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Un(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Tf=null;function Hp(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function Gp(t,n,s){switch(n=Du(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Vl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);qi(t)}var xn=new Map,Fp=new Set;function Nu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=et.d;et.d={f:ZE,r:JE,D:WE,C:tT,L:eT,m:nT,X:sT,S:iT,M:rT};function ZE(){var t=Mi.f(),n=Tu();return t||n}function JE(t){var n=kn(t);n!==null&&n.tag===5&&n.type==="form"?hg(n):Mi.r(t)}var ca=typeof document>"u"?null:document;function Yp(t,n,s){var l=ca;if(l&&typeof n=="string"&&n){var c=pe(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Fp.has(c)||(Fp.add(c),t={rel:t,crossOrigin:s,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),ke(n,"link",t),ce(n),l.head.appendChild(n)))}}function WE(t){Mi.D(t),Yp("dns-prefetch",t,null)}function tT(t,n){Mi.C(t,n),Yp("preconnect",t,n)}function eT(t,n,s){Mi.L(t,n,s);var l=ca;if(l&&t&&n){var c='link[rel="preload"][as="'+pe(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+pe(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+pe(s.imageSizes)+'"]')):c+='[href="'+pe(t)+'"]';var f=c;switch(n){case"style":f=ha(t);break;case"script":f=fa(t)}xn.has(f)||(t=A({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),xn.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Ml(f))||n==="script"&&l.querySelector(Ll(f))||(n=l.createElement("link"),ke(n,"link",t),ce(n),l.head.appendChild(n)))}}function nT(t,n){Mi.m(t,n);var s=ca;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+pe(l)+'"][href="'+pe(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=fa(t)}if(!xn.has(f)&&(t=A({rel:"modulepreload",href:t},n),xn.set(f,t),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ll(f)))return}l=s.createElement("link"),ke(l,"link",t),ce(l),s.head.appendChild(l)}}}function iT(t,n,s){Mi.S(t,n,s);var l=ca;if(l&&t){var c=Je(l).hoistableStyles,f=ha(t);n=n||"default";var _=c.get(f);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(Ml(f)))E.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},s),(s=xn.get(f))&&Af(t,s);var R=_=l.createElement("link");ce(R),ke(R,"link",t),R._p=new Promise(function(z,Y){R.onload=z,R.onerror=Y}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Iu(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:E},c.set(f,_)}}}function sT(t,n){Mi.X(t,n);var s=ca;if(s&&t){var l=Je(s).hoistableScripts,c=fa(t),f=l.get(c);f||(f=s.querySelector(Ll(c)),f||(t=A({src:t,async:!0},n),(n=xn.get(c))&&bf(t,n),f=s.createElement("script"),ce(f),ke(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function rT(t,n){Mi.M(t,n);var s=ca;if(s&&t){var l=Je(s).hoistableScripts,c=fa(t),f=l.get(c);f||(f=s.querySelector(Ll(c)),f||(t=A({src:t,async:!0,type:"module"},n),(n=xn.get(c))&&bf(t,n),f=s.createElement("script"),ce(f),ke(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Qp(t,n,s,l){var c=(c=vt.current)?Nu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=ha(s.href),s=Je(c).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ha(s.href);var f=Je(c).hoistableStyles,_=f.get(t);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=c.querySelector(Ml(t)))&&!f._p&&(_.instance=f,_.state.loading=5),xn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},xn.set(t,s),f||aT(c,t,s,_.state))),n&&l===null)throw Error(a(528,""));return _}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=fa(s),s=Je(c).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ha(t){return'href="'+pe(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function Kp(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function aT(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),ke(n,"link",s),ce(n),t.head.appendChild(n))}function fa(t){return'[src="'+pe(t)+'"]'}function Ll(t){return"script[async]"+t}function Xp(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+pe(s.href)+'"]');if(l)return n.instance=l,ce(l),l;var c=A({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ce(l),ke(l,"style",c),Iu(l,s.precedence,t),n.instance=l;case"stylesheet":c=ha(s.href);var f=t.querySelector(Ml(c));if(f)return n.state.loading|=4,n.instance=f,ce(f),f;l=Kp(s),(c=xn.get(c))&&Af(l,c),f=(t.ownerDocument||t).createElement("link"),ce(f);var _=f;return _._p=new Promise(function(E,R){_.onload=E,_.onerror=R}),ke(f,"link",l),n.state.loading|=4,Iu(f,s.precedence,t),n.instance=f;case"script":return f=fa(s.src),(c=t.querySelector(Ll(f)))?(n.instance=c,ce(c),c):(l=s,(c=xn.get(f))&&(l=A({},s),bf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),ce(c),ke(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Iu(l,s.precedence,t));return n.instance}function Iu(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Af(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function bf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ou=null;function $p(t,n,s){if(Ou===null){var l=new Map,c=Ou=new Map;c.set(s,l)}else c=Ou,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var f=s[c];if(!(f[Us]||f[be]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(n)||"";_=t+_;var E=l.get(_);E?E.push(f):l.set(_,[f])}}return l}function Zp(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function lT(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ul=null;function oT(){}function uT(t,n,s){if(Ul===null)throw Error(a(475));var l=Ul;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=ha(s.href),f=t.querySelector(Ml(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Vu.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,ce(f);return}f=t.ownerDocument||t,s=Kp(s),(c=xn.get(c))&&Af(s,c),f=f.createElement("link"),ce(f);var _=f;_._p=new Promise(function(E,R){_.onload=E,_.onerror=R}),ke(f,"link",s),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Vu.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function cT(){if(Ul===null)throw Error(a(475));var t=Ul;return t.stylesheets&&t.count===0&&Sf(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&Sf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Vu(){if(this.count--,this.count===0){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mu=null;function Sf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mu=new Map,n.forEach(hT,t),Mu=null,Vu.call(t))}function hT(t,n){if(!(n.state.loading&4)){var s=Mu.get(t);if(s)var l=s.get(null);else{s=new Map,Mu.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var _=c[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),l=_)}l&&s.set(null,l)}c=n.instance,_=c.getAttribute("data-precedence"),f=s.get(_)||l,f===l&&s.set(null,c),s.set(_,c),this.count++,l=Vu.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Pl={$$typeof:st,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function fT(t,n,s,l,c,f,_,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Wp(t,n,s,l,c,f,_,E,R,z,Y,X){return t=new fT(t,n,s,_,E,R,z,X),n=1,f===!0&&(n|=24),f=cn(3,null,null,n),t.current=f,f.stateNode=t,n=sh(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:s,cache:n},oh(f),t}function ty(t){return t?(t=Hr,t):Hr}function ey(t,n,s,l,c,f){c=ty(c),l.context===null?l.context=c:l.pendingContext=c,l=Ki(n),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=Xi(t,l,n),s!==null&&(gn(s,t,n),dl(s,t,n))}function ny(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Rf(t,n){ny(t,n),(t=t.alternate)&&ny(t,n)}function iy(t){if(t.tag===13){var n=qr(t,67108864);n!==null&&gn(n,t,67108864),Rf(t,67108864)}}var Lu=!0;function dT(t,n,s,l){var c=F.T;F.T=null;var f=et.p;try{et.p=2,wf(t,n,s,l)}finally{et.p=f,F.T=c}}function mT(t,n,s,l){var c=F.T;F.T=null;var f=et.p;try{et.p=8,wf(t,n,s,l)}finally{et.p=f,F.T=c}}function wf(t,n,s,l){if(Lu){var c=Cf(l);if(c===null)df(t,n,l,Uu,s),ry(t,l);else if(pT(c,t,n,s,l))l.stopPropagation();else if(ry(t,l),n&4&&-1<gT.indexOf(t)){for(;c!==null;){var f=kn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=In(f.pendingLanes);if(_!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var R=1<<31-Fe(_);E.entanglements[1]|=R,_&=~R}ei(f),(Gt&6)===0&&(vu=pn()+500,Nl(0))}}break;case 13:E=qr(f,2),E!==null&&gn(E,f,2),Tu(),Rf(f,2)}if(f=Cf(l),f===null&&df(t,n,l,Uu,s),f===c)break;c=f}c!==null&&l.stopPropagation()}else df(t,n,l,null,s)}}function Cf(t){return t=vn(t),xf(t)}var Uu=null;function xf(t){if(Uu=null,t=fi(t),t!==null){var n=h(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=d(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Uu=t,null}function sy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nc()){case La:return 2;case Tr:return 8;case Is:case Ic:return 32;case Ar:return 268435456;default:return 32}default:return 32}}var Df=!1,os=null,us=null,cs=null,jl=new Map,zl=new Map,hs=[],gT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ry(t,n){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":jl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(n.pointerId)}}function Bl(t,n,s,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=kn(n),n!==null&&iy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function pT(t,n,s,l,c){switch(n){case"focusin":return os=Bl(os,t,n,s,l,c),!0;case"dragenter":return us=Bl(us,t,n,s,l,c),!0;case"mouseover":return cs=Bl(cs,t,n,s,l,c),!0;case"pointerover":var f=c.pointerId;return jl.set(f,Bl(jl.get(f)||null,t,n,s,l,c)),!0;case"gotpointercapture":return f=c.pointerId,zl.set(f,Bl(zl.get(f)||null,t,n,s,l,c)),!0}return!1}function ay(t){var n=fi(t.target);if(n!==null){var s=h(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){t.blockedOn=n,To(t.priority,function(){if(s.tag===13){var l=mn();l=zi(l);var c=qr(s,l);c!==null&&gn(c,s,l),Rf(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Cf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);pi=l,s.target.dispatchEvent(l),pi=null}else return n=kn(s),n!==null&&iy(n),t.blockedOn=s,!1;n.shift()}return!0}function ly(t,n,s){Pu(t)&&s.delete(n)}function yT(){Df=!1,os!==null&&Pu(os)&&(os=null),us!==null&&Pu(us)&&(us=null),cs!==null&&Pu(cs)&&(cs=null),jl.forEach(ly),zl.forEach(ly)}function ju(t,n){t.blockedOn===n&&(t.blockedOn=null,Df||(Df=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yT)))}var zu=null;function oy(t){zu!==t&&(zu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zu===t&&(zu=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(xf(l||s)===null)continue;break}var f=kn(s);f!==null&&(t.splice(n,3),n-=3,Ch(f,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function kl(t){function n(R){return ju(R,t)}os!==null&&ju(os,t),us!==null&&ju(us,t),cs!==null&&ju(cs,t),jl.forEach(n),zl.forEach(n);for(var s=0;s<hs.length;s++){var l=hs[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<hs.length&&(s=hs[0],s.blockedOn===null);)ay(s),s.blockedOn===null&&hs.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],f=s[l+1],_=c[ge]||null;if(typeof f=="function")_||oy(s);else if(_){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,_=f[ge]||null)E=_.formAction;else if(xf(c)!==null)continue}else E=_.action;typeof E=="function"?s[l+1]=E:(s.splice(l,3),l-=3),oy(s)}}}function Nf(t){this._internalRoot=t}Bu.prototype.render=Nf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=mn();ey(s,l,t,n,null,null)},Bu.prototype.unmount=Nf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ey(t.current,2,null,t,null,null),Tu(),n[yn]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Bi();t={blockedOn:null,target:t,priority:n};for(var s=0;s<hs.length&&n!==0&&n<hs[s].priority;s++);hs.splice(s,0,t),s===0&&ay(t)}};var uy=e.version;if(uy!=="19.1.0")throw Error(a(527,uy,"19.1.0"));et.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var _T={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{ae=ku.inject(_T),Ht=ku}catch{}}return Hl.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",c=Rg,f=wg,_=Cg,E=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Wp(t,1,!1,null,null,s,l,c,f,_,E,null),t[yn]=n.current,ff(t),new Nf(n)},Hl.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,c="",f=Rg,_=wg,E=Cg,R=null,z=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks),s.formState!==void 0&&(z=s.formState)),n=Wp(t,1,!0,n,s??null,l,c,f,_,E,R,z),n.context=ty(null),s=n.current,l=mn(),l=zi(l),c=Ki(l),c.callback=null,Xi(s,c,l),s=l,n.current.lanes=s,hi(n,s),ei(n),t[yn]=n.current,ff(t),new Bu(n)},Hl.version="19.1.0",Hl}var vy;function DT(){if(vy)return Vf.exports;vy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vf.exports=xT(),Vf.exports}var NT=DT();const IT=Z_(NT),Li=[{id:"indicador1",title:"Presentación personal",levels:[{points:1,levelName:"Desarrollo Débil",description:"Presentación básica de datos personales, vestimenta adecuada"},{points:2,levelName:"Desarrollo Incipiente",description:"Incluye desarrollo de aprendizajes e hitos de últimos 2 años, sin piercing"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Agrega reconocimiento de habilidades, competencias, metas y proyecciones"},{points:4,levelName:"Desarrollo Avanzado",description:"Incluye aspectos a fortalecer y ejemplo de experiencia DUAL"}]},{id:"indicador2",title:"Descripción de su proceso de vinculación en la alternancia DUAL",levels:[{points:1,levelName:"Desarrollo Débil",description:"Descripción superficial del proceso de vinculación"},{points:2,levelName:"Desarrollo Incipiente",description:"Descripción detallada de pasos, involucrados y roles"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Incluye sentimientos y emociones del proceso"},{points:4,levelName:"Desarrollo Avanzado",description:"Agrega estrategias para gestionar emociones"}]},{id:"indicador3",title:"Descripción del centro de aprendizaje",levels:[{points:1,levelName:"Desarrollo Débil",description:"Características generales básicas"},{points:2,levelName:"Desarrollo Incipiente",description:"Incluye organigrama y profesionales de interacción"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Explica procesos de producción/servicio detalladamente"},{points:4,levelName:"Desarrollo Avanzado",description:"Identifica 10 características y matriz FODA"}]},{id:"indicador4",title:"Experiencia de trabajo en Equipo",levels:[{points:1,levelName:"Desarrollo Débil",description:"Describe experiencia observada de trabajo en equipo"},{points:2,levelName:"Desarrollo Incipiente",description:"Experiencia asignada, funciones y objetivo común"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Identifica dificultades del proceso"},{points:4,levelName:"Desarrollo Avanzado",description:"Explica cómo resolvió las dificultades"}]},{id:"indicador5",title:"Experiencia de resolución de conflictos",levels:[{points:1,levelName:"Desarrollo Débil",description:"Identifica crisis/conflicto observado"},{points:2,levelName:"Desarrollo Incipiente",description:"Reconoce componentes y alternativas de resolución"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Identifica componentes, situaciones, emociones y resolución"},{points:4,levelName:"Desarrollo Avanzado",description:"Presenta alternativas adicionales de resolución"}]},{id:"indicador6",title:"Experiencia Técnica",levels:[{points:1,levelName:"Desarrollo Débil",description:"Explica tareas generales sin experiencia específica"},{points:2,levelName:"Desarrollo Incipiente",description:"Experiencia específica con vocabulario técnico parcial"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Vocabulario técnico completo, vincula habilidades, identifica errores"},{points:4,levelName:"Desarrollo Avanzado",description:"Plantea propuestas de mejora para futuras tareas"}]},{id:"indicador7",title:"Propuesta de mejora",levels:[{points:1,levelName:"Desarrollo Débil",description:"Propuesta sin diagnóstico claro"},{points:2,levelName:"Desarrollo Incipiente",description:"Identifica oportunidades y propone acción específica"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Incluye comparación y flujograma/ejemplos"},{points:4,levelName:"Desarrollo Avanzado",description:"Propuesta de implementación real"}]},{id:"indicador8",title:"Evaluación de su desarrollo y aprendizaje",levels:[{points:1,levelName:"Desarrollo Débil",description:"Resume experiencia y tareas generales"},{points:2,levelName:"Desarrollo Incipiente",description:"Detalla aprendizajes y experiencias significativas"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Explica impacto de aprendizajes en el futuro"},{points:4,levelName:"Desarrollo Avanzado",description:"Reconoce elementos por aprender y propuesta para lograrlo"}]},{id:"indicador9",title:"Expresión oral",levels:[{points:1,levelName:"Desarrollo Débil",description:"Ideas sin claridad en argumentos"},{points:2,levelName:"Desarrollo Incipiente",description:"Ideas claras, elocuentes y fluidas"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Adecua comunicación al contexto y receptor"},{points:4,levelName:"Desarrollo Avanzado",description:"Estrategias para captar atención, buena oratoria y disposición"}]},{id:"indicador10",title:"Presentación",levels:[{points:1,levelName:"Desarrollo Débil",description:"Al menos un recurso innovador/creativo"},{points:2,levelName:"Desarrollo Incipiente",description:"Presentación atractiva con recursos físicos y digitales"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Mantiene formalidad durante exposición"},{points:4,levelName:"Desarrollo Avanzado",description:"Responde preguntas de participantes"}]},{id:"indicador11",title:"Uso eficiente del Tiempo",levels:[{points:1,levelName:"Desarrollo Débil",description:"Menos de 6 minutos"},{points:2,levelName:"Desarrollo Incipiente",description:"6-8 minutos, elementos parciales"},{points:3,levelName:"Desarrollo Satisfactorio",description:"8-10 minutos, elementos completos sin profundidad"},{points:4,levelName:"Desarrollo Avanzado",description:"10-12 minutos, profundidad en todos los elementos"}]},{id:"indicador12",title:"Empatía",levels:[{points:1,levelName:"Desarrollo Débil",description:"Respeto ocasional hacia compañeros/docentes"},{points:2,levelName:"Desarrollo Incipiente",description:"Respeto constante, necesita recordatorio de contexto"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Respeto permanente, atiende presentaciones de pares"},{points:4,levelName:"Desarrollo Avanzado",description:"Demuestra inquietudes y valoraciones oportunas"}]},{id:"indicador13",title:"Normas de Seguridad",levels:[{points:1,levelName:"Desarrollo Débil",description:"Algunos EPPs y normas, o solo uno de los criterios"},{points:2,levelName:"Desarrollo Incipiente",description:"Algunos EPPs y normas de seguridad"},{points:3,levelName:"Desarrollo Satisfactorio",description:"Todos los EPPs y normas de seguridad"},{points:4,levelName:"Desarrollo Avanzado",description:"Detalla importancia de EPPs y reconoce normas"}]}],Le={MIN_POSSIBLE_SCORE_PER_INDICATOR:1,MAX_POSSIBLE_SCORE_PER_INDICATOR:4,TOTAL_INDICATORS:Li.length,get MIN_TOTAL_POSSIBLE_SCORE(){return this.TOTAL_INDICATORS*this.MIN_POSSIBLE_SCORE_PER_INDICATOR},get MAX_TOTAL_POSSIBLE_SCORE(){return this.TOTAL_INDICATORS*this.MAX_POSSIBLE_SCORE_PER_INDICATOR},SCORE_FOR_PASSING_GRADE:31.2,MIN_GRADE:2,PASSING_GRADE:4,MAX_GRADE:7},J_=["3ºA","3ºB","3ºC","3ºD"],OT=({level:r,isSelected:e,onClick:i,disabled:a})=>I.jsxs("button",{type:"button",onClick:i,disabled:a,className:`w-full sm:w-auto flex-1 text-sm sm:text-xs text-center px-3 py-2.5 rounded-md border transition-all duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-1 ${a?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":e?"bg-blue-600 text-white border-blue-700 shadow-md transform scale-105":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50 hover:border-slate-400"}`,"aria-pressed":e,children:[I.jsxs("div",{className:"font-semibold",children:[r.levelName," (",r.points," pto)"]}),I.jsx("div",{className:"text-xs mt-1 hidden sm:block",children:r.description})]}),VT=({item:r,selectedScore:e,onScoreSelect:i,isSubmitted:a})=>{var h;const o=a&&e===void 0;return I.jsxs("div",{className:`bg-white shadow-lg rounded-xl p-6 mb-6 transition-all duration-300 ease-in-out ${o?"ring-2 ring-red-500":"hover:shadow-xl"}`,children:[I.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-1",children:r.title}),e&&I.jsx("p",{className:"text-xs text-slate-500 mb-4 sm:hidden",children:(h=r.levels.find(d=>d.points===e))==null?void 0:h.description}),I.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-3",children:r.levels.map(d=>I.jsx(OT,{level:d,isSelected:e===d.points,onClick:()=>i(r.id,d.points)},d.points))}),o&&I.jsx("p",{className:"text-red-600 text-xs mt-2",children:"Por favor, selecciona un puntaje para este indicador."})]})},MT=({studentName:r,onStudentNameChange:e,course:i,onCourseChange:a,scores:o,onScoreChange:h,isSubmitted:d})=>{const g=d&&!r.trim(),y=d&&!i;return I.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 border-b pb-4",children:"Formulario de Evaluación"}),I.jsxs("div",{className:"mb-6",children:[I.jsx("label",{htmlFor:"studentName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre del Estudiante"}),I.jsx("input",{type:"text",id:"studentName",value:r,onChange:v=>e(v.target.value),className:`w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition-colors duration-150 ${g?"border-red-500 ring-red-500":"border-slate-300"}`,placeholder:"Ingrese el nombre completo del estudiante"}),g&&I.jsx("p",{className:"text-red-600 text-xs mt-1",children:"El nombre del estudiante es requerido."})]}),I.jsxs("div",{className:"mb-8",children:[I.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-slate-700 mb-1",children:"Curso"}),I.jsxs("select",{id:"course",value:i,onChange:v=>a(v.target.value),className:`w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition-colors duration-150 ${y?"border-red-500 ring-red-500":"border-slate-300"}`,children:[I.jsx("option",{value:"",disabled:!0,children:"Seleccione un curso"}),J_.map(v=>I.jsx("option",{value:v,children:v},v))]}),y&&I.jsx("p",{className:"text-red-600 text-xs mt-1",children:"La selección del curso es requerida."})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-4",children:"Indicadores de Evaluación"}),Li.map(v=>I.jsx(VT,{item:v,selectedScore:o[v.id],onScoreSelect:h,isSubmitted:d},v.id))]})]})},LT=({totalScore:r,finalGrade:e})=>{if(e===null)return null;const a=(o=>o<Le.PASSING_GRADE?"text-red-600":o<5?"text-yellow-600":o<6?"text-blue-600":"text-green-600")(e);return I.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 mt-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4 border-b pb-3",children:"Resultados Finales"}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg text-center",children:[I.jsx("p",{className:"text-sm font-medium text-slate-600 mb-1",children:"Puntaje Total Obtenido"}),I.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[r," ",I.jsxs("span",{className:"text-lg font-normal text-slate-500",children:["/ ",Le.MAX_TOTAL_POSSIBLE_SCORE]})]})]}),I.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg text-center",children:[I.jsx("p",{className:"text-sm font-medium text-slate-600 mb-1",children:"Nota Final Calculada"}),I.jsx("p",{className:`text-3xl font-bold ${a}`,children:e.toFixed(1)}),I.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["(Escala ",Le.MIN_GRADE.toFixed(1)," - ",Le.MAX_GRADE.toFixed(1),", Aprobación con ",Le.PASSING_GRADE.toFixed(1),")"]})]})]})]})},UT=({aiFeedback:r,isLoadingFeedback:e,groundingMetadata:i})=>{if(e)return I.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 mt-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Retroalimentación con IA"}),I.jsxs("div",{className:"flex items-center justify-center py-10",children:[I.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),I.jsx("p",{className:"ml-4 text-slate-600",children:"Generando retroalimentación, por favor espera..."})]})]});if(!r)return null;const a=i==null?void 0:i.groundingAttributions;return I.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 mt-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4 border-b pb-3",children:"Retroalimentación Personalizada (IA)"}),I.jsx("div",{className:"prose prose-slate max-w-none text-slate-700 whitespace-pre-wrap",children:r}),a&&a.length>0&&I.jsxs("div",{className:"mt-6 pt-4 border-t",children:[I.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Fuentes Consultadas por IA (Google Search):"}),(i==null?void 0:i.webSearchQueries)&&i.webSearchQueries.length>0&&I.jsxs("p",{className:"text-sm text-slate-500 mb-2",children:["Consultas realizadas: ",i.webSearchQueries.join(", ")]}),I.jsx("ul",{className:"list-disc list-inside space-y-1",children:a.map((o,h)=>{const d=o.web||o.retrievedContext;return d&&d.uri?I.jsx("li",{className:"text-sm",children:I.jsx("a",{href:d.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:d.title||d.uri})},h):null})})]})]})},Yf=r=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),PT=r=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),jT=({evaluations:r})=>{const e=(g,y=0)=>typeof g=="number"&&!isNaN(g)&&isFinite(g)?g:y;if(r.length===0)return I.jsx("div",{className:"bg-slate-50 p-6 rounded-lg text-center text-slate-500 mt-8",children:I.jsx("p",{children:"No hay datos para mostrar en el gráfico para el filtro seleccionado."})});const i=[...r].sort((g,y)=>g.studentName.localeCompare(y.studentName)),a=Le.MAX_GRADE,o=1,h=a-o,d=(Le.PASSING_GRADE-o)/h*100;return I.jsxs("div",{className:"p-4 md:p-6 bg-slate-50 rounded-lg mt-8",children:[I.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-6",children:"Gráfico de Calificaciones por Estudiante"}),I.jsxs("div",{className:"w-full h-80 flex items-end pl-8 pr-4 relative",children:[I.jsxs("div",{className:"absolute left-0 top-0 h-full w-8 flex flex-col justify-between text-xs text-slate-500 py-4 items-end pr-2",children:[I.jsx("span",{children:e(a).toFixed(1)}),I.jsx("span",{className:"font-bold",children:e(Le.PASSING_GRADE).toFixed(1)}),I.jsx("span",{children:e(o).toFixed(1)})]}),I.jsxs("div",{className:"w-full h-full flex space-x-2 md:space-x-4 items-end border-b-2 border-l-2 border-slate-300 relative",children:[I.jsx("div",{className:"absolute w-full h-px bg-slate-400 border-t border-dashed",style:{bottom:`${d}%`}}),i.map(g=>{const y=e(g.finalGrade),v=(y-o)/h*100,A=y>=Le.PASSING_GRADE;return I.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full group",children:[I.jsx("div",{className:"w-full rounded-t-md transition-all duration-300 ease-in-out relative group",style:{height:`${Math.max(0,v)}%`,backgroundColor:A?"rgba(34, 197, 94, 0.7)":"rgba(239, 68, 68, 0.7)",border:`1px solid ${A?"rgba(22, 163, 74, 0.8)":"rgba(220, 38, 38, 0.8)"}`},title:`${g.studentName}: ${y.toFixed(1)}`,children:I.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 bg-slate-800 text-white text-xs px-2 py-1 rounded-md transition-opacity pointer-events-none",children:y.toFixed(1)})}),I.jsx("p",{className:"text-xs text-slate-600 mt-1 w-full text-center overflow-hidden text-ellipsis whitespace-nowrap",title:g.studentName,children:g.studentName.split(" ")[0]})]},g.id)})]})]}),I.jsxs("div",{className:"flex justify-center items-center mt-4 space-x-4 text-sm text-slate-600",children:[I.jsxs("div",{className:"flex items-center",children:[I.jsx("span",{className:"w-3.5 h-3.5 bg-green-500/70 border border-green-700/80 rounded-sm mr-2"}),I.jsx("span",{children:"Aprobado"})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("span",{className:"w-3.5 h-3.5 bg-red-500/70 border border-red-700/80 rounded-sm mr-2"}),I.jsx("span",{children:"Reprobado"})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("span",{className:"border-t-2 border-slate-400 border-dashed w-4 h-px mr-2"}),I.jsx("span",{children:"Nota de Aprobación"})]})]})]})},zT=({evaluations:r,onBackToForm:e,onClearAll:i})=>{const[a,o]=Zt.useState("all"),h=()=>{window.confirm("¿Estás seguro de que quieres borrar TODAS las evaluaciones guardadas? Esta acción no se puede deshacer.")&&i()},d=Zt.useMemo(()=>a==="all"?r:r.filter(b=>b.course===a),[r,a]);if(r.length===0)return I.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8 mt-8",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[I.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Dashboard de Desempeño"}),I.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[I.jsx(Yf,{className:"h-5 w-5 mr-2"}),"Volver al Formulario"]})]}),I.jsx("p",{className:"text-slate-600 text-center py-10",children:"No hay evaluaciones guardadas para mostrar en el dashboard."})]});const g={};Li.forEach(b=>{g[b.id]={sum:0,count:0}}),d.forEach(b=>{Object.entries(b.scores).forEach(([B,G])=>{G!==void 0&&g[B]&&(g[B].sum+=G,g[B].count+=1)})});const y=Li.map(b=>({indicatorId:b.id,title:b.title,averageScore:g[b.id].count>0?g[b.id].sum/g[b.id].count:0,count:g[b.id].count})),v=(b,B=0)=>typeof b=="number"&&!isNaN(b)&&isFinite(b)?b:B,A=(()=>{const b=y.reduce((B,G)=>B+G.count,0);return b>0?y.reduce((B,G)=>B+G.averageScore*G.count,0)/b:0})(),w=d.length>0?d.reduce((b,B)=>b+(B.finalGrade??0),0)/d.length:0;return I.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8 mt-8",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4 flex-wrap gap-4",children:[I.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Dashboard de Desempeño"}),I.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[I.jsxs("div",{className:"flex-grow",children:[I.jsx("label",{htmlFor:"courseFilter",className:"sr-only",children:"Filtrar por Curso"}),I.jsxs("select",{id:"courseFilter",value:a,onChange:b=>o(b.target.value),className:"w-full sm:w-auto px-4 py-2 border border-slate-300 rounded-md text-sm font-medium text-slate-700 bg-white focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500",children:[I.jsx("option",{value:"all",children:"Todos los cursos"}),J_.map(b=>I.jsx("option",{value:b,children:b},b))]})]}),I.jsxs("button",{onClick:h,className:"flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[I.jsx(PT,{className:"h-5 w-5 mr-2"}),"Limpiar Todo"]}),I.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[I.jsx(Yf,{className:"h-5 w-5 mr-2"}),"Volver"]})]})]}),I.jsxs("h3",{className:"text-xl font-semibold text-slate-700 mb-4",children:["Resumen General (",a==="all"?"Todos los cursos":a,")"]}),I.jsxs("div",{className:"mb-8 p-6 bg-slate-50 rounded-lg grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Evaluaciones"}),I.jsx("p",{className:"text-3xl font-bold text-blue-600",children:d.length})]}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Promedio de Puntaje"}),I.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[v(A).toFixed(1),I.jsxs("span",{className:"text-lg font-normal text-slate-500",children:[" "," / ",v(Le.MAX_POSSIBLE_SCORE_PER_INDICATOR).toFixed(0)]})]})]}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Promedio de Nota Final"}),I.jsx("p",{className:"text-3xl font-bold text-green-600",children:v(w).toFixed(1)})]})]}),I.jsx(jT,{evaluations:d}),I.jsx("h3",{className:"text-xl font-semibold text-slate-700 mt-8 mb-4",children:"Historial de Evaluaciones"}),d.length>0?I.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:I.jsxs("table",{className:"min-w-full bg-white",children:[I.jsx("thead",{className:"bg-slate-50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-6 py-3 border-b-2 border-slate-200 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Nombre del Estudiante"}),I.jsx("th",{className:"px-6 py-3 border-b-2 border-slate-200 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Curso"}),I.jsx("th",{className:"px-6 py-3 border-b-2 border-slate-200 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Fecha"}),I.jsx("th",{className:"px-6 py-3 border-b-2 border-slate-200 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Nota Final"})]})}),I.jsx("tbody",{className:"text-slate-700",children:[...d].reverse().map(b=>I.jsxs("tr",{className:"hover:bg-slate-50",children:[I.jsx("td",{className:"px-6 py-4 whitespace-nowrap border-b border-slate-200",children:b.studentName}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap border-b border-slate-200",children:b.course}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap border-b border-slate-200",children:b.evaluationDate}),I.jsx("td",{className:`px-6 py-4 whitespace-nowrap border-b border-slate-200 font-medium ${b.finalGrade<Le.PASSING_GRADE?"text-red-600":"text-green-600"}`,children:v(b.finalGrade).toFixed(1)})]},b.id))})]})}):I.jsx("div",{className:"bg-slate-50 p-6 rounded-lg text-center text-slate-500",children:I.jsx("p",{children:"No hay evaluaciones que coincidan con el filtro de curso seleccionado."})}),I.jsx("h3",{className:"text-xl font-semibold text-slate-700 mt-8 mb-4",children:"Promedio por Indicador"}),I.jsx("div",{className:"space-y-4",children:y.map(b=>I.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("span",{className:"font-medium text-slate-800",children:b.title}),I.jsxs("span",{className:`font-bold text-lg ${b.averageScore>=Le.MAX_POSSIBLE_SCORE_PER_INDICATOR*.75?"text-green-600":b.averageScore>=Le.MAX_POSSIBLE_SCORE_PER_INDICATOR*.5?"text-yellow-600":"text-red-600"}`,children:[v(b.averageScore).toFixed(1)," / ",v(Le.MAX_POSSIBLE_SCORE_PER_INDICATOR).toFixed(0)]})]}),I.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mt-2",children:I.jsx("div",{className:`h-2.5 rounded-full ${b.averageScore>=Le.MAX_POSSIBLE_SCORE_PER_INDICATOR*.75?"bg-green-500":b.averageScore>=Le.MAX_POSSIBLE_SCORE_PER_INDICATOR*.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${v(b.averageScore)/v(Le.MAX_POSSIBLE_SCORE_PER_INDICATOR)*100}%`}})}),I.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Basado en ",b.count," evaluaciones."]})]},b.indicatorId))})]})};function Ey(r){return Object.values(r).reduce((e,i)=>e+(i||0),0)}function Ty(r){const{MIN_TOTAL_POSSIBLE_SCORE:e,SCORE_FOR_PASSING_GRADE:i,MAX_TOTAL_POSSIBLE_SCORE:a,MIN_GRADE:o,PASSING_GRADE:h,MAX_GRADE:d}=Le;let g;if(r>=i){const v=r-i,A=a-i;A===0?g=r===a?d:h:g=h+v/A*(d-h)}else{const v=r-e,A=i-e;A===0?g=r===i?h:o:g=o+v/A*(h-o)}const y=Math.min(Math.max(g,o),d);return parseFloat(y.toFixed(1))}function Pf(r,e){return Object.values(r).filter(i=>i!==void 0).length===e}var Ay;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(Ay||(Ay={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var by;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(by||(by={}));var Sy;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Sy||(Sy={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=["user","model","function","system"];var wy;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(wy||(wy={}));var Cy;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(Cy||(Cy={}));var xy;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(xy||(xy={}));var Dy;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(Dy||(Dy={}));var Ql;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Ql||(Ql={}));var Ny;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(Ny||(Ny={}));var Iy;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(Iy||(Iy={}));var Oy;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(Oy||(Oy={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class da extends Ze{constructor(e,i){super(e),this.response=i}}class W_ extends Ze{constructor(e,i,a,o){super(e),this.status=i,this.statusText=a,this.errorDetails=o}}class gs extends Ze{}class tv extends Ze{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="https://generativelanguage.googleapis.com",kT="v1beta",qT="0.24.1",HT="genai-js";var dr;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(dr||(dr={}));class GT{constructor(e,i,a,o,h){this.model=e,this.task=i,this.apiKey=a,this.stream=o,this.requestOptions=h}toString(){var e,i;const a=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||kT;let h=`${((i=this.requestOptions)===null||i===void 0?void 0:i.baseUrl)||BT}/${a}/${this.model}:${this.task}`;return this.stream&&(h+="?alt=sse"),h}}function FT(r){const e=[];return r!=null&&r.apiClient&&e.push(r.apiClient),e.push(`${HT}/${qT}`),e.join(" ")}async function YT(r){var e;const i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",FT(r.requestOptions)),i.append("x-goog-api-key",r.apiKey);let a=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(o){throw new gs(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${o.message}`)}for(const[o,h]of a.entries()){if(o==="x-goog-api-key")throw new gs(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new gs(`Header name ${o} can only be set using the apiClient field`);i.append(o,h)}}return i}async function QT(r,e,i,a,o,h){const d=new GT(r,e,i,a,h);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},ZT(h)),{method:"POST",headers:await YT(d),body:o})}}async function ho(r,e,i,a,o,h={},d=fetch){const{url:g,fetchOptions:y}=await QT(r,e,i,a,o,h);return KT(g,y,d)}async function KT(r,e,i=fetch){let a;try{a=await i(r,e)}catch(o){XT(o,r)}return a.ok||await $T(a,r),a}function XT(r,e){let i=r;throw i.name==="AbortError"?(i=new tv(`Request aborted when fetching ${e.toString()}: ${r.message}`),i.stack=r.stack):r instanceof W_||r instanceof gs||(i=new Ze(`Error fetching from ${e.toString()}: ${r.message}`),i.stack=r.stack),i}async function $T(r,e){let i="",a;try{const o=await r.json();i=o.error.message,o.error.details&&(i+=` ${JSON.stringify(o.error.details)}`,a=o.error.details)}catch{}throw new W_(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${i}`,r.status,r.statusText,a)}function ZT(r){const e={};if((r==null?void 0:r.signal)!==void 0||(r==null?void 0:r.timeout)>=0){const i=new AbortController;(r==null?void 0:r.timeout)>=0&&setTimeout(()=>i.abort(),r.timeout),r!=null&&r.signal&&r.signal.addEventListener("abort",()=>{i.abort()}),e.signal=i.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ku(r.candidates[0]))throw new da(`${ds(r)}`,r);return JT(r)}else if(r.promptFeedback)throw new da(`Text not available. ${ds(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ku(r.candidates[0]))throw new da(`${ds(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Vy(r)[0]}else if(r.promptFeedback)throw new da(`Function call not available. ${ds(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ku(r.candidates[0]))throw new da(`${ds(r)}`,r);return Vy(r)}else if(r.promptFeedback)throw new da(`Function call not available. ${ds(r)}`,r)},r}function JT(r){var e,i,a,o;const h=[];if(!((i=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||i===void 0)&&i.parts)for(const d of(o=(a=r.candidates)===null||a===void 0?void 0:a[0].content)===null||o===void 0?void 0:o.parts)d.text&&h.push(d.text),d.executableCode&&h.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&h.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return h.length>0?h.join(""):""}function Vy(r){var e,i,a,o;const h=[];if(!((i=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||i===void 0)&&i.parts)for(const d of(o=(a=r.candidates)===null||a===void 0?void 0:a[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&h.push(d.functionCall);if(h.length>0)return h}const WT=[Ql.RECITATION,Ql.SAFETY,Ql.LANGUAGE];function Ku(r){return!!r.finishReason&&WT.includes(r.finishReason)}function ds(r){var e,i,a;let o="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)o+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${r.promptFeedback.blockReason}`),!((i=r.promptFeedback)===null||i===void 0)&&i.blockReasonMessage&&(o+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((a=r.candidates)===null||a===void 0)&&a[0]){const h=r.candidates[0];Ku(h)&&(o+=`Candidate was blocked due to ${h.finishReason}`,h.finishMessage&&(o+=`: ${h.finishMessage}`))}return o}function Wl(r){return this instanceof Wl?(this.v=r,this):new Wl(r)}function t1(r,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,e||[]),o,h=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(b){a[b]&&(o[b]=function(B){return new Promise(function(G,tt){h.push([b,B,G,tt])>1||g(b,B)})})}function g(b,B){try{y(a[b](B))}catch(G){w(h[0][3],G)}}function y(b){b.value instanceof Wl?Promise.resolve(b.value.v).then(v,A):w(h[0][2],b)}function v(b){g("next",b)}function A(b){g("throw",b)}function w(b,B){b(B),h.shift(),h.length&&g(h[0][0],h[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function e1(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),i=s1(e),[a,o]=i.tee();return{stream:i1(a),response:n1(o)}}async function n1(r){const e=[],i=r.getReader();for(;;){const{done:a,value:o}=await i.read();if(a)return pd(r1(e));e.push(o)}}function i1(r){return t1(this,arguments,function*(){const i=r.getReader();for(;;){const{value:a,done:o}=yield Wl(i.read());if(o)break;yield yield Wl(pd(a))}})}function s1(r){const e=r.getReader();return new ReadableStream({start(a){let o="";return h();function h(){return e.read().then(({value:d,done:g})=>{if(g){if(o.trim()){a.error(new Ze("Failed to parse stream"));return}a.close();return}o+=d;let y=o.match(My),v;for(;y;){try{v=JSON.parse(y[1])}catch{a.error(new Ze(`Error parsing JSON response: "${y[1]}"`));return}a.enqueue(v),o=o.substring(y[0].length),y=o.match(My)}return h()}).catch(d=>{let g=d;throw g.stack=d.stack,g.name==="AbortError"?g=new tv("Request aborted when reading from the stream"):g=new Ze("Error reading from the stream"),g})}}})}function r1(r){const e=r[r.length-1],i={promptFeedback:e==null?void 0:e.promptFeedback};for(const a of r){if(a.candidates){let o=0;for(const h of a.candidates)if(i.candidates||(i.candidates=[]),i.candidates[o]||(i.candidates[o]={index:o}),i.candidates[o].citationMetadata=h.citationMetadata,i.candidates[o].groundingMetadata=h.groundingMetadata,i.candidates[o].finishReason=h.finishReason,i.candidates[o].finishMessage=h.finishMessage,i.candidates[o].safetyRatings=h.safetyRatings,h.content&&h.content.parts){i.candidates[o].content||(i.candidates[o].content={role:h.content.role||"user",parts:[]});const d={};for(const g of h.content.parts)g.text&&(d.text=g.text),g.functionCall&&(d.functionCall=g.functionCall),g.executableCode&&(d.executableCode=g.executableCode),g.codeExecutionResult&&(d.codeExecutionResult=g.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),i.candidates[o].content.parts.push(d)}o++}a.usageMetadata&&(i.usageMetadata=a.usageMetadata)}return i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(r,e,i,a){const o=await ho(e,dr.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(i),a);return e1(o)}async function nv(r,e,i,a){const h=await(await ho(e,dr.GENERATE_CONTENT,r,!1,JSON.stringify(i),a)).json();return{response:pd(h)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function to(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const i of r)typeof i=="string"?e.push({text:i}):e.push(i);return a1(e)}function a1(r){const e={role:"user",parts:[]},i={role:"function",parts:[]};let a=!1,o=!1;for(const h of r)"functionResponse"in h?(i.parts.push(h),o=!0):(e.parts.push(h),a=!0);if(a&&o)throw new Ze("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!o)throw new Ze("No content is provided for sending chat message.");return a?e:i}function l1(r,e){var i;let a={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(i=e==null?void 0:e.cachedContent)===null||i===void 0?void 0:i.name,contents:[]};const o=r.generateContentRequest!=null;if(r.contents){if(o)throw new gs("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=r.contents}else if(o)a=Object.assign(Object.assign({},a),r.generateContentRequest);else{const h=to(r);a.contents=[h]}return{generateContentRequest:a}}function Ly(r){let e;return r.contents?e=r:e={contents:[to(r)]},r.systemInstruction&&(e.systemInstruction=iv(r.systemInstruction)),e}function o1(r){return typeof r=="string"||Array.isArray(r)?{content:to(r)}:r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],u1={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function c1(r){let e=!1;for(const i of r){const{role:a,parts:o}=i;if(!e&&a!=="user")throw new Ze(`First content should be with role 'user', got ${a}`);if(!Ry.includes(a))throw new Ze(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(Ry)}`);if(!Array.isArray(o))throw new Ze("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Ze("Each Content should have at least one part");const h={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of o)for(const y of Uy)y in g&&(h[y]+=1);const d=u1[a];for(const g of Uy)if(!d.includes(g)&&h[g]>0)throw new Ze(`Content with role '${a}' can't contain '${g}' part`);e=!0}}function Py(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const i=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(i===void 0||i.parts===void 0||i.parts.length===0)return!1;for(const a of i.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="SILENT_ERROR";class h1{constructor(e,i,a,o={}){this.model=i,this.params=a,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,a!=null&&a.history&&(c1(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,i={}){var a,o,h,d,g,y;await this._sendPromise;const v=to(e),A={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(y=this.params)===null||y===void 0?void 0:y.cachedContent,contents:[...this._history,v]},w=Object.assign(Object.assign({},this._requestOptions),i);let b;return this._sendPromise=this._sendPromise.then(()=>nv(this._apiKey,this.model,A,w)).then(B=>{var G;if(Py(B.response)){this._history.push(v);const tt=Object.assign({parts:[],role:"model"},(G=B.response.candidates)===null||G===void 0?void 0:G[0].content);this._history.push(tt)}else{const tt=ds(B.response);tt&&console.warn(`sendMessage() was unsuccessful. ${tt}. Inspect response object for details.`)}b=B}).catch(B=>{throw this._sendPromise=Promise.resolve(),B}),await this._sendPromise,b}async sendMessageStream(e,i={}){var a,o,h,d,g,y;await this._sendPromise;const v=to(e),A={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(y=this.params)===null||y===void 0?void 0:y.cachedContent,contents:[...this._history,v]},w=Object.assign(Object.assign({},this._requestOptions),i),b=ev(this._apiKey,this.model,A,w);return this._sendPromise=this._sendPromise.then(()=>b).catch(B=>{throw new Error(jy)}).then(B=>B.response).then(B=>{if(Py(B)){this._history.push(v);const G=Object.assign({},B.candidates[0].content);G.role||(G.role="model"),this._history.push(G)}else{const G=ds(B);G&&console.warn(`sendMessageStream() was unsuccessful. ${G}. Inspect response object for details.`)}}).catch(B=>{B.message!==jy&&console.error(B)}),b}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(r,e,i,a){return(await ho(e,dr.COUNT_TOKENS,r,!1,JSON.stringify(i),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(r,e,i,a){return(await ho(e,dr.EMBED_CONTENT,r,!1,JSON.stringify(i),a)).json()}async function m1(r,e,i,a){const o=i.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await ho(e,dr.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:o}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,i,a={}){this.apiKey=e,this._requestOptions=a,i.model.includes("/")?this.model=i.model:this.model=`models/${i.model}`,this.generationConfig=i.generationConfig||{},this.safetySettings=i.safetySettings||[],this.tools=i.tools,this.toolConfig=i.toolConfig,this.systemInstruction=iv(i.systemInstruction),this.cachedContent=i.cachedContent}async generateContent(e,i={}){var a;const o=Ly(e),h=Object.assign(Object.assign({},this._requestOptions),i);return nv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},o),h)}async generateContentStream(e,i={}){var a;const o=Ly(e),h=Object.assign(Object.assign({},this._requestOptions),i);return ev(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},o),h)}startChat(e){var i;return new h1(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},e),this._requestOptions)}async countTokens(e,i={}){const a=l1(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),i);return f1(this.apiKey,this.model,a,o)}async embedContent(e,i={}){const a=o1(e),o=Object.assign(Object.assign({},this._requestOptions),i);return d1(this.apiKey,this.model,a,o)}async batchEmbedContents(e,i={}){const a=Object.assign(Object.assign({},this._requestOptions),i);return m1(this.apiKey,this.model,e,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.apiKey=e}getGenerativeModel(e,i){if(!e.model)throw new Ze("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zy(this.apiKey,e,i)}getGenerativeModelFromCachedContent(e,i,a){if(!e.name)throw new gs("Cached content must contain a `name` field.");if(!e.model)throw new gs("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(i!=null&&i[d]&&e[d]&&(i==null?void 0:i[d])!==e[d]){if(d==="model"){const g=i.model.startsWith("models/")?i.model.replace("models/",""):i.model,y=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(g===y)continue}throw new gs(`Different value for "${d}" specified in modelParams (${i[d]}) and cachedContent (${e[d]})`)}const h=Object.assign(Object.assign({},i),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new zy(this.apiKey,h,a)}}const p1="AIzaSyC8AlX9fIudxLDExJy1hq1Yv3vBLxOPxX4",y1=new g1(p1);function _1(r,e){const i=r.levels.find(a=>a.points===e);return i?i.levelName:"Nivel Desconocido"}function v1(r,e){const i=r.levels.find(a=>a.points===e);return i?i.description:"Descripción Desconocida"}async function E1(r,e){let i=`Nombre del Estudiante: ${r}

`;i+=`--- RÚBRICA Y PUNTAJES OBTENIDOS ---
`,Li.forEach(h=>{const d=e[h.id];d!==void 0&&(i+=`
Indicador: ${h.title}
`,i+=`Puntaje Obtenido: ${d} (${_1(h,d)})
`,i+=`Descripción del Nivel Alcanzado: ${v1(h,d)}
`,i+=`Niveles de la Rúbrica:
`,h.levels.forEach(g=>{i+=`  - ${g.levelName} (${g.points} pto): ${g.description}
`}))});const a=`Eres un asistente de IA experto en evaluación pedagógica para el Liceo Industrial de Recoleta. Estás evaluando la presentación dual de un estudiante.
Tu tarea es generar una retroalimentación constructiva, personalizada y profesional.`,o=`${i}

--- INSTRUCCIONES PARA LA RETROALIMENTACIÓN ---
Basándote en la rúbrica y los puntajes detallados arriba, genera una retroalimentación en ESPAÑOL para el estudiante. La retroalimentación debe:
1.  Comenzar con un saludo cordial y personalizado (ej: "Estimado/a ${r},").
2.  Identificar claramente las Fortalezas Clave (2-3 indicadores con puntajes altos). Para cada fortaleza, explica brevemente qué hizo bien el estudiante, haciendo referencia a la descripción del nivel alcanzado en la rúbrica.
3.  Identificar con tacto las Áreas de Oportunidad (2-3 indicadores con los puntajes más bajos). Para cada área, describe qué aspectos específicos necesitan desarrollo, basándose en la descripción del nivel alcanzado y los niveles superiores no alcanzados.
4.  Proporcionar Recomendaciones Específicas y Accionables: Para cada área de oportunidad, ofrece 1-2 sugerencias concretas y prácticas que el estudiante puede implementar para mejorar.
5.  Incluir un Reconocimiento General de su esfuerzo y participación.
6.  Ofrecer Sugerencias Generales para Futuras Presentaciones (1-2 consejos).
7.  Finalizar con una nota de aliento y motivación.
Mantén un tono profesional, empático, alentador y constructivo. El objetivo es ayudar al estudiante a comprender su desempeño y a crecer.
La retroalimentación debe ser un texto coherente y bien estructurado. Evita usar markdown excesivo en la respuesta, solo párrafos y quizás listas simples si es necesario.
`;try{return{feedbackText:(await(await y1.getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:a}).generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{temperature:.6,topP:.9,topK:40,maxOutputTokens:2048}})).response).text()}}catch(h){console.error("Error generating AI feedback:",h);let d="Error al generar la retroalimentación con IA. Inténtalo de nuevo.";return h instanceof Error&&(d+=` Detalles: ${h.message}`),{feedbackText:d}}}async function T1(r){const{studentName:e,course:i,evaluationDate:a,scores:o,totalScore:h,finalGrade:d,aiFeedback:g,rubricData:y,groundingMetadata:v}=r,A="pdf-report-content-dynamic";let w=document.getElementById(A);w||(w=document.createElement("div"),w.id=A,w.style.position="absolute",w.style.left="-9999px",w.style.width="210mm",w.style.padding="20px",w.style.backgroundColor="white",w.style.color="black",w.style.fontSize="10pt",w.style.fontFamily="Arial, sans-serif",document.body.appendChild(w));let b=`
    <div style="font-family: Arial, sans-serif; font-size: 10pt;">
      <div style="text-align: center; margin-bottom: 20px;">
        <h1 style="font-size: 18pt; font-weight: bold; margin:0;">Liceo Industrial de Recoleta</h1>
        <h2 style="font-size: 14pt; margin:5px 0;">Informe de Evaluación de Presentación Dual</h2>
      </div>
      <div style="margin-bottom: 15px;">
        <p><strong>Nombre del Estudiante:</strong> ${e}</p>
        <p><strong>Curso:</strong> ${i}</p>
        <p><strong>Fecha de Evaluación:</strong> ${a}</p>
      </div>
      <h3 style="font-size: 12pt; font-weight: bold; margin-top: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Resultados de la Evaluación</h3>
      <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 9pt;">
        <thead>
          <tr>
            <th style="border: 1px solid #ddd; padding: 6px; text-align: left; background-color: #f2f2f2;">Indicador</th>
            <th style="border: 1px solid #ddd; padding: 6px; text-align: center; background-color: #f2f2f2;">Puntaje</th>
            <th style="border: 1px solid #ddd; padding: 6px; text-align: left; background-color: #f2f2f2;">Nivel Alcanzado</th>
          </tr>
        </thead>
        <tbody>
  `;y.forEach(G=>{const tt=o[G.id],J=tt?G.levels.find(mt=>mt.points===tt):null;b+=`
          <tr>
            <td style="border: 1px solid #ddd; padding: 6px;">${G.title}</td>
            <td style="border: 1px solid #ddd; padding: 6px; text-align: center;">${tt!==void 0?tt:"N/A"}</td>
            <td style="border: 1px solid #ddd; padding: 6px;">${J?J.levelName:"N/A"}</td>
          </tr>
    `}),b+=`
        </tbody>
      </table>
      <div style="margin-bottom: 20px; font-size: 10pt;">
        <p><strong>Puntaje Total Obtenido:</strong> ${h} de ${y.length*4}</p>
        <p><strong>Nota Final Calculada:</strong> ${d!==null?d.toFixed(1):"N/A"}</p>
      </div>
      <h3 style="font-size: 12pt; font-weight: bold; margin-top: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Retroalimentación de profesores</h3>
      <div style="white-space: pre-wrap; word-wrap: break-word; font-size: 9pt; line-height: 1.5;">${g.replace(/\n/g,"<br/>")}</div>
  `;const B=v==null?void 0:v.groundingAttributions;B&&B.length>0&&(b+=`
      <h3 style="font-size: 12pt; font-weight: bold; margin-top: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Fuentes Consultadas por IA (Google Search)</h3>
    `,v!=null&&v.webSearchQueries&&v.webSearchQueries.length>0&&(b+=`<p style="font-size: 8pt; margin-bottom: 5px;">Consultas: ${v.webSearchQueries.join(", ")}</p>`),b+='<ul style="font-size: 9pt; list-style-type: disc; padding-left: 20px;">',B.forEach(G=>{const tt=G.web||G.retrievedContext;tt&&tt.uri&&(b+=`<li style="margin-bottom: 5px;"><a href="${tt.uri}" target="_blank" style="color: blue; text-decoration: underline;">${tt.title||tt.uri}</a></li>`)}),b+="</ul>"),b+="</div>",w.innerHTML=b;try{const{jsPDF:G}=window.jspdf,J=(await html2canvas(w,{scale:2,useCORS:!0,logging:!1})).toDataURL("image/png"),mt=new G({orientation:"portrait",unit:"mm",format:"a4"}),ut=mt.getImageProperties(J),st=mt.internal.pageSize.getWidth(),Rt=ut.height*st/ut.width;let ht=Rt,wt=0;for(mt.addImage(J,"PNG",0,wt,st,Rt),ht-=mt.internal.pageSize.getHeight();ht>=0;)wt=ht-Rt,mt.addPage(),mt.addImage(J,"PNG",0,wt,st,Rt),ht-=mt.internal.pageSize.getHeight();mt.save(`Informe_${e.replace(/\s+/g,"_")}_${a}.pdf`)}catch(G){console.error("Error generating PDF:",G),alert("Hubo un error al generar el PDF. Revisa la consola para más detalles.")}finally{w&&w.parentElement===document.body&&document.body.removeChild(w)}}const A1=()=>{};var By={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},b1=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=r[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=r[i++],d=r[i++],g=r[i++],y=((o&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const h=r[i++],d=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const h=r[o],d=o+1<r.length,g=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,A=h>>2,w=(h&3)<<4|g>>4;let b=(g&15)<<2|v>>6,B=v&63;y||(B=64,d||(b=64)),a.push(i[A],i[w],i[b],i[B])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(sv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):b1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const h=i[r.charAt(o++)],g=o<r.length?i[r.charAt(o)]:0;++o;const v=o<r.length?i[r.charAt(o)]:64;++o;const w=o<r.length?i[r.charAt(o)]:64;if(++o,h==null||g==null||v==null||w==null)throw new S1;const b=h<<2|g>>4;if(a.push(b),v!==64){const B=g<<4&240|v>>2;if(a.push(B),w!==64){const G=v<<6&192|w;a.push(G)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class S1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R1=function(r){const e=sv(r);return rv.encodeByteArray(e,!0)},ec=function(r){return R1(r).replace(/\./g,"")},w1=function(r){try{return rv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=()=>C1().__FIREBASE_DEFAULTS__,D1=()=>{if(typeof process>"u"||typeof By>"u")return;const r=By.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},N1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&w1(r[1]);return e&&JSON.parse(e)},yd=()=>{try{return A1()||x1()||D1()||N1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},I1=r=>{var e,i;return(i=(e=yd())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[r]},O1=r=>{const e=I1(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},av=()=>{var r;return(r=yd())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M1(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ec(JSON.stringify(i)),ec(JSON.stringify(d)),""].join(".")}const Kl={};function U1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Kl))Kl[e]?r.emulator.push(e):r.prod.push(e);return r}function P1(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let ky=!1;function j1(r,e){if(typeof window>"u"||typeof document>"u"||!_d(window.location.host)||Kl[r]===e||Kl[r]||ky)return;Kl[r]=e;function i(b){return`__firebase__banner__${b}`}const a="__firebase__banner",h=U1().prod.length>0;function d(){const b=document.getElementById(a);b&&b.remove()}function g(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function y(b,B){b.setAttribute("width","24"),b.setAttribute("id",B),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function v(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{ky=!0,d()},b}function A(b,B){b.setAttribute("id",B),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function w(){const b=P1(a),B=i("text"),G=document.getElementById(B)||document.createElement("span"),tt=i("learnmore"),J=document.getElementById(tt)||document.createElement("a"),mt=i("preprendIcon"),ut=document.getElementById(mt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const st=b.element;g(st),A(J,tt);const Rt=v();y(ut,mt),st.append(ut,G,J,Rt),document.body.appendChild(st)}h?(G.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B1(){var r;const e=(r=yd())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k1(){return!B1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q1(){try{return typeof indexedDB=="object"}catch{return!1}}function H1(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var h;e(((h=o.error)===null||h===void 0?void 0:h.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="FirebaseError";class xa extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=G1,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lv.prototype.create)}}class lv{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?F1(h,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new xa(o,g,a)}}function F1(r,e){return r.replace(Y1,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Y1=/\{\$([^}]+)}/g;function nc(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=r[o],d=e[o];if(qy(h)&&qy(d)){if(!nc(h,d))return!1}else if(h!==d)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function qy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(r){return r&&r._delegate?r._delegate:r}class eo{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new V1;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X1(e))try{this.getOrInitializeService({instanceIdentifier:hr})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hr){return this.instances.has(e)}getOptions(e=hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&d.resolve(o)}return o}onInit(e,i){var a;const o=this.normalizeInstanceIdentifier(i),h=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;h.add(e),this.onInitCallbacks.set(o,h);const d=this.instances.get(o);return d&&e(d,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:K1(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=hr){return this.component?this.component.multipleInstances?e:hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K1(r){return r===hr?void 0:r}function X1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new Q1(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pt||(Pt={}));const Z1={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},J1=Pt.INFO,W1={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},tA=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=W1[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ov{constructor(e){this.name=e,this._logLevel=J1,this._logHandler=tA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const eA=(r,e)=>e.some(i=>r instanceof i);let Hy,Gy;function nA(){return Hy||(Hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iA(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uv=new WeakMap,Qf=new WeakMap,cv=new WeakMap,jf=new WeakMap,vd=new WeakMap;function sA(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(ps(r.result)),o()},d=()=>{a(r.error),o()};r.addEventListener("success",h),r.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&uv.set(i,r)}).catch(()=>{}),vd.set(e,r),e}function rA(r){if(Qf.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});Qf.set(r,e)}let Kf={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return Qf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cv.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ps(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function aA(r){Kf=r(Kf)}function lA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(zf(this),e,...i);return cv.set(a,e.sort?e.sort():[e]),ps(a)}:iA().includes(r)?function(...e){return r.apply(zf(this),e),ps(uv.get(this))}:function(...e){return ps(r.apply(zf(this),e))}}function oA(r){return typeof r=="function"?lA(r):(r instanceof IDBTransaction&&rA(r),eA(r,nA())?new Proxy(r,Kf):r)}function ps(r){if(r instanceof IDBRequest)return sA(r);if(jf.has(r))return jf.get(r);const e=oA(r);return e!==r&&(jf.set(r,e),vd.set(e,r)),e}const zf=r=>vd.get(r);function uA(r,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const d=indexedDB.open(r,e),g=ps(d);return a&&d.addEventListener("upgradeneeded",y=>{a(ps(d.result),y.oldVersion,y.newVersion,ps(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{h&&y.addEventListener("close",()=>h()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const cA=["get","getKey","getAll","getAllKeys","count"],hA=["put","add","delete","clear"],Bf=new Map;function Fy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Bf.get(e))return Bf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=hA.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||cA.includes(i)))return;const h=async function(d,...g){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return a&&(v=v.index(g.shift())),(await Promise.all([v[i](...g),o&&y.done]))[0]};return Bf.set(e,h),h}aA(r=>({...r,get:(e,i,a)=>Fy(e,i)||r.get(e,i,a),has:(e,i)=>!!Fy(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(dA(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function dA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xf="@firebase/app",Yy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new ov("@firebase/app"),mA="@firebase/app-compat",gA="@firebase/analytics-compat",pA="@firebase/analytics",yA="@firebase/app-check-compat",_A="@firebase/app-check",vA="@firebase/auth",EA="@firebase/auth-compat",TA="@firebase/database",AA="@firebase/data-connect",bA="@firebase/database-compat",SA="@firebase/functions",RA="@firebase/functions-compat",wA="@firebase/installations",CA="@firebase/installations-compat",xA="@firebase/messaging",DA="@firebase/messaging-compat",NA="@firebase/performance",IA="@firebase/performance-compat",OA="@firebase/remote-config",VA="@firebase/remote-config-compat",MA="@firebase/storage",LA="@firebase/storage-compat",UA="@firebase/firestore",PA="@firebase/ai",jA="@firebase/firestore-compat",zA="firebase",BA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]",kA={[Xf]:"fire-core",[mA]:"fire-core-compat",[pA]:"fire-analytics",[gA]:"fire-analytics-compat",[_A]:"fire-app-check",[yA]:"fire-app-check-compat",[vA]:"fire-auth",[EA]:"fire-auth-compat",[TA]:"fire-rtdb",[AA]:"fire-data-connect",[bA]:"fire-rtdb-compat",[SA]:"fire-fn",[RA]:"fire-fn-compat",[wA]:"fire-iid",[CA]:"fire-iid-compat",[xA]:"fire-fcm",[DA]:"fire-fcm-compat",[NA]:"fire-perf",[IA]:"fire-perf-compat",[OA]:"fire-rc",[VA]:"fire-rc-compat",[MA]:"fire-gcs",[LA]:"fire-gcs-compat",[UA]:"fire-fst",[jA]:"fire-fst-compat",[PA]:"fire-vertex","fire-js":"fire-js",[zA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,qA=new Map,Zf=new Map;function Qy(r,e){try{r.container.addComponent(e)}catch(i){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function sc(r){const e=r.name;if(Zf.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Zf.set(e,r);for(const i of ic.values())Qy(i,r);for(const i of qA.values())Qy(i,r);return!0}function HA(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function GA(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new lv("app","Firebase",FA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=BA;function hv(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a=Object.assign({name:$f,automaticDataCollectionEnabled:!0},e),o=a.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(i||(i=av()),!i)throw ys.create("no-options");const h=ic.get(o);if(h){if(nc(i,h.options)&&nc(a,h.config))return h;throw ys.create("duplicate-app",{appName:o})}const d=new $1(o);for(const y of Zf.values())d.addComponent(y);const g=new YA(i,a,d);return ic.set(o,g),g}function KA(r=$f){const e=ic.get(r);if(!e&&r===$f&&av())return hv();if(!e)throw ys.create("no-app",{appName:r});return e}function _a(r,e,i){var a;let o=(a=kA[r])!==null&&a!==void 0?a:r;i&&(o+=`-${i}`);const h=o.match(/\s|\//),d=e.match(/\s|\//);if(h||d){const g=[`Unable to register library "${o}" with version "${e}":`];h&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(g.join(" "));return}sc(new eo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firebase-heartbeat-database",$A=1,no="firebase-heartbeat-store";let kf=null;function fv(){return kf||(kf=uA(XA,$A,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(no)}catch(i){console.warn(i)}}}}).catch(r=>{throw ys.create("idb-open",{originalErrorMessage:r.message})})),kf}async function ZA(r){try{const i=(await fv()).transaction(no),a=await i.objectStore(no).get(dv(r));return await i.done,a}catch(e){if(e instanceof xa)Ui.warn(e.message);else{const i=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(i.message)}}}async function Ky(r,e){try{const a=(await fv()).transaction(no,"readwrite");await a.objectStore(no).put(e,dv(r)),await a.done}catch(i){if(i instanceof xa)Ui.warn(i.message);else{const a=ys.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Ui.warn(a.message)}}}function dv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1024,WA=30;class tb{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new nb(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Xy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(d=>d.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:o}),this._heartbeatsCache.heartbeats.length>WA){const d=ib(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ui.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Xy(),{heartbeatsToSend:a,unsentEntries:o}=eb(this._heartbeatsCache.heartbeats),h=ec(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(i){return Ui.warn(i),""}}}function Xy(){return new Date().toISOString().substring(0,10)}function eb(r,e=JA){const i=[];let a=r.slice();for(const o of r){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),$y(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),$y(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class nb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q1()?H1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await ZA(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $y(r){return ec(JSON.stringify({version:2,heartbeats:r})).length}function ib(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(r){sc(new eo("platform-logger",e=>new fA(e),"PRIVATE")),sc(new eo("heartbeat",e=>new tb(e),"PRIVATE")),_a(Xf,Yy,r),_a(Xf,Yy,"esm2017"),_a("fire-js","")}sb("");var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,mv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,S){function x(){}x.prototype=S.prototype,V.D=S.prototype,V.prototype=new x,V.prototype.constructor=V,V.C=function(O,M,L){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return S.prototype[M].apply(O,C)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,S,x){x||(x=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(M=0;16>M;++M)O[M]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=V.g[0],x=V.g[1],M=V.g[2];var L=V.g[3],C=S+(L^x&(M^L))+O[0]+3614090360&4294967295;S=x+(C<<7&4294967295|C>>>25),C=L+(M^S&(x^M))+O[1]+3905402710&4294967295,L=S+(C<<12&4294967295|C>>>20),C=M+(x^L&(S^x))+O[2]+606105819&4294967295,M=L+(C<<17&4294967295|C>>>15),C=x+(S^M&(L^S))+O[3]+3250441966&4294967295,x=M+(C<<22&4294967295|C>>>10),C=S+(L^x&(M^L))+O[4]+4118548399&4294967295,S=x+(C<<7&4294967295|C>>>25),C=L+(M^S&(x^M))+O[5]+1200080426&4294967295,L=S+(C<<12&4294967295|C>>>20),C=M+(x^L&(S^x))+O[6]+2821735955&4294967295,M=L+(C<<17&4294967295|C>>>15),C=x+(S^M&(L^S))+O[7]+4249261313&4294967295,x=M+(C<<22&4294967295|C>>>10),C=S+(L^x&(M^L))+O[8]+1770035416&4294967295,S=x+(C<<7&4294967295|C>>>25),C=L+(M^S&(x^M))+O[9]+2336552879&4294967295,L=S+(C<<12&4294967295|C>>>20),C=M+(x^L&(S^x))+O[10]+4294925233&4294967295,M=L+(C<<17&4294967295|C>>>15),C=x+(S^M&(L^S))+O[11]+2304563134&4294967295,x=M+(C<<22&4294967295|C>>>10),C=S+(L^x&(M^L))+O[12]+1804603682&4294967295,S=x+(C<<7&4294967295|C>>>25),C=L+(M^S&(x^M))+O[13]+4254626195&4294967295,L=S+(C<<12&4294967295|C>>>20),C=M+(x^L&(S^x))+O[14]+2792965006&4294967295,M=L+(C<<17&4294967295|C>>>15),C=x+(S^M&(L^S))+O[15]+1236535329&4294967295,x=M+(C<<22&4294967295|C>>>10),C=S+(M^L&(x^M))+O[1]+4129170786&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^M&(S^x))+O[6]+3225465664&4294967295,L=S+(C<<9&4294967295|C>>>23),C=M+(S^x&(L^S))+O[11]+643717713&4294967295,M=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(M^L))+O[0]+3921069994&4294967295,x=M+(C<<20&4294967295|C>>>12),C=S+(M^L&(x^M))+O[5]+3593408605&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^M&(S^x))+O[10]+38016083&4294967295,L=S+(C<<9&4294967295|C>>>23),C=M+(S^x&(L^S))+O[15]+3634488961&4294967295,M=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(M^L))+O[4]+3889429448&4294967295,x=M+(C<<20&4294967295|C>>>12),C=S+(M^L&(x^M))+O[9]+568446438&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^M&(S^x))+O[14]+3275163606&4294967295,L=S+(C<<9&4294967295|C>>>23),C=M+(S^x&(L^S))+O[3]+4107603335&4294967295,M=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(M^L))+O[8]+1163531501&4294967295,x=M+(C<<20&4294967295|C>>>12),C=S+(M^L&(x^M))+O[13]+2850285829&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^M&(S^x))+O[2]+4243563512&4294967295,L=S+(C<<9&4294967295|C>>>23),C=M+(S^x&(L^S))+O[7]+1735328473&4294967295,M=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(M^L))+O[12]+2368359562&4294967295,x=M+(C<<20&4294967295|C>>>12),C=S+(x^M^L)+O[5]+4294588738&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^M)+O[8]+2272392833&4294967295,L=S+(C<<11&4294967295|C>>>21),C=M+(L^S^x)+O[11]+1839030562&4294967295,M=L+(C<<16&4294967295|C>>>16),C=x+(M^L^S)+O[14]+4259657740&4294967295,x=M+(C<<23&4294967295|C>>>9),C=S+(x^M^L)+O[1]+2763975236&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^M)+O[4]+1272893353&4294967295,L=S+(C<<11&4294967295|C>>>21),C=M+(L^S^x)+O[7]+4139469664&4294967295,M=L+(C<<16&4294967295|C>>>16),C=x+(M^L^S)+O[10]+3200236656&4294967295,x=M+(C<<23&4294967295|C>>>9),C=S+(x^M^L)+O[13]+681279174&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^M)+O[0]+3936430074&4294967295,L=S+(C<<11&4294967295|C>>>21),C=M+(L^S^x)+O[3]+3572445317&4294967295,M=L+(C<<16&4294967295|C>>>16),C=x+(M^L^S)+O[6]+76029189&4294967295,x=M+(C<<23&4294967295|C>>>9),C=S+(x^M^L)+O[9]+3654602809&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^M)+O[12]+3873151461&4294967295,L=S+(C<<11&4294967295|C>>>21),C=M+(L^S^x)+O[15]+530742520&4294967295,M=L+(C<<16&4294967295|C>>>16),C=x+(M^L^S)+O[2]+3299628645&4294967295,x=M+(C<<23&4294967295|C>>>9),C=S+(M^(x|~L))+O[0]+4096336452&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~M))+O[7]+1126891415&4294967295,L=S+(C<<10&4294967295|C>>>22),C=M+(S^(L|~x))+O[14]+2878612391&4294967295,M=L+(C<<15&4294967295|C>>>17),C=x+(L^(M|~S))+O[5]+4237533241&4294967295,x=M+(C<<21&4294967295|C>>>11),C=S+(M^(x|~L))+O[12]+1700485571&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~M))+O[3]+2399980690&4294967295,L=S+(C<<10&4294967295|C>>>22),C=M+(S^(L|~x))+O[10]+4293915773&4294967295,M=L+(C<<15&4294967295|C>>>17),C=x+(L^(M|~S))+O[1]+2240044497&4294967295,x=M+(C<<21&4294967295|C>>>11),C=S+(M^(x|~L))+O[8]+1873313359&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~M))+O[15]+4264355552&4294967295,L=S+(C<<10&4294967295|C>>>22),C=M+(S^(L|~x))+O[6]+2734768916&4294967295,M=L+(C<<15&4294967295|C>>>17),C=x+(L^(M|~S))+O[13]+1309151649&4294967295,x=M+(C<<21&4294967295|C>>>11),C=S+(M^(x|~L))+O[4]+4149444226&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~M))+O[11]+3174756917&4294967295,L=S+(C<<10&4294967295|C>>>22),C=M+(S^(L|~x))+O[2]+718787259&4294967295,M=L+(C<<15&4294967295|C>>>17),C=x+(L^(M|~S))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+L&4294967295}a.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var x=S-this.blockSize,O=this.B,M=this.h,L=0;L<S;){if(M==0)for(;L<=x;)o(this,V,L),L+=this.blockSize;if(typeof V=="string"){for(;L<S;)if(O[M++]=V.charCodeAt(L++),M==this.blockSize){o(this,O),M=0;break}}else for(;L<S;)if(O[M++]=V[L++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=S},a.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var x=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=x&255,x/=256;for(this.u(V),V=Array(16),S=x=0;4>S;++S)for(var O=0;32>O;O+=8)V[x++]=this.g[S]>>>O&255;return V};function h(V,S){var x=g;return Object.prototype.hasOwnProperty.call(x,V)?x[V]:x[V]=S(V)}function d(V,S){this.h=S;for(var x=[],O=!0,M=V.length-1;0<=M;M--){var L=V[M]|0;O&&L==S||(x[M]=L,O=!1)}this.g=x}var g={};function y(V){return-128<=V&&128>V?h(V,function(S){return new d([S|0],0>S?-1:0)}):new d([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return w;if(0>V)return J(v(-V));for(var S=[],x=1,O=0;V>=x;O++)S[O]=V/x|0,x*=4294967296;return new d(S,0)}function A(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return J(A(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=v(Math.pow(S,8)),O=w,M=0;M<V.length;M+=8){var L=Math.min(8,V.length-M),C=parseInt(V.substring(M,M+L),S);8>L?(L=v(Math.pow(S,L)),O=O.j(L).add(v(C))):(O=O.j(x),O=O.add(v(C)))}return O}var w=y(0),b=y(1),B=y(16777216);r=d.prototype,r.m=function(){if(tt(this))return-J(this).m();for(var V=0,S=1,x=0;x<this.g.length;x++){var O=this.i(x);V+=(0<=O?O:4294967296+O)*S,S*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(G(this))return"0";if(tt(this))return"-"+J(this).toString(V);for(var S=v(Math.pow(V,6)),x=this,O="";;){var M=Rt(x,S).g;x=mt(x,M.j(S));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(V);if(x=M,G(x))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function G(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function tt(V){return V.h==-1}r.l=function(V){return V=mt(this,V),tt(V)?-1:G(V)?0:1};function J(V){for(var S=V.g.length,x=[],O=0;O<S;O++)x[O]=~V.g[O];return new d(x,~V.h).add(b)}r.abs=function(){return tt(this)?J(this):this},r.add=function(V){for(var S=Math.max(this.g.length,V.g.length),x=[],O=0,M=0;M<=S;M++){var L=O+(this.i(M)&65535)+(V.i(M)&65535),C=(L>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);O=C>>>16,L&=65535,C&=65535,x[M]=C<<16|L}return new d(x,x[x.length-1]&-2147483648?-1:0)};function mt(V,S){return V.add(J(S))}r.j=function(V){if(G(this)||G(V))return w;if(tt(this))return tt(V)?J(this).j(J(V)):J(J(this).j(V));if(tt(V))return J(this.j(J(V)));if(0>this.l(B)&&0>V.l(B))return v(this.m()*V.m());for(var S=this.g.length+V.g.length,x=[],O=0;O<2*S;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<V.g.length;M++){var L=this.i(O)>>>16,C=this.i(O)&65535,Ae=V.i(M)>>>16,ee=V.i(M)&65535;x[2*O+2*M]+=C*ee,ut(x,2*O+2*M),x[2*O+2*M+1]+=L*ee,ut(x,2*O+2*M+1),x[2*O+2*M+1]+=C*Ae,ut(x,2*O+2*M+1),x[2*O+2*M+2]+=L*Ae,ut(x,2*O+2*M+2)}for(O=0;O<S;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=S;O<2*S;O++)x[O]=0;return new d(x,0)};function ut(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function st(V,S){this.g=V,this.h=S}function Rt(V,S){if(G(S))throw Error("division by zero");if(G(V))return new st(w,w);if(tt(V))return S=Rt(J(V),S),new st(J(S.g),J(S.h));if(tt(S))return S=Rt(V,J(S)),new st(J(S.g),S.h);if(30<V.g.length){if(tt(V)||tt(S))throw Error("slowDivide_ only works with positive integers.");for(var x=b,O=S;0>=O.l(V);)x=ht(x),O=ht(O);var M=wt(x,1),L=wt(O,1);for(O=wt(O,2),x=wt(x,2);!G(O);){var C=L.add(O);0>=C.l(V)&&(M=M.add(x),L=C),O=wt(O,1),x=wt(x,1)}return S=mt(V,M.j(S)),new st(M,S)}for(M=w;0<=V.l(S);){for(x=Math.max(1,Math.floor(V.m()/S.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=v(x),C=L.j(S);tt(C)||0<C.l(V);)x-=O,L=v(x),C=L.j(S);G(L)&&(L=b),M=M.add(L),V=mt(V,C)}return new st(M,V)}r.A=function(V){return Rt(this,V).h},r.and=function(V){for(var S=Math.max(this.g.length,V.g.length),x=[],O=0;O<S;O++)x[O]=this.i(O)&V.i(O);return new d(x,this.h&V.h)},r.or=function(V){for(var S=Math.max(this.g.length,V.g.length),x=[],O=0;O<S;O++)x[O]=this.i(O)|V.i(O);return new d(x,this.h|V.h)},r.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),x=[],O=0;O<S;O++)x[O]=this.i(O)^V.i(O);return new d(x,this.h^V.h)};function ht(V){for(var S=V.g.length+1,x=[],O=0;O<S;O++)x[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(x,V.h)}function wt(V,S){var x=S>>5;S%=32;for(var O=V.g.length-x,M=[],L=0;L<O;L++)M[L]=0<S?V.i(L+x)>>>S|V.i(L+x+1)<<32-S:V.i(L+x);return new d(M,V.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,mv=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=A,_s=d}).apply(typeof Zy<"u"?Zy:typeof self<"u"?self:typeof window<"u"?window:{});var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gv,Gl,pv,Xu,Jf,yv,_v,vv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,p){return u==Array.prototype||u==Object.prototype||(u[m]=p.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qu=="object"&&qu];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var p=a;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in p))break t;p=p[P]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&e(p,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var p=0,T=!1,P={next:function(){if(!T&&p<u.length){var H=p++;return{value:m(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}o("Array.prototype.values",function(u){return u||function(){return h(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,p){return u.call.apply(u.bind,arguments)}function w(u,m,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,T),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function b(u,m,p){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:w,b.apply(null,arguments)}function B(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function G(u,m){function p(){}p.prototype=m.prototype,u.aa=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,P,H){for(var nt=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)nt[Vt-2]=arguments[Vt];return m.prototype[P].apply(T,nt)}}function tt(u){const m=u.length;if(0<m){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function J(u,m){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(y(T)){const P=u.length||0,H=T.length||0;u.length=P+H;for(let nt=0;nt<H;nt++)u[P+nt]=T[nt]}else u.push(T)}}class mt{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ut(u){return/^[\s\xa0]*$/.test(u)}function st(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Rt(u){return Rt[" "](u),u}Rt[" "]=function(){};var ht=st().indexOf("Gecko")!=-1&&!(st().toLowerCase().indexOf("webkit")!=-1&&st().indexOf("Edge")==-1)&&!(st().indexOf("Trident")!=-1||st().indexOf("MSIE")!=-1)&&st().indexOf("Edge")==-1;function wt(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function V(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function S(u){const m={};for(const p in u)m[p]=u[p];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let p,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(p in T)u[p]=T[p];for(let H=0;H<x.length;H++)p=x[H],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function M(u){var m=1;u=u.split(":");const p=[];for(;0<m&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function L(u){g.setTimeout(()=>{throw u},0)}function C(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ae{constructor(){this.h=this.g=null}add(m,p){const T=ee.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var ee=new mt(()=>new F,u=>u.reset());class F{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ot=!1,jt=new Ae,D=()=>{const u=g.Promise.resolve(void 0);et=()=>{u.then(Z)}};var Z=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(p){L(p)}var m=ee;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ot=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};g.addEventListener("test",p,m),g.removeEventListener("test",p,m)}catch{}return u}();function bt(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ht){t:{try{Rt(m.nodeName);var P=!0;break t}catch{}P=!1}P||(m=null)}}else p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&bt.aa.h.call(this)}}G(bt,W);var vt={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),gt=0;function ue(u,m,p,T,P){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=P,this.key=++gt,this.da=this.fa=!1}function zn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ui(u){this.src=u,this.g={},this.h=0}ui.prototype.add=function(u,m,p,T,P){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var nt=Ds(u,m,T,P);return-1<nt?(m=u[nt],p||(m.fa=!1)):(m=new ue(m,this.src,H,!!T,P),m.fa=p,u.push(m)),m};function xs(u,m){var p=m.type;if(p in u.g){var T=u.g[p],P=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=P)&&Array.prototype.splice.call(T,P,1),H&&(zn(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Ds(u,m,p,T){for(var P=0;P<u.length;++P){var H=u[P];if(!H.da&&H.listener==m&&H.capture==!!p&&H.ha==T)return P}return-1}var Ns="closure_lm_"+(1e6*Math.random()|0),Ma={};function _o(u,m,p,T,P){if(Array.isArray(m)){for(var H=0;H<m.length;H++)_o(u,m[H],p,T,P);return null}return p=vo(p),u&&u[me]?u.K(m,p,v(T)?!!T.capture:!1,P):pn(u,m,p,!1,T,P)}function pn(u,m,p,T,P,H){if(!m)throw Error("Invalid event type");var nt=v(P)?!!P.capture:!!P,Vt=Ar(u);if(Vt||(u[Ns]=Vt=new ui(u)),p=Vt.add(m,p,T,nt,H),p.proxy)return p;if(T=Nc(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)ft||(P=nt),P===void 0&&(P=!1),u.addEventListener(m.toString(),T,P);else if(u.attachEvent)u.attachEvent(Is(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Nc(){function u(p){return m.call(u.src,u.listener,p)}const m=Ic;return u}function La(u,m,p,T,P){if(Array.isArray(m))for(var H=0;H<m.length;H++)La(u,m[H],p,T,P);else T=v(T)?!!T.capture:!!T,p=vo(p),u&&u[me]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],p=Ds(H,p,T,P),-1<p&&(zn(H[p]),Array.prototype.splice.call(H,p,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ar(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ds(m,p,T,P)),(p=-1<u?m[u]:null)&&Tr(p))}function Tr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[me])xs(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent(Is(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=Ar(m))?(xs(p,u),p.h==0&&(p.src=null,m[Ns]=null)):zn(u)}}}function Is(u){return u in Ma?Ma[u]:Ma[u]="on"+u}function Ic(u,m){if(u.da)u=!0;else{m=new bt(m,this);var p=u.listener,T=u.ha||u.src;u.fa&&Tr(u),u=p.call(T,m)}return u}function Ar(u){return u=u[Ns],u instanceof ui?u:null}var Ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function vo(u){return typeof u=="function"?u:(u[Ua]||(u[Ua]=function(m){return u.handleEvent(m)}),u[Ua])}function ae(){it.call(this),this.i=new ui(this),this.M=this,this.F=null}G(ae,it),ae.prototype[me]=!0,ae.prototype.removeEventListener=function(u,m,p,T){La(this,u,m,p,T)};function Ht(u,m){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var P=m;m=new W(T,u),O(m,P)}if(P=!0,p)for(var H=p.length-1;0<=H;H--){var nt=m.g=p[H];P=ln(nt,T,!0,m)&&P}if(nt=m.g=u,P=ln(nt,T,!0,m)&&P,P=ln(nt,T,!1,m)&&P,p)for(H=0;H<p.length;H++)nt=m.g=p[H],P=ln(nt,T,!1,m)&&P}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var p=u.g[m],T=0;T<p.length;T++)zn(p[T]);delete u.g[m],u.h--}}this.F=null},ae.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},ae.prototype.L=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function ln(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,H=0;H<m.length;++H){var nt=m[H];if(nt&&!nt.da&&nt.capture==p){var Vt=nt.listener,Se=nt.ha||nt.src;nt.fa&&xs(u.i,nt),P=Vt.call(Se,T)!==!1&&P}}return P&&!T.defaultPrevented}function Fe(u,m,p){if(typeof u=="function")p&&(u=b(u,p));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Eo(u){u.g=Fe(()=>{u.g=null,u.i&&(u.i=!1,Eo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Oc extends it{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Eo(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(u){it.call(this),this.h=u,this.g={}}G(Os,it);var Vs=[];function Ms(u){wt(u.g,function(m,p){this.g.hasOwnProperty(p)&&Tr(m)},u),u.g={}}Os.prototype.N=function(){Os.aa.N.call(this),Ms(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=g.JSON.stringify,br=g.JSON.parse,Ls=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function Pa(){}Pa.prototype.h=null;function ja(u){return u.h||(u.h=u.i())}function za(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){W.call(this,"d")}G(hi,W);function Ba(){W.call(this,"c")}G(Ba,W);var Bn={},ka=null;function zi(){return ka=ka||new ae}Bn.La="serverreachability";function Sr(u){W.call(this,Bn.La,u)}G(Sr,W);function Bi(u){const m=zi();Ht(m,new Sr(m))}Bn.STAT_EVENT="statevent";function To(u,m){W.call(this,Bn.STAT_EVENT,u),this.stat=m}G(To,W);function ne(u){const m=zi();Ht(m,new To(m,u))}Bn.Ma="timingevent";function be(u,m){W.call(this,Bn.Ma,u),this.size=m}G(be,W);function ge(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function qa(u,m,p,T,P,H){u.info(function(){if(u.g)if(H)for(var nt="",Vt=H.split("&"),Se=0;Se<Vt.length;Se++){var Mt=Vt[Se].split("=");if(1<Mt.length){var Ne=Mt[0];Mt=Mt[1];var Re=Ne.split("_");nt=2<=Re.length&&Re[1]=="type"?nt+(Ne+"="+Mt+"&"):nt+(Ne+"=redacted&")}}else nt=null;else nt=H;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+p+`
`+nt})}function Vc(u,m,p,T,P,H,nt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+p+`
`+H+" "+nt})}function ki(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Us(u,p)+(T?" "+T:"")})}function Ao(u,m){u.info(function(){return"TIMEOUT: "+m})}yn.prototype.info=function(){};function Us(u,m){if(!u.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var P=T[1];if(Array.isArray(P)&&!(1>P.length)){var H=P[0];if(H!="noop"&&H!="stop"&&H!="close")for(var nt=1;nt<P.length;nt++)P[nt]=""}}}}return In(p)}catch{return m}}var qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function qn(){}G(qn,Pa),qn.prototype.g=function(){return new XMLHttpRequest},qn.prototype.i=function(){return{}},kn=new qn;function Je(u,m,p,T){this.j=u,this.i=m,this.l=p,this.R=T||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var Ha={},Rr={};function On(u,m,p){u.L=1,u.v=ks(on(m)),u.m=p,u.P=!0,di(u,null)}function di(u,m){u.F=Date.now(),Ps(u),u.A=on(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Xa(p.i,"t",T),u.C=0,p=u.j.J,u.h=new ce,u.g=jo(u.j,p?m:null,!u.m),0<u.O&&(u.M=new Oc(b(u.Y,u,u.g),u.O)),m=u.U,p=u.g,T=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(Vs[0]=P.toString()),P=Vs);for(var H=0;H<P.length;H++){var nt=_o(p,P[H],T||m.handleEvent,!1,m.h||m);if(!nt)break;m.g[nt.key]=nt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Bi(),qa(u.i,u.u,u.A,u.l,u.R,u.m)}Je.prototype.ca=function(u){u=u.target;const m=this.M;m&&Tn(u)==3?m.j():this.Y(u)},Je.prototype.Y=function(u){try{if(u==this.g)t:{const Re=Tn(this.g);var m=this.g.Ba();const Ti=this.g.Z();if(!(3>Re)&&(Re!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||Re!=4||m==7||(m==8||0>=Ti?Bi(3):Bi(2)),Hi(this);var p=this.g.Z();this.X=p;e:if(bo(this)){var T=No(this.g);u="";var P=T.length,H=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),Hn(this);var nt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(H&&m==P-1)});T.length=0,this.h.g+=u,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=p==200,Vc(this.i,this.u,this.A,this.l,this.R,Re,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Vt,Se=this.g;if((Vt=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ut(Vt)){var Mt=Vt;break e}}Mt=null}if(p=Mt)ki(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,js(this,p);else{this.o=!1,this.s=3,ne(12),Pe(this),Hn(this);break t}}if(this.P){p=!0;let je;for(;!this.J&&this.C<nt.length;)if(je=So(this,nt),je==Rr){Re==4&&(this.s=4,ne(14),p=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(je==Ha){this.s=4,ne(15),ki(this.i,this.l,nt,"[Invalid Chunk]"),p=!1;break}else ki(this.i,this.l,je,null),js(this,je);if(bo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||nt.length!=0||this.h.h||(this.s=1,ne(16),p=!1),this.o=this.o&&p,!p)ki(this.i,this.l,nt,"[Invalid Chunked Response]"),Pe(this),Hn(this);else if(0<nt.length&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.ba&&!Ne.M&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),Xs(Ne),Ne.M=!0,ne(11))}}else ki(this.i,this.l,nt,null),js(this,nt);Re==4&&Pe(this),this.o&&!this.J&&(Re==4?Lo(this.j,this):(this.o=!1,Ps(this)))}else jc(this.g),p==400&&0<nt.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Pe(this),Hn(this)}}}catch{}finally{}};function bo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function So(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Rr:(p=Number(m.substring(p,T)),isNaN(p)?Ha:(T+=1,T+p>m.length?Rr:(m=m.slice(T,T+p),u.C=T+p,m)))}Je.prototype.cancel=function(){this.J=!0,Pe(this)};function Ps(u){u.S=Date.now()+u.I,Ro(u,u.I)}function Ro(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ge(b(u.ba,u),m)}function Hi(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Je.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ao(this.i,this.A),this.L!=2&&(Bi(),ne(17)),Pe(this),this.s=2,Hn(this)):Ro(this,this.S-u)};function Hn(u){u.j.G==0||u.J||Lo(u.j,u)}function Pe(u){Hi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ms(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function js(u,m){try{var p=u.j;if(p.G!=0&&(p.g==u||Ga(p.h,u))){if(!u.K&&Ga(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Pr(p),Lr(p);else break t;tl(p),ne(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=ge(b(p.Za,p),6e3));if(1>=Cr(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ei(p,11)}else if((u.K||p.g==u)&&Pr(p),!ut(m))for(P=p.Da.g.parse(m),m=0;m<P.length;m++){let Mt=P[m];if(p.T=Mt[0],Mt=Mt[1],p.G==2)if(Mt[0]=="c"){p.K=Mt[1],p.ia=Mt[2];const Ne=Mt[3];Ne!=null&&(p.la=Ne,p.j.info("VER="+p.la));const Re=Mt[4];Re!=null&&(p.Aa=Re,p.j.info("SVER="+p.Aa));const Ti=Mt[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(T=1.5*Ti,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const je=u.g;if(je){const $n=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var H=T.h;H.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(xr(H,H.h),H.h=null))}if(T.D){const nl=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(T.ya=nl,Yt(T.I,T.D,nl))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var nt=u;if(T.qa=Po(T,T.J?T.ia:null,T.W),nt.K){We(T.h,nt);var Vt=nt,Se=T.L;Se&&(Vt.I=Se),Vt.B&&(Hi(Vt),Ps(Vt)),T.g=nt}else Vo(T);0<p.i.length&&Ur(p)}else Mt[0]!="stop"&&Mt[0]!="close"||Ei(p,7);else p.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ei(p,7):Ja(p):Mt[0]!="noop"&&p.l&&p.l.ta(Mt),p.v=0)}}Bi(4)}catch{}}var wo=class{constructor(u,m){this.g=u,this.map=m}};function mi(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cr(u){return u.h?1:u.g?u.g.size:0}function Ga(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function xr(u,m){u.g?u.g.add(m):u.h=m}function We(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}mi.prototype.cancel=function(){if(this.i=Fa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Fa(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.D);return m}return tt(u.i)}function Mc(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],p=u.length,T=0;T<p;T++)m.push(u[T]);return m}m=[],p=0;for(T in u)m[p++]=u[T];return m}function Dr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var p=0;p<u;p++)m.push(p);return m}m=[],p=0;for(const T in u)m[p++]=T;return m}}}function Ya(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var p=Dr(u),T=Mc(u),P=T.length,H=0;H<P;H++)m.call(void 0,T[H],p&&p[H],u)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lc(u,m){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),P=null;if(0<=T){var H=u[p].substring(0,T);P=u[p].substring(T+1)}else H=u[p];m(H,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function pe(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pe){this.h=u.h,Bs(this,u.j),this.o=u.o,this.g=u.g,Gi(this,u.s),this.l=u.l;var m=u.i,p=new pi;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),gi(this,p),this.m=u.m}else u&&(m=String(u).match(zs))?(this.h=!1,Bs(this,m[1]||"",!0),this.o=_n(m[2]||""),this.g=_n(m[3]||"",!0),Gi(this,m[4]),this.l=_n(m[5]||"",!0),gi(this,m[6]||"",!0),this.m=_n(m[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}pe.prototype.toString=function(){var u=[],m=this.j;m&&u.push(qs(m,Qa,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(qs(m,Qa,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(qs(p,p.charAt(0)=="/"?Uc:Ka,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",qs(p,Nr)),u.join("")};function on(u){return new pe(u)}function Bs(u,m,p){u.j=p?_n(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Gi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function gi(u,m,p){m instanceof pi?(u.i=m,xo(u.i,u.h)):(p||(m=qs(m,Pc)),u.i=new pi(m,u.h))}function Yt(u,m,p){u.i.set(m,p)}function ks(u){return Yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function _n(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qs(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,Co),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Co(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qa=/[#\/\?@]/g,Ka=/[#\?:]/g,Uc=/[#\?]/g,Pc=/[#\?@]/g,Nr=/#/g;function pi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vn(u){u.g||(u.g=new Map,u.h=0,u.i&&Lc(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}r=pi.prototype,r.add=function(u,m){vn(this),this.i=null,u=Gn(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function yi(u,m){vn(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function _i(u,m){return vn(u),m=Gn(u,m),u.g.has(m)}r.forEach=function(u,m){vn(this),this.g.forEach(function(p,T){p.forEach(function(P){u.call(m,P,T,this)},this)},this)},r.na=function(){vn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let T=0;T<m.length;T++){const P=u[T];for(let H=0;H<P.length;H++)p.push(m[T])}return p},r.V=function(u){vn(this);let m=[];if(typeof u=="string")_i(this,u)&&(m=m.concat(this.g.get(Gn(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)m=m.concat(u[p])}return m},r.set=function(u,m){return vn(this),this.i=null,u=Gn(this,u),_i(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Xa(u,m,p){yi(u,m),0<p.length&&(u.i=null,u.g.set(Gn(u,m),tt(p)),u.h+=p.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var T=m[p];const H=encodeURIComponent(String(T)),nt=this.V(T);for(T=0;T<nt.length;T++){var P=H;nt[T]!==""&&(P+="="+encodeURIComponent(String(nt[T]))),u.push(P)}}return this.i=u.join("&")};function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function xo(u,m){m&&!u.j&&(vn(u),u.i=null,u.g.forEach(function(p,T){var P=T.toLowerCase();T!=P&&(yi(this,T),Xa(this,P,p))},u)),u.j=m}function Hs(u,m){const p=new yn;if(g.Image){const T=new Image;T.onload=B(En,p,"TestLoadImage: loaded",!0,m,T),T.onerror=B(En,p,"TestLoadImage: error",!1,m,T),T.onabort=B(En,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=B(En,p,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Vn(u,m){const p=new yn,T=new AbortController,P=setTimeout(()=>{T.abort(),En(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(P),H.ok?En(p,"TestPingServer: ok",!0,m):En(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),En(p,"TestPingServer: error",!1,m)})}function En(u,m,p,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(p)}catch{}}function Gs(){this.g=new Ls}function Fn(u,m,p){const T=p||"";try{Ya(u,function(P,H){let nt=P;v(P)&&(nt=In(P)),m.push(T+H+"="+encodeURIComponent(nt))})}catch(P){throw m.push(T+"type="+encodeURIComponent("_badmap")),P}}function Fi(u){this.l=u.Ub||null,this.j=u.eb||!1}G(Fi,Pa),Fi.prototype.g=function(){return new vi(this.l,this.j)},Fi.prototype.i=function(u){return function(){return u}}({});function vi(u,m){ae.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(vi,ae),r=vi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Qn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$a(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $a(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Yn(this):Qn(this),this.readyState==3&&$a(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Yn(this))},r.Qa=function(u){this.g&&(this.response=u,Yn(this))},r.ga=function(){this.g&&Yn(this)};function Yn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Qn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function Qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Za(u){let m="";return wt(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function De(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=Za(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Yt(u,m,p))}function kt(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(kt,ae);var Ir=/^https?$/i,Fs=["POST","PUT"];r=kt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?ja(this.o):ja(kn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Do(this,H);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)p.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())p.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(H=>H.toLowerCase()=="content-type"),P=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Fs,m,void 0))||T||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,nt]of p)this.g.setRequestHeader(H,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ys(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Do(this,H)}};function Do(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Or(u),Kn(u)}function Or(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),Kn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),kt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Vr(this):this.bb())},r.bb=function(){Vr(this)};function Vr(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)Fe(u.Ea,0,u);else if(Ht(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const nt=u.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=nt===0){var P=String(u.D).match(zs)[1]||null;!P&&g.self&&g.self.location&&(P=g.self.location.protocol.slice(0,-1)),T=!Ir.test(P?P.toLowerCase():"")}p=T}if(p)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var H=2<Tn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Or(u)}}finally{Kn(u)}}}}function Kn(u,m){if(u.g){Ys(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{p.onreadystatechange=T}catch{}}}function Ys(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),br(m)}};function No(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function jc(u){const m={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ut(u[T]))continue;var p=M(u[T]);const P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const H=m[P]||[];m[P]=H,H.push(p)}V(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function Mr(u){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,u),this.cb=Qs("retryDelaySeedMs",1e4,u),this.Wa=Qs("forwardChannelMaxRetries",2,u),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(u&&u.concurrentRequestLimit),this.Da=new Gs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Mr.prototype,r.la=8,r.G=1,r.connect=function(u,m,p,T){ne(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=Po(this,null,this.W),Ur(this)};function Ja(u){if(Io(u),u.G==3){var m=u.U++,p=on(u.I);if(Yt(p,"SID",u.K),Yt(p,"RID",m),Yt(p,"TYPE","terminate"),Ks(u,p),m=new Je(u,u.j,m),m.L=2,m.v=ks(on(p)),p=!1,g.navigator&&g.navigator.sendBeacon)try{p=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&g.Image&&(new Image().src=m.v,p=!0),p||(m.g=jo(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ps(m)}Uo(u)}function Lr(u){u.g&&(Xs(u),u.g.cancel(),u.g=null)}function Io(u){Lr(u),u.u&&(g.clearTimeout(u.u),u.u=null),Pr(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Ur(u){if(!wr(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||D(),ot||(et(),ot=!0),jt.add(m,u),u.B=0}}function zc(u,m){return Cr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ge(b(u.Ga,u,m),el(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new Je(this,this.j,u);let H=this.o;if(this.S&&(H?(H=S(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(P.H=H,H=null),this.P)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=Oo(this,P,m),p=on(this.I),Yt(p,"RID",u),Yt(p,"CVER",22),this.D&&Yt(p,"X-HTTP-Session-Id",this.D),Ks(this,p),H&&(this.O?m="headers="+encodeURIComponent(String(Za(H)))+"&"+m:this.m&&De(p,this.m,H)),xr(this.h,P),this.Ua&&Yt(p,"TYPE","init"),this.P?(Yt(p,"$req",m),Yt(p,"SID","null"),P.T=!0,On(P,p,null)):On(P,p,m),this.G=2}}else this.G==3&&(u?Wa(this,u):this.i.length==0||wr(this.h)||Wa(this))};function Wa(u,m){var p;m?p=m.l:p=u.U++;const T=on(u.I);Yt(T,"SID",u.K),Yt(T,"RID",p),Yt(T,"AID",u.T),Ks(u,T),u.m&&u.o&&De(T,u.m,u.o),p=new Je(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Oo(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xr(u.h,p),On(p,T,m)}function Ks(u,m){u.H&&wt(u.H,function(p,T){Yt(m,T,p)}),u.l&&Ya({},function(p,T){Yt(m,T,p)})}function Oo(u,m,p){p=Math.min(u.i.length,p);var T=u.l?b(u.l.Na,u.l,u):null;t:{var P=u.i;let H=-1;for(;;){const nt=["count="+p];H==-1?0<p?(H=P[0].g,nt.push("ofs="+H)):H=0:nt.push("ofs="+H);let Vt=!0;for(let Se=0;Se<p;Se++){let Mt=P[Se].g;const Ne=P[Se].map;if(Mt-=H,0>Mt)H=Math.max(0,P[Se].g-100),Vt=!1;else try{Fn(Ne,nt,"req"+Mt+"_")}catch{T&&T(Ne)}}if(Vt){T=nt.join("&");break t}}}return u=u.i.splice(0,p),m.D=u,T}function Vo(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||D(),ot||(et(),ot=!0),jt.add(m,u),u.v=0}}function tl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ge(b(u.Fa,u),el(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Mo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ge(b(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Lr(this),Mo(this))};function Xs(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Mo(u){u.g=new Je(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=on(u.qa);Yt(m,"RID","rpc"),Yt(m,"SID",u.K),Yt(m,"AID",u.T),Yt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Yt(m,"TO",u.ja),Yt(m,"TYPE","xmlhttp"),Ks(u,m),u.m&&u.o&&De(m,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ks(on(m)),p.m=null,p.P=!0,di(p,u)}r.Za=function(){this.C!=null&&(this.C=null,Lr(this),tl(this),ne(19))};function Pr(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Lo(u,m){var p=null;if(u.g==m){Pr(u),Xs(u),u.g=null;var T=2}else if(Ga(u.h,m))p=m.D,We(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;T=zi(),Ht(T,new be(T,p)),Ur(u)}else Vo(u);else if(P=m.s,P==3||P==0&&0<m.X||!(T==1&&zc(u,m)||T==2&&tl(u)))switch(p&&0<p.length&&(m=u.h,m.i=m.i.concat(p)),P){case 1:Ei(u,5);break;case 4:Ei(u,10);break;case 3:Ei(u,6);break;default:Ei(u,2)}}}function el(u,m){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*m}function Ei(u,m){if(u.j.info("Error code "+m),m==2){var p=b(u.fb,u),T=u.Xa;const P=!T;T=new pe(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Bs(T,"https"),ks(T),P?Hs(T.toString(),p):Vn(T.toString(),p)}else ne(2);u.G=0,u.l&&u.l.sa(m),Uo(u),Io(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Uo(u){if(u.G=0,u.ka=[],u.l){const m=Fa(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function Po(u,m,p){var T=p instanceof pe?on(p):new pe(p);if(T.g!="")m&&(T.g=m+"."+T.g),Gi(T,T.s);else{var P=g.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var H=new pe(null);T&&Bs(H,T),m&&(H.g=m),P&&Gi(H,P),p&&(H.l=p),T=H}return p=u.D,m=u.ya,p&&m&&Yt(T,p,m),Yt(T,"VER",u.la),Ks(u,T),T}function jo(u,m,p){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new kt(new Fi({eb:p})):new kt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function zo(){}r=zo.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function jr(){}jr.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){ae.call(this),this.g=new Mr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ut(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ut(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Xn(this)}G(tn,ae),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ja(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=In(u),u=p);m.i.push(new wo(m.Ya++,u)),m.G==3&&Ur(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,tn.aa.N.call(this)};function Bo(u){hi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}G(Bo,hi);function ko(){Ba.call(this),this.status=1}G(ko,Ba);function Xn(u){this.g=u}G(Xn,zo),Xn.prototype.ua=function(){Ht(this.g,"a")},Xn.prototype.ta=function(u){Ht(this.g,new Bo(u))},Xn.prototype.sa=function(u){Ht(this.g,new ko)},Xn.prototype.ra=function(){Ht(this.g,"b")},jr.prototype.createWebChannel=jr.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,vv=function(){return new jr},_v=function(){return zi()},yv=Bn,Jf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,Xu=qi,fi.COMPLETE="complete",pv=fi,za.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",ae.prototype.listen=ae.prototype.K,Gl=za,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,gv=kt}).apply(typeof qu<"u"?qu:typeof self<"u"?self:typeof window<"u"?window:{});const Jy="@firebase/firestore",Wy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new ov("@firebase/firestore");function ma(){return mr.logLevel}function at(r,...e){if(mr.logLevel<=Pt.DEBUG){const i=e.map(Ed);mr.debug(`Firestore (${Da}): ${r}`,...i)}}function Pi(r,...e){if(mr.logLevel<=Pt.ERROR){const i=e.map(Ed);mr.error(`Firestore (${Da}): ${r}`,...i)}}function Ts(r,...e){if(mr.logLevel<=Pt.WARN){const i=e.map(Ed);mr.warn(`Firestore (${Da}): ${r}`,...i)}}function Ed(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,Ev(r,a,i)}function Ev(r,e,i){let a=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw Pi(a),new Error(a)}function qt(r,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,r||Ev(e,o,a)}function At(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends xa{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(Xe.UNAUTHENTICATED))}shutdown(){}}class ab{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class lb{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){qt(this.o===void 0,42304);let a=this.i;const o=y=>this.i!==a?(a=this.i,i(y)):Promise.resolve();let h=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new vs,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=h;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},g=y=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new vs)}},0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(qt(typeof a.accessToken=="string",31837,{l:a}),new Tv(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(e===null||typeof e=="string",2055,{h:e}),new Xe(e)}}class ob{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ub{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new ob(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable(()=>i(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cb{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,GA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){qt(this.o===void 0,3512);const a=h=>{h.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>a(h))};const o=h=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>o(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new t_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(qt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new t_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=hb(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function xt(r,e){return r<e?-1:r>e?1:0}function Wf(r,e){let i=0;for(;i<r.length&&i<e.length;){const a=r.codePointAt(i),o=e.codePointAt(i);if(a!==o){if(a<128&&o<128)return xt(a,o);{const h=Av(),d=fb(h.encode(e_(r,i)),h.encode(e_(e,i)));return d!==0?d:xt(a,o)}}i+=a>65535?2:1}return xt(r.length,e.length)}function e_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function fb(r,e){for(let i=0;i<r.length&&i<e.length;++i)if(r[i]!==e[i])return xt(r[i],e[i]);return xt(r.length,e.length)}function ba(r,e,i){return r.length===e.length&&r.every((a,o)=>i(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="__name__";class ni{constructor(e,i,a){i===void 0?i=0:i>e.length&&_t(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&_t(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=ni.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return xt(e.length,i.length)}static compareSegments(e,i){const a=ni.isNumericId(e),o=ni.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?ni.extractNumericId(e).compare(ni.extractNumericId(i)):Wf(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class te extends ni{construct(e,i,a){return new te(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new rt(K.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(o=>o.length>0))}return new te(i)}static emptyPath(){return new te([])}}const db=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ni{construct(e,i,a){return new He(e,i,a)}static isValidIdentifier(e){return db.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n_}static keyField(){return new He([n_])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new rt(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new rt(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new rt(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(h(),o++)}if(h(),d)throw new rt(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(i)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(te.fromString(e))}static fromName(e){return new dt(te.fromString(e).popFirst(5))}static empty(){return new dt(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return te.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r,e,i){if(!i)throw new rt(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function mb(r,e,i,a){if(e===!0&&a===!0)throw new rt(K.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function i_(r){if(!dt.isDocumentKey(r))throw new rt(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function s_(r){if(dt.isDocumentKey(r))throw new rt(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Sv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function pc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_t(12329,{type:typeof r})}function io(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new rt(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=pc(r);throw new rt(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e){const i={typeString:r};return e&&(i.value=e),i}function fo(r,e){if(!Sv(r))throw new rt(K.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const o=e[a].typeString,h="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const d=r[a];if(o&&typeof d!==o){i=`JSON field '${a}' must be a ${o}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${a}' field to equal '${h.value}'`;break}}if(i)throw new rt(K.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=-62135596800,a_=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*a_);return new Jt(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new rt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new rt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<r_)throw new rt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a_}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fo(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Te("string",Jt._jsonSchemaVersion),seconds:Te("number"),nanoseconds:Te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Jt(0,0))}static max(){return new Tt(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=-1;function gb(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Tt.fromTimestamp(a===1e9?new Jt(i+1,0):new Jt(i,a));return new As(o,dt.empty(),e)}function pb(r){return new As(r.readTime,r.key,so)}class As{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new As(Tt.min(),dt.empty(),so)}static max(){return new As(Tt.max(),dt.empty(),so)}}function yb(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=dt.comparator(r.documentKey,e.documentKey),i!==0?i:xt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==_b)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new $((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof $?i:$.resolve(i)}catch(i){return $.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):$.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):$.reject(i)}static resolve(e){return new $((i,a)=>{i(e)})}static reject(e){return new $((i,a)=>{a(e)})}static waitFor(e){return new $((i,a)=>{let o=0,h=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++h,d&&h===o&&i()},y=>a(y))}),d=!0,h===o&&i()})}static or(e){let i=$.resolve(!1);for(const a of e)i=i.next(o=>o?$.resolve(o):a());return i}static forEach(e,i){const a=[];return e.forEach((o,h)=>{a.push(i.call(this,o,h))}),this.waitFor(a)}static mapArray(e,i){return new $((a,o)=>{const h=e.length,d=new Array(h);let g=0;for(let y=0;y<h;y++){const v=y;i(e[v]).next(A=>{d[v]=A,++g,g===h&&a(d)},A=>o(A))}})}static doWhile(e,i){return new $((a,o)=>{const h=()=>{e()===!0?i().next(()=>{h()},o):a()};h()})}}function Eb(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Ia(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this._e(a),this.ae=a=>i.writeSequenceNumber(a))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=-1;function _c(r){return r==null}function rc(r){return r===0&&1/r==-1/0}function Tb(r){return typeof r=="number"&&Number.isInteger(r)&&!rc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="";function Ab(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=l_(e)),e=bb(r.get(i),e);return l_(e)}function bb(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const h=r.charAt(o);switch(h){case"\0":i+="";break;case Rv:i+="";break;default:i+=h}}return i}function l_(r){return r+Rv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function pr(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function wv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,i){this.comparator=e,this.root=i||qe.EMPTY}insert(e,i){return new re(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??qe.RED,this.left=o??qe.EMPTY,this.right=h??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new qe(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return qe.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _t(27949);return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new qe(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new u_(this.data.getIterator())}getIteratorFrom(e){return new u_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new xe(this.comparator);return i.data=e,i}}class u_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Pn([])}unionWith(e){let i=new xe(He.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Pn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Cv("Invalid base64 string: "+h):h}}(e);return new Ge(i)}static fromUint8Array(e){const i=function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h}(e);return new Ge(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const Sb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(qt(!!r,39018),typeof r=="string"){let e=0;const i=Sb.exec(r);if(qt(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ss(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="server_timestamp",Dv="__type__",Nv="__previous_value__",Iv="__local_write_time__";function bd(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dv])===null||i===void 0?void 0:i.stringValue)===xv}function vc(r){const e=r.mapValue.fields[Nv];return bd(e)?vc(e):e}function ro(r){const e=bs(r.mapValue.fields[Iv].timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,i,a,o,h,d,g,y,v,A){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=A}}const ac="(default)";class ao{constructor(e,i){this.projectId=e,this.database=i||ac}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database===ac}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__type__",wb="__max__",Gu={mapValue:{}},Vv="__vector__",lc="value";function Rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bd(r)?4:xb(r)?9007199254740991:Cb(r)?10:11:_t(28295,{value:r})}function oi(r,e){if(r===e)return!0;const i=Rs(r);if(i!==Rs(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ro(r).isEqual(ro(e));case 3:return function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=bs(o.timestampValue),g=bs(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,h){return Ss(o.bytesValue).isEqual(Ss(h.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,h){return de(o.geoPointValue.latitude)===de(h.geoPointValue.latitude)&&de(o.geoPointValue.longitude)===de(h.geoPointValue.longitude)}(r,e);case 2:return function(o,h){if("integerValue"in o&&"integerValue"in h)return de(o.integerValue)===de(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=de(o.doubleValue),g=de(h.doubleValue);return d===g?rc(d)===rc(g):isNaN(d)&&isNaN(g)}return!1}(r,e);case 9:return ba(r.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(o,h){const d=o.mapValue.fields||{},g=h.mapValue.fields||{};if(o_(d)!==o_(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!oi(d[y],g[y])))return!1;return!0}(r,e);default:return _t(52216,{left:r})}}function lo(r,e){return(r.values||[]).find(i=>oi(i,e))!==void 0}function Sa(r,e){if(r===e)return 0;const i=Rs(r),a=Rs(e);if(i!==a)return xt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return xt(r.booleanValue,e.booleanValue);case 2:return function(h,d){const g=de(h.integerValue||h.doubleValue),y=de(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(r,e);case 3:return c_(r.timestampValue,e.timestampValue);case 4:return c_(ro(r),ro(e));case 5:return Wf(r.stringValue,e.stringValue);case 6:return function(h,d){const g=Ss(h),y=Ss(d);return g.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(h,d){const g=h.split("/"),y=d.split("/");for(let v=0;v<g.length&&v<y.length;v++){const A=xt(g[v],y[v]);if(A!==0)return A}return xt(g.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(h,d){const g=xt(de(h.latitude),de(d.latitude));return g!==0?g:xt(de(h.longitude),de(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return h_(r.arrayValue,e.arrayValue);case 10:return function(h,d){var g,y,v,A;const w=h.fields||{},b=d.fields||{},B=(g=w[lc])===null||g===void 0?void 0:g.arrayValue,G=(y=b[lc])===null||y===void 0?void 0:y.arrayValue,tt=xt(((v=B==null?void 0:B.values)===null||v===void 0?void 0:v.length)||0,((A=G==null?void 0:G.values)===null||A===void 0?void 0:A.length)||0);return tt!==0?tt:h_(B,G)}(r.mapValue,e.mapValue);case 11:return function(h,d){if(h===Gu.mapValue&&d===Gu.mapValue)return 0;if(h===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const g=h.fields||{},y=Object.keys(g),v=d.fields||{},A=Object.keys(v);y.sort(),A.sort();for(let w=0;w<y.length&&w<A.length;++w){const b=Wf(y[w],A[w]);if(b!==0)return b;const B=Sa(g[y[w]],v[A[w]]);if(B!==0)return B}return xt(y.length,A.length)}(r.mapValue,e.mapValue);default:throw _t(23264,{le:i})}}function c_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return xt(r,e);const i=bs(r),a=bs(e),o=xt(i.seconds,a.seconds);return o!==0?o:xt(i.nanos,a.nanos)}function h_(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=Sa(i[o],a[o]);if(h)return h}return xt(i.length,a.length)}function Ra(r){return td(r)}function td(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const a=bs(i);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return Ss(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return dt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=td(h);return a+"]"}(r.arrayValue):"mapValue"in r?function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of a)h?h=!1:o+=",",o+=`${d}:${td(i.fields[d])}`;return o+"}"}(r.mapValue):_t(61005,{value:r})}function $u(r){switch(Rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vc(r);return e?16+$u(e):16;case 5:return 2*r.stringValue.length;case 6:return Ss(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,h)=>o+$u(h),0)}(r.arrayValue);case 10:case 11:return function(a){let o=0;return pr(a.fields,(h,d)=>{o+=h.length+$u(d)}),o}(r.mapValue);default:throw _t(13486,{value:r})}}function f_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ed(r){return!!r&&"integerValue"in r}function Sd(r){return!!r&&"arrayValue"in r}function d_(r){return!!r&&"nullValue"in r}function m_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zu(r){return!!r&&"mapValue"in r}function Cb(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ov])===null||i===void 0?void 0:i.stringValue)===Vv}function Xl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return pr(r.mapValue.fields,(i,a)=>e.mapValue.fields[i]=Xl(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Xl(r.arrayValue.values[i]);return e}return Object.assign({},r)}function xb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===wb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Zu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(i)}setAll(e){let i=He.emptyPath(),a={},o=[];e.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,a,o),a={},o=[],i=g.popLast()}d?a[g.lastSegment()]=Xl(d):o.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());Zu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Zu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){pr(i,(o,h)=>e[o]=h);for(const o of a)delete e[o]}clone(){return new Dn(Xl(this.value))}}function Mv(r){const e=[];return pr(r.fields,(i,a)=>{const o=new He([i]);if(Zu(a)){const h=Mv(a.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,i,a,o,h,d,g){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(e){return new $e(e,0,Tt.min(),Tt.min(),Tt.min(),Dn.empty(),0)}static newFoundDocument(e,i,a,o){return new $e(e,1,i,Tt.min(),a,o,0)}static newNoDocument(e,i){return new $e(e,2,i,Tt.min(),Tt.min(),Dn.empty(),0)}static newUnknownDocument(e,i){return new $e(e,3,i,Tt.min(),Tt.min(),Dn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,i){this.position=e,this.inclusive=i}}function g_(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const h=e[o],d=r.position[o];if(h.field.isKeyField()?a=dt.comparator(dt.fromName(d.referenceValue),i.key):a=Sa(d,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function p_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!oi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,i="asc"){this.field=e,this.dir=i}}function Db(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{}class Ee extends Lv{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new Ib(e,i,a):i==="array-contains"?new Mb(e,a):i==="in"?new Lb(e,a):i==="not-in"?new Ub(e,a):i==="array-contains-any"?new Pb(e,a):new Ee(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new Ob(e,a):new Vb(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Sa(i,this.value)):i!==null&&Rs(this.value)===Rs(i)&&this.matchesComparison(Sa(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends Lv{constructor(e,i){super(),this.filters=e,this.op=i,this.he=null}static create(e,i){return new jn(e,i)}matches(e){return Uv(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Uv(r){return r.op==="and"}function Pv(r){return Nb(r)&&Uv(r)}function Nb(r){for(const e of r.filters)if(e instanceof jn)return!1;return!0}function nd(r){if(r instanceof Ee)return r.field.canonicalString()+r.op.toString()+Ra(r.value);if(Pv(r))return r.filters.map(e=>nd(e)).join(",");{const e=r.filters.map(i=>nd(i)).join(",");return`${r.op}(${e})`}}function jv(r,e){return r instanceof Ee?function(a,o){return o instanceof Ee&&a.op===o.op&&a.field.isEqual(o.field)&&oi(a.value,o.value)}(r,e):r instanceof jn?function(a,o){return o instanceof jn&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((h,d,g)=>h&&jv(d,o.filters[g]),!0):!1}(r,e):void _t(19439)}function zv(r){return r instanceof Ee?function(i){return`${i.field.canonicalString()} ${i.op} ${Ra(i.value)}`}(r):r instanceof jn?function(i){return i.op.toString()+" {"+i.getFilters().map(zv).join(" ,")+"}"}(r):"Filter"}class Ib extends Ee{constructor(e,i,a){super(e,i,a),this.key=dt.fromName(a.referenceValue)}matches(e){const i=dt.comparator(e.key,this.key);return this.matchesComparison(i)}}class Ob extends Ee{constructor(e,i){super(e,"in",i),this.keys=Bv("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Vb extends Ee{constructor(e,i){super(e,"not-in",i),this.keys=Bv("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function Bv(r,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>dt.fromName(a.referenceValue))}class Mb extends Ee{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Sd(i)&&lo(i.arrayValue,this.value)}}class Lb extends Ee{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&lo(this.value.arrayValue,i)}}class Ub extends Ee{constructor(e,i){super(e,"not-in",i)}matches(e){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!lo(this.value.arrayValue,i)}}class Pb extends Ee{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Sd(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>lo(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,i=null,a=[],o=[],h=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=d,this.endAt=g,this.Pe=null}}function y_(r,e=null,i=[],a=[],o=null,h=null,d=null){return new jb(r,e,i,a,o,h,d)}function Rd(r){const e=At(r);if(e.Pe===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>nd(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>function(h){return h.field.canonicalString()+h.dir}(a)).join(","),_c(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>Ra(a)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>Ra(a)).join(",")),e.Pe=i}return e.Pe}function wd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Db(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!jv(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!p_(r.startAt,e.startAt)&&p_(r.endAt,e.endAt)}function id(r){return dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,i=null,a=[],o=[],h=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function zb(r,e,i,a,o,h,d,g){return new Oa(r,e,i,a,o,h,d,g)}function kv(r){return new Oa(r)}function __(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function qv(r){return r.collectionGroup!==null}function $l(r){const e=At(r);if(e.Te===null){e.Te=[];const i=new Set;for(const h of e.explicitOrderBy)e.Te.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new xe(He.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(e).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||e.Te.push(new oo(h,a))}),i.has(He.keyField().canonicalString())||e.Te.push(new oo(He.keyField(),a))}return e.Te}function ii(r){const e=At(r);return e.Ie||(e.Ie=Bb(e,$l(r))),e.Ie}function Bb(r,e){if(r.limitType==="F")return y_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const h=o.dir==="desc"?"asc":"desc";return new oo(o.field,h)});const i=r.endAt?new oc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new oc(r.startAt.position,r.startAt.inclusive):null;return y_(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function sd(r,e){const i=r.filters.concat([e]);return new Oa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function rd(r,e,i){return new Oa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Ec(r,e){return wd(ii(r),ii(e))&&r.limitType===e.limitType}function Hv(r){return`${Rd(ii(r))}|lt:${r.limitType}`}function ga(r){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(o=>zv(o)).join(", ")}]`),_c(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(o=>Ra(o)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(o=>Ra(o)).join(",")),`Target(${a})`}(ii(r))}; limitType=${r.limitType})`}function Tc(r,e){return e.isFoundDocument()&&function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):dt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)}(r,e)&&function(a,o){for(const h of $l(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0}(r,e)&&function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0}(r,e)&&function(a,o){return!(a.startAt&&!function(d,g,y){const v=g_(d,g,y);return d.inclusive?v<=0:v<0}(a.startAt,$l(a),o)||a.endAt&&!function(d,g,y){const v=g_(d,g,y);return d.inclusive?v>=0:v>0}(a.endAt,$l(a),o))}(r,e)}function kb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Gv(r){return(e,i)=>{let a=!1;for(const o of $l(r)){const h=qb(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function qb(r,e,i){const a=r.field.isKeyField()?dt.comparator(e.key,i.key):function(h,d,g){const y=d.data.field(h),v=g.data.field(h);return y!==null&&v!==null?Sa(y,v):_t(42886)}(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return _t(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(i,a)=>{for(const[o,h]of a)e(o,h)})}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new re(dt.comparator);function ji(){return Hb}const Fv=new re(dt.comparator);function Fl(...r){let e=Fv;for(const i of r)e=e.insert(i.key,i);return e}function Yv(r){let e=Fv;return r.forEach((i,a)=>e=e.insert(i,a.overlayedDocument)),e}function fr(){return Zl()}function Qv(){return Zl()}function Zl(){return new yr(r=>r.toString(),(r,e)=>r.isEqual(e))}const Gb=new re(dt.comparator),Fb=new xe(dt.comparator);function Ot(...r){let e=Fb;for(const i of r)e=e.add(i);return e}const Yb=new xe(xt);function Qb(){return Yb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function Kv(r){return{integerValue:""+r}}function Kb(r,e){return Tb(e)?Kv(e):Cd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(){this._=void 0}}function Xb(r,e,i){return r instanceof uc?function(o,h){const d={fields:{[Dv]:{stringValue:xv},[Iv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&bd(h)&&(h=vc(h)),h&&(d.fields[Nv]=h),{mapValue:d}}(i,e):r instanceof uo?$v(r,e):r instanceof co?Zv(r,e):function(o,h){const d=Xv(o,h),g=v_(d)+v_(o.Ee);return ed(d)&&ed(o.Ee)?Kv(g):Cd(o.serializer,g)}(r,e)}function $b(r,e,i){return r instanceof uo?$v(r,e):r instanceof co?Zv(r,e):i}function Xv(r,e){return r instanceof cc?function(a){return ed(a)||function(h){return!!h&&"doubleValue"in h}(a)}(e)?e:{integerValue:0}:null}class uc extends Ac{}class uo extends Ac{constructor(e){super(),this.elements=e}}function $v(r,e){const i=Jv(e);for(const a of r.elements)i.some(o=>oi(o,a))||i.push(a);return{arrayValue:{values:i}}}class co extends Ac{constructor(e){super(),this.elements=e}}function Zv(r,e){let i=Jv(e);for(const a of r.elements)i=i.filter(o=>!oi(o,a));return{arrayValue:{values:i}}}class cc extends Ac{constructor(e,i){super(),this.serializer=e,this.Ee=i}}function v_(r){return de(r.integerValue||r.doubleValue)}function Jv(r){return Sd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Zb(r,e){return r.field.isEqual(e.field)&&function(a,o){return a instanceof uo&&o instanceof uo||a instanceof co&&o instanceof co?ba(a.elements,o.elements,oi):a instanceof cc&&o instanceof cc?oi(a.Ee,o.Ee):a instanceof uc&&o instanceof uc}(r.transform,e.transform)}class Jb{constructor(e,i){this.version=e,this.transformResults=i}}class si{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new si}static exists(e){return new si(void 0,e)}static updateTime(e){return new si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class bc{}function Wv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new xd(r.key,si.none()):new mo(r.key,r.data,si.none());{const i=r.data,a=Dn.empty();let o=new xe(He.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?a.delete(h):a.set(h,d),o=o.add(h)}return new _r(r.key,a,new Pn(o.toArray()),si.none())}}function Wb(r,e,i){r instanceof mo?function(o,h,d){const g=o.value.clone(),y=T_(o.fieldTransforms,h,d.transformResults);g.setAll(y),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,i):r instanceof _r?function(o,h,d){if(!Ju(o.precondition,h))return void h.convertToUnknownDocument(d.version);const g=T_(o.fieldTransforms,h,d.transformResults),y=h.data;y.setAll(t0(o)),y.setAll(g),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(r,e,i):function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,i)}function Jl(r,e,i,a){return r instanceof mo?function(h,d,g,y){if(!Ju(h.precondition,d))return g;const v=h.value.clone(),A=A_(h.fieldTransforms,y,d);return v.setAll(A),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,e,i,a):r instanceof _r?function(h,d,g,y){if(!Ju(h.precondition,d))return g;const v=A_(h.fieldTransforms,y,d),A=d.data;return A.setAll(t0(h)),A.setAll(v),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(w=>w.field))}(r,e,i,a):function(h,d,g){return Ju(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,e,i)}function tS(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),h=Xv(a.transform,o||null);h!=null&&(i===null&&(i=Dn.empty()),i.set(a.field,h))}return i||null}function E_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&ba(a,o,(h,d)=>Zb(h,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class mo extends bc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _r extends bc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function t0(r){const e=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}}),e}function T_(r,e,i){const a=new Map;qt(r.length===i.length,32656,{Ae:i.length,Re:r.length});for(let o=0;o<i.length;o++){const h=r[o],d=h.transform,g=e.data.field(h.field);a.set(h.field,$b(d,g,i[o]))}return a}function A_(r,e,i){const a=new Map;for(const o of r){const h=o.transform,d=i.data.field(o.field);a.set(o.field,Xb(h,d,e))}return a}class xd extends bc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eS extends bc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&Wb(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=Jl(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=Jl(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=Qv();return this.mutations.forEach(o=>{const h=e.get(o.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(o.key)?null:g;const y=Wv(d,g);y!==null&&a.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Tt.min())}),a}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Ot())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(i,a)=>E_(i,a))&&ba(this.baseMutations,e.baseMutations,(i,a)=>E_(i,a))}}class Dd{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){qt(e.mutations.length===a.length,58842,{Ve:e.mutations.length,me:a.length});let o=function(){return Gb}();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,a[d].version);return new Dd(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Ut;function rS(r){switch(r){case K.OK:return _t(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return _t(15467,{code:r})}}function e0(r){if(r===void 0)return Pi("GRPC error has no .code"),K.UNKNOWN;switch(r){case ve.OK:return K.OK;case ve.CANCELLED:return K.CANCELLED;case ve.UNKNOWN:return K.UNKNOWN;case ve.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ve.INTERNAL:return K.INTERNAL;case ve.UNAVAILABLE:return K.UNAVAILABLE;case ve.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ve.NOT_FOUND:return K.NOT_FOUND;case ve.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ve.ABORTED:return K.ABORTED;case ve.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ve.DATA_LOSS:return K.DATA_LOSS;default:return _t(39323,{code:r})}}(Ut=ve||(ve={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new _s([4294967295,4294967295],0);function b_(r){const e=Av().encode(r),i=new mv;return i.update(e),new Uint8Array(i.digest())}function S_(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new _s([i,a],0),new _s([o,h],0)]}class Nd{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new Yl(`Invalid padding: ${i}`);if(a<0)throw new Yl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${i}`);this.fe=8*e.length-i,this.ge=_s.fromNumber(this.fe)}pe(e,i,a){let o=e.add(i.multiply(_s.fromNumber(a)));return o.compare(aS)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const i=b_(e),[a,o]=S_(i);for(let h=0;h<this.hashCount;h++){const d=this.pe(a,o,h);if(!this.ye(d))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new Nd(h,o,i);return a.forEach(g=>d.insert(g)),d}insert(e){if(this.fe===0)return;const i=b_(e),[a,o]=S_(i);for(let h=0;h<this.hashCount;h++){const d=this.pe(a,o,h);this.we(d)}}we(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,go.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Sc(Tt.min(),o,new re(xt),ji(),Ot())}}class go{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new go(a,i,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,i,a,o){this.Se=e,this.removedTargetIds=i,this.key=a,this.be=o}}class n0{constructor(e,i){this.targetId=e,this.De=i}}class i0{constructor(e,i,a=Ge.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class R_{constructor(){this.ve=0,this.Ce=w_(),this.Fe=Ge.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ot(),i=Ot(),a=Ot();return this.Ce.forEach((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:_t(38017,{changeType:h})}}),new go(this.Fe,this.Me,e,i,a)}ke(){this.xe=!1,this.Ce=w_()}qe(e,i){this.xe=!0,this.Ce=this.Ce.insert(e,i)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class lS{constructor(e){this.We=e,this.Ge=new Map,this.ze=ji(),this.je=Fu(),this.Je=Fu(),this.He=new re(xt)}Ye(e){for(const i of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(i,e.be):this.Xe(i,e.key,e.be);for(const i of e.removedTargetIds)this.Xe(i,e.key,e.be)}et(e){this.forEachTarget(e,i=>{const a=this.tt(i);switch(e.state){case 0:this.nt(i)&&a.Be(e.resumeToken);break;case 1:a.Ue(),a.Oe||a.ke(),a.Be(e.resumeToken);break;case 2:a.Ue(),a.Oe||this.removeTarget(i);break;case 3:this.nt(i)&&(a.Ke(),a.Be(e.resumeToken));break;case 4:this.nt(i)&&(this.rt(i),a.Be(e.resumeToken));break;default:_t(56790,{state:e.state})}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.Ge.forEach((a,o)=>{this.nt(o)&&i(o)})}it(e){const i=e.targetId,a=e.De.count,o=this.st(i);if(o){const h=o.target;if(id(h))if(a===0){const d=new dt(h.path);this.Xe(i,d,$e.newNoDocument(d,Tt.min()))}else qt(a===1,20013,{expectedCount:a});else{const d=this.ot(i);if(d!==a){const g=this._t(e),y=g?this.ut(g,e,d):1;if(y!==0){this.rt(i);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(i,v)}}}}}_t(e){const i=e.De.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let d,g;try{d=Ss(a).toUint8Array()}catch(y){if(y instanceof Cv)return Ts("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Nd(d,o,h)}catch(y){return Ts(y instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.fe===0?null:g}ut(e,i,a){return i.De.count===a-this.ht(e,i.targetId)?0:2}ht(e,i){const a=this.We.getRemoteKeysForTarget(i);let o=0;return a.forEach(h=>{const d=this.We.lt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.Xe(i,h,null),o++)}),o}Pt(e){const i=new Map;this.Ge.forEach((h,d)=>{const g=this.st(d);if(g){if(h.current&&id(g.target)){const y=new dt(g.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,$e.newNoDocument(y,e))}h.Ne&&(i.set(d,h.Le()),h.ke())}});let a=Ot();this.Je.forEach((h,d)=>{let g=!0;d.forEachWhile(y=>{const v=this.st(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(h))}),this.ze.forEach((h,d)=>d.setReadTime(e));const o=new Sc(e,i,this.He,this.ze,a);return this.ze=ji(),this.je=Fu(),this.Je=Fu(),this.He=new re(xt),o}Ze(e,i){if(!this.nt(e))return;const a=this.It(e,i.key)?2:0;this.tt(e).qe(i.key,a),this.ze=this.ze.insert(i.key,i),this.je=this.je.insert(i.key,this.Tt(i.key).add(e)),this.Je=this.Je.insert(i.key,this.dt(i.key).add(e))}Xe(e,i,a){if(!this.nt(e))return;const o=this.tt(e);this.It(e,i)?o.qe(i,1):o.Qe(i),this.Je=this.Je.insert(i,this.dt(i).delete(e)),this.Je=this.Je.insert(i,this.dt(i).add(e)),a&&(this.ze=this.ze.insert(i,a))}removeTarget(e){this.Ge.delete(e)}ot(e){const i=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let i=this.Ge.get(e);return i||(i=new R_,this.Ge.set(e,i)),i}dt(e){let i=this.Je.get(e);return i||(i=new xe(xt),this.Je=this.Je.insert(e,i)),i}Tt(e){let i=this.je.get(e);return i||(i=new xe(xt),this.je=this.je.insert(e,i)),i}nt(e){const i=this.st(e)!==null;return i||at("WatchChangeAggregator","Detected inactive target",e),i}st(e){const i=this.Ge.get(e);return i&&i.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new R_),this.We.getRemoteKeysForTarget(e).forEach(i=>{this.Xe(e,i,null)})}It(e,i){return this.We.getRemoteKeysForTarget(e).has(i)}}function Fu(){return new re(dt.comparator)}function w_(){return new re(dt.comparator)}const oS={asc:"ASCENDING",desc:"DESCENDING"},uS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cS={and:"AND",or:"OR"};class hS{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function ad(r,e){return r.useProto3Json||_c(e)?e:{value:e}}function hc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function fS(r,e){return hc(r,e.toTimestamp())}function ri(r){return qt(!!r,49232),Tt.fromTimestamp(function(i){const a=bs(i);return new Jt(a.seconds,a.nanos)}(r))}function Id(r,e){return ld(r,e).canonicalString()}function ld(r,e){const i=function(o){return new te(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?i:i.child(e)}function r0(r){const e=te.fromString(r);return qt(c0(e),10190,{key:e.toString()}),e}function od(r,e){return Id(r.databaseId,e.path)}function qf(r,e){const i=r0(e);if(i.get(1)!==r.databaseId.projectId)throw new rt(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new rt(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new dt(l0(i))}function a0(r,e){return Id(r.databaseId,e)}function dS(r){const e=r0(r);return e.length===4?te.emptyPath():l0(e)}function ud(r){return new te(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function l0(r){return qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function C_(r,e,i){return{name:od(r,e),fields:i.value.mapValue.fields}}function mS(r,e){let i;if("targetChange"in e){e.targetChange;const a=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:_t(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=function(v,A){return v.useProto3Json?(qt(A===void 0||typeof A=="string",58123),Ge.fromBase64String(A||"")):(qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Ge.fromUint8Array(A||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const A=v.code===void 0?K.UNKNOWN:e0(v.code);return new rt(A,v.message||"")}(d);i=new i0(a,o,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=qf(r,a.document.name),h=ri(a.document.updateTime),d=a.document.createTime?ri(a.document.createTime):Tt.min(),g=new Dn({mapValue:{fields:a.document.fields}}),y=$e.newFoundDocument(o,h,d,g),v=a.targetIds||[],A=a.removedTargetIds||[];i=new Wu(v,A,y.key,y)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=qf(r,a.document),h=a.readTime?ri(a.readTime):Tt.min(),d=$e.newNoDocument(o,h),g=a.removedTargetIds||[];i=new Wu([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=qf(r,a.document),h=a.removedTargetIds||[];i=new Wu([],h,o,null)}else{if(!("filter"in e))return _t(11601,{At:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,d=new sS(o,h),g=a.targetId;i=new n0(g,d)}}return i}function gS(r,e){let i;if(e instanceof mo)i={update:C_(r,e.key,e.value)};else if(e instanceof xd)i={delete:od(r,e.key)};else if(e instanceof _r)i={update:C_(r,e.key,e.data),updateMask:SS(e.fieldMask)};else{if(!(e instanceof eS))return _t(16599,{Rt:e.type});i={verify:od(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(h,d){const g=d.transform;if(g instanceof uc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof uo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof co)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof cc)return{fieldPath:d.field.canonicalString(),increment:g.Ee};throw _t(20930,{transform:d.transform})}(0,a))),e.precondition.isNone||(i.currentDocument=function(o,h){return h.updateTime!==void 0?{updateTime:fS(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:_t(27497)}(r,e.precondition)),i}function pS(r,e){return r&&r.length>0?(qt(e!==void 0,14353),r.map(i=>function(o,h){let d=o.updateTime?ri(o.updateTime):ri(h);return d.isEqual(Tt.min())&&(d=ri(h)),new Jb(d,o.transformResults||[])}(i,e))):[]}function yS(r,e){return{documents:[a0(r,e.path)]}}function _S(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=a0(r,o);const h=function(v){if(v.length!==0)return u0(jn.create(v,"and"))}(e.filters);h&&(i.structuredQuery.where=h);const d=function(v){if(v.length!==0)return v.map(A=>function(b){return{field:pa(b.field),direction:TS(b.dir)}}(A))}(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=ad(r,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:i,parent:o}}function vS(r){let e=dS(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){qt(a===1,65062);const A=i.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let h=[];i.where&&(h=function(w){const b=o0(w);return b instanceof jn&&Pv(b)?b.getFilters():[b]}(i.where));let d=[];i.orderBy&&(d=function(w){return w.map(b=>function(G){return new oo(ya(G.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(b))}(i.orderBy));let g=null;i.limit&&(g=function(w){let b;return b=typeof w=="object"?w.value:w,_c(b)?null:b}(i.limit));let y=null;i.startAt&&(y=function(w){const b=!!w.before,B=w.values||[];return new oc(B,b)}(i.startAt));let v=null;return i.endAt&&(v=function(w){const b=!w.before,B=w.values||[];return new oc(B,b)}(i.endAt)),zb(e,o,d,h,g,"F",y,v)}function ES(r,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:o})}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function o0(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=ya(i.unaryFilter.field);return Ee.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=ya(i.unaryFilter.field);return Ee.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ya(i.unaryFilter.field);return Ee.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ya(i.unaryFilter.field);return Ee.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(r):r.fieldFilter!==void 0?function(i){return Ee.create(ya(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return jn.create(i.compositeFilter.filters.map(a=>o0(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(i.compositeFilter.op))}(r):_t(30097,{filter:r})}function TS(r){return oS[r]}function AS(r){return uS[r]}function bS(r){return cS[r]}function pa(r){return{fieldPath:r.canonicalString()}}function ya(r){return He.fromServerFormat(r.fieldPath)}function u0(r){return r instanceof Ee?function(i){if(i.op==="=="){if(m_(i.value))return{unaryFilter:{field:pa(i.field),op:"IS_NAN"}};if(d_(i.value))return{unaryFilter:{field:pa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(m_(i.value))return{unaryFilter:{field:pa(i.field),op:"IS_NOT_NAN"}};if(d_(i.value))return{unaryFilter:{field:pa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(i.field),op:AS(i.op),value:i.value}}}(r):r instanceof jn?function(i){const a=i.getFilters().map(o=>u0(o));return a.length===1?a[0]:{compositeFilter:{op:bS(i.op),filters:a}}}(r):_t(54877,{filter:r})}function SS(r){const e=[];return r.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function c0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,i,a,o,h=Tt.min(),d=Tt.min(),g=Ge.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.gt=e}}function wS(r){const e=vS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.Dn=new xS}addToCollectionParentIndex(e,i){return this.Dn.add(i),$.resolve()}getCollectionParents(e,i){return $.resolve(this.Dn.getEntries(i))}addFieldIndex(e,i){return $.resolve()}deleteFieldIndex(e,i){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,i){return $.resolve()}getDocumentsMatchingTarget(e,i){return $.resolve(null)}getIndexType(e,i){return $.resolve(0)}getFieldIndexes(e,i){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,i){return $.resolve(As.min())}getMinOffsetFromCollectionGroup(e,i){return $.resolve(As.min())}updateCollectionGroup(e,i,a){return $.resolve()}updateIndexEntries(e,i){return $.resolve()}}class xS{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new xe(te.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new xe(te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h0=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(h0,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new wa(0)}static ur(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="LruGarbageCollector",DS=1048576;function N_([r,e],[i,a]){const o=xt(r,i);return o===0?xt(e,a):o}class NS{constructor(e){this.Tr=e,this.buffer=new xe(N_),this.Ir=0}dr(){return++this.Ir}Er(e){const i=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();N_(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class IS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){at(D_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Ia(i)?at(D_,"Ignoring IndexedDB error during garbage collection: ",i):await Na(i)}await this.Rr(3e5)})}}class OS{constructor(e,i){this.Vr=e,this.params=i}calculateTargetCount(e,i){return this.Vr.mr(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(i===0)return $.resolve(yc.ue);const a=new NS(i);return this.Vr.forEachTarget(e,o=>a.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>a.Er(o))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.Vr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.Vr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(x_)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x_):this.pr(e,i))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,i){let a,o,h,d,g,y,v;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(a=w,g=Date.now(),this.removeTargets(e,a,i))).next(w=>(h=w,y=Date.now(),this.removeOrphanedDocuments(e,a))).next(w=>(v=Date.now(),ma()<=Pt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${h} targets in `+(y-g)+`ms
	Removed ${w} documents in `+(v-y)+`ms
Total Duration: ${v-A}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:w})))}}function VS(r,e){return new OS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.changes=new yr(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?$.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(a!==null&&Jl(a.mutation,o,Pn.empty(),Jt.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.getLocalViewOfDocuments(e,a,Ot()).next(()=>a))}getLocalViewOfDocuments(e,i,a=Ot()){const o=fr();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,a).next(h=>{let d=Fl();return h.forEach((g,y)=>{d=d.insert(g,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,i){const a=fr();return this.populateOverlays(e,a,i).next(()=>this.computeViews(e,i,a,Ot()))}populateOverlays(e,i,a){const o=[];return a.forEach(h=>{i.has(h)||o.push(h)}),this.documentOverlayCache.getOverlays(e,o).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(e,i,a,o){let h=ji();const d=Zl(),g=function(){return Zl()}();return i.forEach((y,v)=>{const A=a.get(v.key);o.has(v.key)&&(A===void 0||A.mutation instanceof _r)?h=h.insert(v.key,v):A!==void 0?(d.set(v.key,A.mutation.getFieldMask()),Jl(A.mutation,v,A.mutation.getFieldMask(),Jt.now())):d.set(v.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,h).next(y=>(y.forEach((v,A)=>d.set(v,A)),i.forEach((v,A)=>{var w;return g.set(v,new LS(A,(w=d.get(v))!==null&&w!==void 0?w:null))}),g))}recalculateAndSaveOverlays(e,i){const a=Zl();let o=new re((d,g)=>d-g),h=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(d=>{for(const g of d)g.keys().forEach(y=>{const v=i.get(y);if(v===null)return;let A=a.get(y)||Pn.empty();A=g.applyToLocalView(v,A),a.set(y,A);const w=(o.get(g.batchId)||Ot()).add(y);o=o.insert(g.batchId,w)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,A=y.value,w=Qv();A.forEach(b=>{if(!h.has(b)){const B=Wv(i.get(b),a.get(b));B!==null&&w.set(b,B),h=h.add(b)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,w))}return $.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,i,a,o){return function(d){return dt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):qv(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next(h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):$.resolve(fr());let g=so,y=h;return d.next(v=>$.forEach(v,(A,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),h.get(A)?$.resolve():this.remoteDocumentCache.getEntry(e,A).next(b=>{y=y.insert(A,b)}))).next(()=>this.populateOverlays(e,v,h)).next(()=>this.computeViews(e,y,v,Ot())).next(A=>({batchId:g,changes:Yv(A)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new dt(i)).next(a=>{let o=Fl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let d=Fl();return this.indexManager.getCollectionParents(e,h).next(g=>$.forEach(g,y=>{const v=function(w,b){return new Oa(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(i,y.child(h));return this.getDocumentsMatchingCollectionQuery(e,v,a,o).next(A=>{A.forEach((w,b)=>{d=d.insert(w,b)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o))).next(d=>{h.forEach((y,v)=>{const A=v.getKey();d.get(A)===null&&(d=d.insert(A,$e.newInvalidDocument(A)))});let g=Fl();return d.forEach((y,v)=>{const A=h.get(y);A!==void 0&&Jl(A.mutation,v,Pn.empty(),Jt.now()),Tc(i,v)&&(g=g.insert(y,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,i){return $.resolve(this.Br.get(i))}saveBundleMetadata(e,i){return this.Br.set(i.id,function(o){return{id:o.id,version:o.version,createTime:ri(o.createTime)}}(i)),$.resolve()}getNamedQuery(e,i){return $.resolve(this.Lr.get(i))}saveNamedQuery(e,i){return this.Lr.set(i.name,function(o){return{name:o.name,query:wS(o.bundledQuery),readTime:ri(o.readTime)}}(i)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.overlays=new re(dt.comparator),this.kr=new Map}getOverlay(e,i){return $.resolve(this.overlays.get(i))}getOverlays(e,i){const a=fr();return $.forEach(i,o=>this.getOverlay(e,o).next(h=>{h!==null&&a.set(o,h)})).next(()=>a)}saveOverlays(e,i,a){return a.forEach((o,h)=>{this.wt(e,i,h)}),$.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.kr.get(a);return o!==void 0&&(o.forEach(h=>this.overlays=this.overlays.remove(h)),this.kr.delete(a)),$.resolve()}getOverlaysForCollection(e,i,a){const o=fr(),h=i.length+1,d=new dt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!i.isPrefixOf(v.path))break;v.path.length===h&&y.largestBatchId>a&&o.set(y.getKey(),y)}return $.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new re((v,A)=>v-A);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===i&&v.largestBatchId>a){let A=h.get(v.largestBatchId);A===null&&(A=fr(),h=h.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const g=fr(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,A)=>g.set(v,A)),!(g.size()>=o)););return $.resolve(g)}wt(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(a.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new iS(i,a));let h=this.kr.get(i);h===void 0&&(h=Ot(),this.kr.set(i,h)),this.kr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this.qr=new xe(Me.Qr),this.$r=new xe(Me.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,i){const a=new Me(e,i);this.qr=this.qr.add(a),this.$r=this.$r.add(a)}Kr(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.Wr(new Me(e,i))}Gr(e,i){e.forEach(a=>this.removeReference(a,i))}zr(e){const i=new dt(new te([])),a=new Me(i,e),o=new Me(i,e+1),h=[];return this.$r.forEachInRange([a,o],d=>{this.Wr(d),h.push(d.key)}),h}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const i=new dt(new te([])),a=new Me(i,e),o=new Me(i,e+1);let h=Ot();return this.$r.forEachInRange([a,o],d=>{h=h.add(d.key)}),h}containsKey(e){const i=new Me(e,0),a=this.qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class Me{constructor(e,i){this.key=e,this.Hr=i}static Qr(e,i){return dt.comparator(e.key,i.key)||xt(e.Hr,i.Hr)}static Ur(e,i){return xt(e.Hr,i.Hr)||dt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.er=1,this.Yr=new xe(Me.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new nS(h,i,a,o);this.mutationQueue.push(d);for(const g of o)this.Yr=this.Yr.add(new Me(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,i){return $.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.Xr(a),h=o<0?0:o;return $.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Ad:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Me(i,0),o=new Me(i,Number.POSITIVE_INFINITY),h=[];return this.Yr.forEachInRange([a,o],d=>{const g=this.Zr(d.Hr);h.push(g)}),$.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new xe(xt);return i.forEach(o=>{const h=new Me(o,0),d=new Me(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([h,d],g=>{a=a.add(g.Hr)})}),$.resolve(this.ei(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;dt.isDocumentKey(h)||(h=h.child(""));const d=new Me(new dt(h),0);let g=new xe(xt);return this.Yr.forEachWhile(y=>{const v=y.key.path;return!!a.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.Hr)),!0)},d),$.resolve(this.ei(g))}ei(e){const i=[];return e.forEach(a=>{const o=this.Zr(a);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){qt(this.ti(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Yr;return $.forEach(i.mutations,o=>{const h=new Me(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=a})}rr(e){}containsKey(e,i){const a=new Me(i,0),o=this.Yr.firstAfterOrEqual(a);return $.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,i){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const i=this.Xr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.ni=e,this.docs=function(){return new re(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,d=this.ni(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return $.resolve(a?a.document.mutableCopy():$e.newInvalidDocument(i))}getEntries(e,i){let a=ji();return i.forEach(o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():$e.newInvalidDocument(o))}),$.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=ji();const d=i.path,g=new dt(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:A}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||yb(pb(A),a)<=0||(o.has(A.key)||Tc(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return $.resolve(h)}getAllFromCollectionGroup(e,i,a,o){_t(9500)}ri(e,i){return $.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new qS(this)}getSize(e){return $.resolve(this.size)}}class qS extends MS{constructor(e){super(),this.Or=e}applyChanges(e){const i=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?i.push(this.Or.addEntry(e,o)):this.Or.removeEntry(a)}),$.waitFor(i)}getFromCache(e,i){return this.Or.getEntry(e,i)}getAllFromCache(e,i){return this.Or.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.persistence=e,this.ii=new yr(i=>Rd(i),wd),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.si=0,this.oi=new Od,this.targetCount=0,this._i=wa.ar()}forEachTarget(e,i){return this.ii.forEach((a,o)=>i(o)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.si&&(this.si=i),$.resolve()}hr(e){this.ii.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this._i=new wa(i),this.highestTargetId=i),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,i){return this.hr(i),this.targetCount+=1,$.resolve()}updateTargetData(e,i){return this.hr(i),$.resolve()}removeTargetData(e,i){return this.ii.delete(i.target),this.oi.zr(i.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.ii.forEach((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.ii.delete(d),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),$.waitFor(h).next(()=>o)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,i){const a=this.ii.get(i)||null;return $.resolve(a)}addMatchingKeys(e,i,a){return this.oi.Kr(i,a),$.resolve()}removeMatchingKeys(e,i,a){this.oi.Gr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach(d=>{h.push(o.markPotentiallyOrphaned(e,d))}),$.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this.oi.zr(i),$.resolve()}getMatchingKeysForTargetId(e,i){const a=this.oi.Jr(i);return $.resolve(a)}containsKey(e,i){return $.resolve(this.oi.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,i){this.ai={},this.overlays={},this.ui=new yc(0),this.ci=!1,this.ci=!0,this.li=new zS,this.referenceDelegate=e(this),this.hi=new HS(this),this.indexManager=new CS,this.remoteDocumentCache=function(o){return new kS(o)}(a=>this.referenceDelegate.Pi(a)),this.serializer=new RS(i),this.Ti=new PS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new jS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ai[e.toKey()];return a||(a=new BS(i,this.referenceDelegate),this.ai[e.toKey()]=a),a}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,i,a){at("MemoryPersistence","Starting transaction:",e);const o=new GS(this.ui.next());return this.referenceDelegate.Ii(),a(o).next(h=>this.referenceDelegate.di(o).next(()=>h)).toPromise().then(h=>(o.raiseOnCommittedEvent(),h))}Ei(e,i){return $.or(Object.values(this.ai).map(a=>()=>a.containsKey(e,i)))}}class GS extends vb{constructor(e){super(),this.currentSequenceNumber=e}}class Vd{constructor(e){this.persistence=e,this.Ai=new Od,this.Ri=null}static Vi(e){return new Vd(e)}get mi(){if(this.Ri)return this.Ri;throw _t(60996)}addReference(e,i,a){return this.Ai.addReference(a,i),this.mi.delete(a.toString()),$.resolve()}removeReference(e,i,a){return this.Ai.removeReference(a,i),this.mi.add(a.toString()),$.resolve()}markPotentiallyOrphaned(e,i){return this.mi.add(i.toString()),$.resolve()}removeTarget(e,i){this.Ai.zr(i.targetId).forEach(o=>this.mi.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(h=>this.mi.add(h.toString()))}).next(()=>a.removeTargetData(e,i))}Ii(){this.Ri=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,a=>{const o=dt.fromPath(a);return this.fi(e,o).next(h=>{h||i.removeEntry(o,Tt.min())})}).next(()=>(this.Ri=null,i.apply(e)))}updateLimboDocument(e,i){return this.fi(e,i).next(a=>{a?this.mi.delete(i.toString()):this.mi.add(i.toString())})}Pi(e){return 0}fi(e,i){return $.or([()=>$.resolve(this.Ai.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ei(e,i)])}}class fc{constructor(e,i){this.persistence=e,this.gi=new yr(a=>Ab(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=VS(this,i)}static Vi(e,i){return new fc(e,i)}Ii(){}di(e){return $.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}mr(e){const i=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>i.next(o=>a+o))}yr(e){let i=0;return this.gr(e,a=>{i++}).next(()=>i)}gr(e,i){return $.forEach(this.gi,(a,o)=>this.Sr(e,a,o).next(h=>h?$.resolve():i(o)))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ri(e,d=>this.Sr(e,d,i).next(g=>{g||(a++,h.removeEntry(d,Tt.min()))})).next(()=>h.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.gi.set(a,e.currentSequenceNumber),$.resolve()}removeReference(e,i,a){return this.gi.set(a,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}Pi(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=$u(e.data.value)),i}Sr(e,i,a){return $.or([()=>this.persistence.Ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.gi.get(i);return $.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Is=a,this.ds=o}static Es(e,i){let a=Ot(),o=Ot();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Md(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return k1()?8:Eb(z1())>0?6:4}()}initialize(e,i){this.gs=e,this.indexManager=i,this.As=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ps(e,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ys(e,i,o,a).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new FS;return this.ws(e,i,d).next(g=>{if(h.result=g,this.Rs)return this.Ss(e,i,d,g.size)})}).next(()=>h.result)}Ss(e,i,a,o){return a.documentReadCount<this.Vs?(ma()<=Pt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",ga(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(ma()<=Pt.DEBUG&&at("QueryEngine","Query:",ga(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.fs*o?(ma()<=Pt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",ga(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(i))):$.resolve())}ps(e,i){if(__(i))return $.resolve(null);let a=ii(i);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=rd(i,null,"F"),a=ii(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next(h=>{const d=Ot(...h);return this.gs.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,a).next(y=>{const v=this.bs(i,g);return this.Ds(i,v,d,y.readTime)?this.ps(e,rd(i,null,"F")):this.vs(e,v,i,y)}))})))}ys(e,i,a,o){return __(i)||o.isEqual(Tt.min())?$.resolve(null):this.gs.getDocuments(e,a).next(h=>{const d=this.bs(i,h);return this.Ds(i,d,a,o)?$.resolve(null):(ma()<=Pt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ga(i)),this.vs(e,d,i,gb(o,so)).next(g=>g))})}bs(e,i){let a=new xe(Gv(e));return i.forEach((o,h)=>{Tc(e,h)&&(a=a.add(h))}),a}Ds(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}ws(e,i,a){return ma()<=Pt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",ga(i)),this.gs.getDocumentsMatchingQuery(e,i,As.min(),a)}vs(e,i,a,o){return this.gs.getDocumentsMatchingQuery(e,a,o).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="LocalStore",QS=3e8;class KS{constructor(e,i,a,o){this.persistence=e,this.Cs=i,this.serializer=o,this.Fs=new re(xt),this.Ms=new yr(h=>Rd(h),wd),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(a)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new US(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Fs))}}function XS(r,e,i,a){return new KS(r,e,i,a)}async function d0(r,e){const i=At(r);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next(h=>(o=h,i.Ns(e),i.mutationQueue.getAllMutationBatches(a))).next(h=>{const d=[],g=[];let y=Ot();for(const v of o){d.push(v.batchId);for(const A of v.mutations)y=y.add(A.key)}for(const v of h){g.push(v.batchId);for(const A of v.mutations)y=y.add(A.key)}return i.localDocuments.getDocuments(a,y).next(v=>({Bs:v,removedBatchIds:d,addedBatchIds:g}))})})}function $S(r,e){const i=At(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),h=i.Os.newChangeBuffer({trackRemovals:!0});return function(g,y,v,A){const w=v.batch,b=w.keys();let B=$.resolve();return b.forEach(G=>{B=B.next(()=>A.getEntry(y,G)).next(tt=>{const J=v.docVersions.get(G);qt(J!==null,48541),tt.version.compareTo(J)<0&&(w.applyToRemoteDocument(tt,v),tt.isValidDocument()&&(tt.setReadTime(v.commitVersion),A.addEntry(tt)))})}),B.next(()=>g.mutationQueue.removeMutationBatch(y,w))}(i,a,e,h).next(()=>h.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let y=Ot();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y}(e))).next(()=>i.localDocuments.getDocuments(a,o))})}function m0(r){const e=At(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.hi.getLastRemoteSnapshotVersion(i))}function ZS(r,e){const i=At(r),a=e.snapshotVersion;let o=i.Fs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Os.newChangeBuffer({trackRemovals:!0});o=i.Fs;const g=[];e.targetChanges.forEach((A,w)=>{const b=o.get(w);if(!b)return;g.push(i.hi.removeMatchingKeys(h,A.removedDocuments,w).next(()=>i.hi.addMatchingKeys(h,A.addedDocuments,w)));let B=b.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(w)!==null?B=B.withResumeToken(Ge.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):A.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(A.resumeToken,a)),o=o.insert(w,B),function(tt,J,mt){return tt.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=QS?!0:mt.addedDocuments.size+mt.modifiedDocuments.size+mt.removedDocuments.size>0}(b,B,A)&&g.push(i.hi.updateTargetData(h,B))});let y=ji(),v=Ot();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))}),g.push(JS(h,d,e.documentUpdates).next(A=>{y=A.Ls,v=A.ks})),!a.isEqual(Tt.min())){const A=i.hi.getLastRemoteSnapshotVersion(h).next(w=>i.hi.setTargetsMetadata(h,h.currentSequenceNumber,a));g.push(A)}return $.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,y,v)).next(()=>y)}).then(h=>(i.Fs=o,h))}function JS(r,e,i){let a=Ot(),o=Ot();return i.forEach(h=>a=a.add(h)),e.getEntries(r,a).next(h=>{let d=ji();return i.forEach((g,y)=>{const v=h.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Tt.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):at(Ld,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)}),{Ls:d,ks:o}})}function WS(r,e){const i=At(r);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=Ad),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function t2(r,e){const i=At(r);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return i.hi.getTargetData(a,e).next(h=>h?(o=h,$.resolve(o)):i.hi.allocateTargetId(a).next(d=>(o=new ms(e,d,"TargetPurposeListen",a.currentSequenceNumber),i.hi.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=i.Fs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Fs=i.Fs.insert(a.targetId,a),i.Ms.set(e,a.targetId)),a})}async function cd(r,e,i){const a=At(r),o=a.Fs.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,d=>a.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Ia(d))throw d;at(Ld,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Fs=a.Fs.remove(e),a.Ms.delete(o.target)}function I_(r,e,i){const a=At(r);let o=Tt.min(),h=Ot();return a.persistence.runTransaction("Execute query","readwrite",d=>function(y,v,A){const w=At(y),b=w.Ms.get(A);return b!==void 0?$.resolve(w.Fs.get(b)):w.hi.getTargetData(v,A)}(a,d,ii(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.hi.getMatchingKeysForTargetId(d,g.targetId).next(y=>{h=y})}).next(()=>a.Cs.getDocumentsMatchingQuery(d,e,i?o:Tt.min(),i?h:Ot())).next(g=>(e2(a,kb(e),g),{documents:g,qs:h})))}function e2(r,e,i){let a=r.xs.get(e)||Tt.min();i.forEach((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)}),r.xs.set(e,a)}class O_{constructor(){this.activeTargetIds=Qb()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n2{constructor(){this.Fo=new O_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,i,a){this.Mo[e]=i}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new O_,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="ConnectivityMonitor";class M_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){at(V_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){at(V_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function hd(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="RestConnection",s2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r2{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=i+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.Ko=this.databaseId.database===ac?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,i,a,o,h){const d=hd(),g=this.Go(e,i.toUriEncodedString());at(Hf,`Sending RPC '${e}' ${d}:`,g,a);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,o,h);const{host:v}=new URL(g),A=_d(v);return this.jo(e,g,y,a,A).then(w=>(at(Hf,`Received RPC '${e}' ${d}: `,w),w),w=>{throw Ts(Hf,`RPC '${e}' ${d} failed with error: `,w,"url: ",g,"request:",a),w})}Jo(e,i,a,o,h,d){return this.Wo(e,i,a,o,h)}zo(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,h)=>e[h]=o),a&&a.headers.forEach((o,h)=>e[h]=o)}Go(e,i){const a=s2[e];return`${this.$o}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke="WebChannelConnection";class l2 extends r2{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,i,a,o,h){const d=hd();return new Promise((g,y)=>{const v=new gv;v.setWithCredentials(!0),v.listenOnce(pv.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Xu.NO_ERROR:const w=v.getResponseJson();at(Ke,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),g(w);break;case Xu.TIMEOUT:at(Ke,`RPC '${e}' ${d} timed out`),y(new rt(K.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:const b=v.getStatus();if(at(Ke,`RPC '${e}' ${d} failed with status:`,b,"response text:",v.getResponseText()),b>0){let B=v.getResponseJson();Array.isArray(B)&&(B=B[0]);const G=B==null?void 0:B.error;if(G&&G.status&&G.message){const tt=function(mt){const ut=mt.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ut)>=0?ut:K.UNKNOWN}(G.status);y(new rt(tt,G.message))}else y(new rt(K.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new rt(K.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{at(Ke,`RPC '${e}' ${d} completed.`)}});const A=JSON.stringify(o);at(Ke,`RPC '${e}' ${d} sending request:`,o),v.send(i,"POST",A,a,15)})}P_(e,i,a){const o=hd(),h=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=vv(),g=_v(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,i,a),y.encodeInitMessageHeaders=!0;const A=h.join("");at(Ke,`Creating RPC '${e}' stream ${o}: ${A}`,y);const w=d.createWebChannel(A,y);this.T_(w);let b=!1,B=!1;const G=new a2({Ho:J=>{B?at(Ke,`Not sending because RPC '${e}' stream ${o} is closed:`,J):(b||(at(Ke,`Opening RPC '${e}' stream ${o} transport.`),w.open(),b=!0),at(Ke,`RPC '${e}' stream ${o} sending:`,J),w.send(J))},Yo:()=>w.close()}),tt=(J,mt,ut)=>{J.listen(mt,st=>{try{ut(st)}catch(Rt){setTimeout(()=>{throw Rt},0)}})};return tt(w,Gl.EventType.OPEN,()=>{B||(at(Ke,`RPC '${e}' stream ${o} transport opened.`),G.s_())}),tt(w,Gl.EventType.CLOSE,()=>{B||(B=!0,at(Ke,`RPC '${e}' stream ${o} transport closed`),G.__(),this.I_(w))}),tt(w,Gl.EventType.ERROR,J=>{B||(B=!0,Ts(Ke,`RPC '${e}' stream ${o} transport errored. Name:`,J.name,"Message:",J.message),G.__(new rt(K.UNAVAILABLE,"The operation could not be completed")))}),tt(w,Gl.EventType.MESSAGE,J=>{var mt;if(!B){const ut=J.data[0];qt(!!ut,16349);const st=ut,Rt=(st==null?void 0:st.error)||((mt=st[0])===null||mt===void 0?void 0:mt.error);if(Rt){at(Ke,`RPC '${e}' stream ${o} received error:`,Rt);const ht=Rt.status;let wt=function(x){const O=ve[x];if(O!==void 0)return e0(O)}(ht),V=Rt.message;wt===void 0&&(wt=K.INTERNAL,V="Unknown error status: "+ht+" with message "+Rt.message),B=!0,G.__(new rt(wt,V)),w.close()}else at(Ke,`RPC '${e}' stream ${o} received:`,ut),G.a_(ut)}}),tt(g,yv.STAT_EVENT,J=>{J.stat===Jf.PROXY?at(Ke,`RPC '${e}' stream ${o} detected buffering proxy`):J.stat===Jf.NOPROXY&&at(Ke,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.o_()},0),G}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(i=>i===e)}}function Gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(r){return new hS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,i,a=1e3,o=1.5,h=6e4){this.Fi=e,this.timerId=i,this.d_=a,this.E_=o,this.A_=h,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const i=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),o=Math.max(0,i-a);o>0&&at("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="PersistentStream";class p0{constructor(e,i,a,o,h,d,g,y){this.Fi=e,this.w_=a,this.S_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new g0(e,i)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():i&&i.code===K.RESOURCE_EXHAUSTED?(Pi(i.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):i&&i.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(i)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),i=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.b_===i&&this.W_(a,o)},a=>{e(()=>{const o=new rt(K.UNKNOWN,"Fetching auth token failed: "+a.message);return this.G_(o)})})}W_(e,i){const a=this.K_(this.b_);this.stream=this.z_(e,i),this.stream.Zo(()=>{a(()=>this.listener.Zo())}),this.stream.e_(()=>{a(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{a(()=>this.G_(o))}),this.stream.onMessage(o=>{a(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return at(L_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return i=>{this.Fi.enqueueAndForget(()=>this.b_===e?i():(at(L_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o2 extends p0{constructor(e,i,a,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}z_(e,i){return this.connection.P_("Listen",e,i)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const i=mS(this.serializer,e),a=function(h){if(!("targetChange"in h))return Tt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?ri(d.readTime):Tt.min()}(e);return this.listener.J_(i,a)}H_(e){const i={};i.database=ud(this.serializer),i.addTarget=function(h,d){let g;const y=d.target;if(g=id(y)?{documents:yS(h,y)}:{query:_S(h,y).Vt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=s0(h,d.resumeToken);const v=ad(h,d.expectedCount);v!==null&&(g.expectedCount=v)}else if(d.snapshotVersion.compareTo(Tt.min())>0){g.readTime=hc(h,d.snapshotVersion.toTimestamp());const v=ad(h,d.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,e);const a=ES(this.serializer,e);a&&(i.labels=a),this.k_(i)}Y_(e){const i={};i.database=ud(this.serializer),i.removeTarget=e,this.k_(i)}}class u2 extends p0{constructor(e,i,a,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,i){return this.connection.P_("Write",e,i)}j_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const i=pS(e.writeResults,e.commitTime),a=ri(e.commitTime);return this.listener.ta(a,i)}na(){const e={};e.database=ud(this.serializer),this.k_(e)}X_(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>gS(this.serializer,a))};this.k_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{}class h2 extends c2{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new rt(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,i,a,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Wo(e,ld(i,a),o,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new rt(K.UNKNOWN,h.toString())})}Jo(e,i,a,o,h){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Jo(e,ld(i,a),o,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new rt(K.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class f2{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pi(i),this._a=!1):at("OnlineStateTracker",i)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="RemoteStore";class d2{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=h,this.Ea.xo(d=>{a.enqueueAndForget(async()=>{vr(this)&&(at(gr,"Restarting streams for network reachability change."),await async function(y){const v=At(y);v.Ia.add(4),await po(v),v.Aa.set("Unknown"),v.Ia.delete(4),await wc(v)}(this))})}),this.Aa=new f2(a,o)}}async function wc(r){if(vr(r))for(const e of r.da)await e(!0)}async function po(r){for(const e of r.da)await e(!1)}function y0(r,e){const i=At(r);i.Ta.has(e.targetId)||(i.Ta.set(e.targetId,e),zd(i)?jd(i):Va(i).x_()&&Pd(i,e))}function Ud(r,e){const i=At(r),a=Va(i);i.Ta.delete(e),a.x_()&&_0(i,e),i.Ta.size===0&&(a.x_()?a.B_():vr(i)&&i.Aa.set("Unknown"))}function Pd(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Va(r).H_(e)}function _0(r,e){r.Ra.$e(e),Va(r).Y_(e)}function jd(r){r.Ra=new lS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Va(r).start(),r.Aa.aa()}function zd(r){return vr(r)&&!Va(r).M_()&&r.Ta.size>0}function vr(r){return At(r).Ia.size===0}function v0(r){r.Ra=void 0}async function m2(r){r.Aa.set("Online")}async function g2(r){r.Ta.forEach((e,i)=>{Pd(r,e)})}async function p2(r,e){v0(r),zd(r)?(r.Aa.la(e),jd(r)):r.Aa.set("Unknown")}async function y2(r,e,i){if(r.Aa.set("Online"),e instanceof i0&&e.state===2&&e.cause)try{await async function(o,h){const d=h.cause;for(const g of h.targetIds)o.Ta.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ta.delete(g),o.Ra.removeTarget(g))}(r,e)}catch(a){at(gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await dc(r,a)}else if(e instanceof Wu?r.Ra.Ye(e):e instanceof n0?r.Ra.it(e):r.Ra.et(e),!i.isEqual(Tt.min()))try{const a=await m0(r.localStore);i.compareTo(a)>=0&&await function(h,d){const g=h.Ra.Pt(d);return g.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const A=h.Ta.get(v);A&&h.Ta.set(v,A.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach((y,v)=>{const A=h.Ta.get(y);if(!A)return;h.Ta.set(y,A.withResumeToken(Ge.EMPTY_BYTE_STRING,A.snapshotVersion)),_0(h,y);const w=new ms(A.target,y,v,A.sequenceNumber);Pd(h,w)}),h.remoteSyncer.applyRemoteEvent(g)}(r,i)}catch(a){at(gr,"Failed to raise snapshot:",a),await dc(r,a)}}async function dc(r,e,i){if(!Ia(e))throw e;r.Ia.add(1),await po(r),r.Aa.set("Offline"),i||(i=()=>m0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at(gr,"Retrying IndexedDB access"),await i(),r.Ia.delete(1),await wc(r)})}function E0(r,e){return e().catch(i=>dc(r,i,e))}async function Cc(r){const e=At(r),i=ws(e);let a=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ad;for(;_2(e);)try{const o=await WS(e.localStore,a);if(o===null){e.Pa.length===0&&i.B_();break}a=o.batchId,v2(e,o)}catch(o){await dc(e,o)}T0(e)&&A0(e)}function _2(r){return vr(r)&&r.Pa.length<10}function v2(r,e){r.Pa.push(e);const i=ws(r);i.x_()&&i.Z_&&i.X_(e.mutations)}function T0(r){return vr(r)&&!ws(r).M_()&&r.Pa.length>0}function A0(r){ws(r).start()}async function E2(r){ws(r).na()}async function T2(r){const e=ws(r);for(const i of r.Pa)e.X_(i.mutations)}async function A2(r,e,i){const a=r.Pa.shift(),o=Dd.from(a,e,i);await E0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Cc(r)}async function b2(r,e){e&&ws(r).Z_&&await async function(a,o){if(function(d){return rS(d)&&d!==K.ABORTED}(o.code)){const h=a.Pa.shift();ws(a).N_(),await E0(a,()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o)),await Cc(a)}}(r,e),T0(r)&&A0(r)}async function U_(r,e){const i=At(r);i.asyncQueue.verifyOperationInProgress(),at(gr,"RemoteStore received new credentials");const a=vr(i);i.Ia.add(3),await po(i),a&&i.Aa.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ia.delete(3),await wc(i)}async function S2(r,e){const i=At(r);e?(i.Ia.delete(2),await wc(i)):e||(i.Ia.add(2),await po(i),i.Aa.set("Unknown"))}function Va(r){return r.Va||(r.Va=function(i,a,o){const h=At(i);return h.ia(),new o2(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)}(r.datastore,r.asyncQueue,{Zo:m2.bind(null,r),e_:g2.bind(null,r),n_:p2.bind(null,r),J_:y2.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),zd(r)?jd(r):r.Aa.set("Unknown")):(await r.Va.stop(),v0(r))})),r.Va}function ws(r){return r.ma||(r.ma=function(i,a,o){const h=At(i);return h.ia(),new u2(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:E2.bind(null,r),n_:b2.bind(null,r),ea:T2.bind(null,r),ta:A2.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await Cc(r)):(await r.ma.stop(),r.Pa.length>0&&(at(gr,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const d=Date.now()+a,g=new Bd(e,i,d,o,h);return g.start(a),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(r,e){if(Pi("AsyncQueue",`${e}: ${r}`),Ia(r))return new rt(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static emptySet(e){return new va(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||dt.comparator(i.key,a.key):(i,a)=>dt.comparator(i.key,a.key),this.keyedMap=Fl(),this.sortedSet=new re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new va;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.fa=new re(dt.comparator)}track(e){const i=e.doc.key,a=this.fa.get(i);a?e.type!==0&&a.type===3?this.fa=this.fa.insert(i,e):e.type===3&&a.type!==1?this.fa=this.fa.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.fa=this.fa.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.fa=this.fa.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.fa=this.fa.remove(i):e.type===1&&a.type===2?this.fa=this.fa.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.fa=this.fa.insert(i,{type:2,doc:e.doc}):_t(63341,{At:e,ga:a}):this.fa=this.fa.insert(i,e)}pa(){const e=[];return this.fa.inorderTraversal((i,a)=>{e.push(a)}),e}}class Ca{constructor(e,i,a,o,h,d,g,y,v){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,i,a,o,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Ca(e,i,va.emptySet(i),d,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ec(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class w2{constructor(){this.queries=j_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(i,a){const o=At(i),h=o.queries;o.queries=j_(),h.forEach((d,g)=>{for(const y of g.wa)y.onError(a)})})(this,new rt(K.ABORTED,"Firestore shutting down"))}}function j_(){return new yr(r=>Hv(r),Ec)}async function C2(r,e){const i=At(r);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.Sa()&&e.ba()&&(a=2):(h=new R2,a=e.ba()?0:1);try{switch(a){case 0:h.ya=await i.onListen(o,!0);break;case 1:h.ya=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const g=kd(d,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(g)}i.queries.set(o,h),h.wa.push(e),e.va(i.onlineState),h.ya&&e.Ca(h.ya)&&qd(i)}async function x2(r,e){const i=At(r),a=e.query;let o=3;const h=i.queries.get(a);if(h){const d=h.wa.indexOf(e);d>=0&&(h.wa.splice(d,1),h.wa.length===0?o=e.ba()?0:1:!h.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function D2(r,e){const i=At(r);let a=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const g of d.wa)g.Ca(o)&&(a=!0);d.ya=o}}a&&qd(i)}function N2(r,e,i){const a=At(r),o=a.queries.get(e);if(o)for(const h of o.wa)h.onError(i);a.queries.delete(e)}function qd(r){r.Da.forEach(e=>{e.next()})}var fd,z_;(z_=fd||(fd={})).Fa="default",z_.Cache="cache";class I2{constructor(e,i,a){this.query=e,this.Ma=i,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=a||{}}Ca(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ca(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),i=!0):this.Ba(e,this.onlineState)&&(this.La(e),i=!0),this.Oa=e,i}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let i=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),i=!0),i}Ba(e,i){if(!e.fromCache||!this.ba())return!0;const a=i!=="Offline";return(!this.options.ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const i=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}La(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.key=e}}class S0{constructor(e){this.key=e}}class O2{constructor(e,i){this.query=e,this.Ha=i,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ot(),this.mutatedKeys=Ot(),this.Xa=Gv(e),this.eu=new va(this.Xa)}get tu(){return this.Ha}nu(e,i){const a=i?i.ru:new P_,o=i?i.eu:this.eu;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,w)=>{const b=o.get(A),B=Tc(this.query,w)?w:null,G=!!b&&this.mutatedKeys.has(b.key),tt=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let J=!1;b&&B?b.data.isEqual(B.data)?G!==tt&&(a.track({type:3,doc:B}),J=!0):this.iu(b,B)||(a.track({type:2,doc:B}),J=!0,(y&&this.Xa(B,y)>0||v&&this.Xa(B,v)<0)&&(g=!0)):!b&&B?(a.track({type:0,doc:B}),J=!0):b&&!B&&(a.track({type:1,doc:b}),J=!0,(y||v)&&(g=!0)),J&&(B?(d=d.add(B),h=tt?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),a.track({type:1,doc:A})}return{eu:d,ru:a,Ds:g,mutatedKeys:h}}iu(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((A,w)=>function(B,G){const tt=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{At:J})}};return tt(B)-tt(G)}(A.type,w.type)||this.Xa(A.doc,w.doc)),this.su(a),o=o!=null&&o;const g=i&&!o?this.ou():[],y=this.Za.size===0&&this.current&&!o?1:0,v=y!==this.Ya;return this.Ya=y,d.length!==0||v?{snapshot:new Ca(this.query,e.eu,h,d,e.mutatedKeys,y===0,v,!1,!!a&&a.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new P_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ot(),this.eu.forEach(a=>{this.au(a.key)&&(this.Za=this.Za.add(a.key))});const i=[];return e.forEach(a=>{this.Za.has(a)||i.push(new S0(a))}),this.Za.forEach(a=>{e.has(a)||i.push(new b0(a))}),i}uu(e){this.Ha=e.qs,this.Za=Ot();const i=this.nu(e.documents);return this.applyChanges(i,!0)}cu(){return Ca.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Hd="SyncEngine";class V2{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class M2{constructor(e){this.key=e,this.lu=!1}}class L2{constructor(e,i,a,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new yr(g=>Hv(g),Ec),this.Tu=new Map,this.Iu=new Set,this.du=new re(dt.comparator),this.Eu=new Map,this.Au=new Od,this.Ru={},this.Vu=new Map,this.mu=wa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function U2(r,e,i=!0){const a=N0(r);let o;const h=a.Pu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.cu()):o=await R0(a,e,i,!0),o}async function P2(r,e){const i=N0(r);await R0(i,e,!0,!1)}async function R0(r,e,i,a){const o=await t2(r.localStore,ii(e)),h=o.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await j2(r,e,h,d==="current",o.resumeToken)),r.isPrimaryClient&&i&&y0(r.remoteStore,o),g}async function j2(r,e,i,a,o){r.gu=(w,b,B)=>async function(tt,J,mt,ut){let st=J.view.nu(mt);st.Ds&&(st=await I_(tt.localStore,J.query,!1).then(({documents:V})=>J.view.nu(V,st)));const Rt=ut&&ut.targetChanges.get(J.targetId),ht=ut&&ut.targetMismatches.get(J.targetId)!=null,wt=J.view.applyChanges(st,tt.isPrimaryClient,Rt,ht);return k_(tt,J.targetId,wt._u),wt.snapshot}(r,w,b,B);const h=await I_(r.localStore,e,!0),d=new O2(e,h.qs),g=d.nu(h.documents),y=go.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),v=d.applyChanges(g,r.isPrimaryClient,y);k_(r,i,v._u);const A=new V2(e,i,d);return r.Pu.set(e,A),r.Tu.has(i)?r.Tu.get(i).push(e):r.Tu.set(i,[e]),v.snapshot}async function z2(r,e,i){const a=At(r),o=a.Pu.get(e),h=a.Tu.get(o.targetId);if(h.length>1)return a.Tu.set(o.targetId,h.filter(d=>!Ec(d,e))),void a.Pu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await cd(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Ud(a.remoteStore,o.targetId),dd(a,o.targetId)}).catch(Na)):(dd(a,o.targetId),await cd(a.localStore,o.targetId,!0))}async function B2(r,e){const i=At(r),a=i.Pu.get(e),o=i.Tu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Ud(i.remoteStore,a.targetId))}async function k2(r,e,i){const a=K2(r);try{const o=await function(d,g){const y=At(d),v=Jt.now(),A=g.reduce((B,G)=>B.add(G.key),Ot());let w,b;return y.persistence.runTransaction("Locally write mutations","readwrite",B=>{let G=ji(),tt=Ot();return y.Os.getEntries(B,A).next(J=>{G=J,G.forEach((mt,ut)=>{ut.isValidDocument()||(tt=tt.add(mt))})}).next(()=>y.localDocuments.getOverlayedDocuments(B,G)).next(J=>{w=J;const mt=[];for(const ut of g){const st=tS(ut,w.get(ut.key).overlayedDocument);st!=null&&mt.push(new _r(ut.key,st,Mv(st.value.mapValue),si.exists(!0)))}return y.mutationQueue.addMutationBatch(B,v,mt,g)}).next(J=>{b=J;const mt=J.applyToLocalDocumentSet(w,tt);return y.documentOverlayCache.saveOverlays(B,J.batchId,mt)})}).then(()=>({batchId:b.batchId,changes:Yv(w)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(d,g,y){let v=d.Ru[d.currentUser.toKey()];v||(v=new re(xt)),v=v.insert(g,y),d.Ru[d.currentUser.toKey()]=v}(a,o.batchId,i),await yo(a,o.changes),await Cc(a.remoteStore)}catch(o){const h=kd(o,"Failed to persist write");i.reject(h)}}async function w0(r,e){const i=At(r);try{const a=await ZS(i.localStore,e);e.targetChanges.forEach((o,h)=>{const d=i.Eu.get(h);d&&(qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?qt(d.lu,14607):o.removedDocuments.size>0&&(qt(d.lu,42227),d.lu=!1))}),await yo(i,a,e)}catch(a){await Na(a)}}function B_(r,e,i){const a=At(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.Pu.forEach((h,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)}),function(d,g){const y=At(d);y.onlineState=g;let v=!1;y.queries.forEach((A,w)=>{for(const b of w.wa)b.va(g)&&(v=!0)}),v&&qd(y)}(a.eventManager,e),o.length&&a.hu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function q2(r,e,i){const a=At(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Eu.get(e),h=o&&o.key;if(h){let d=new re(dt.comparator);d=d.insert(h,$e.newNoDocument(h,Tt.min()));const g=Ot().add(h),y=new Sc(Tt.min(),new Map,new re(xt),d,g);await w0(a,y),a.du=a.du.remove(h),a.Eu.delete(e),Gd(a)}else await cd(a.localStore,e,!1).then(()=>dd(a,e,i)).catch(Na)}async function H2(r,e){const i=At(r),a=e.batch.batchId;try{const o=await $S(i.localStore,e);x0(i,a,null),C0(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await yo(i,o)}catch(o){await Na(o)}}async function G2(r,e,i){const a=At(r);try{const o=await function(d,g){const y=At(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let A;return y.mutationQueue.lookupMutationBatch(v,g).next(w=>(qt(w!==null,37113),A=w.keys(),y.mutationQueue.removeMutationBatch(v,w))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,A,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,A)).next(()=>y.localDocuments.getDocuments(v,A))})}(a.localStore,e);x0(a,e,i),C0(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await yo(a,o)}catch(o){await Na(o)}}function C0(r,e){(r.Vu.get(e)||[]).forEach(i=>{i.resolve()}),r.Vu.delete(e)}function x0(r,e,i){const a=At(r);let o=a.Ru[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Ru[a.currentUser.toKey()]=o}}function dd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Tu.get(e))r.Pu.delete(a),i&&r.hu.pu(a,i);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(a=>{r.Au.containsKey(a)||D0(r,a)})}function D0(r,e){r.Iu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(Ud(r.remoteStore,i),r.du=r.du.remove(e),r.Eu.delete(i),Gd(r))}function k_(r,e,i){for(const a of i)a instanceof b0?(r.Au.addReference(a.key,e),F2(r,a)):a instanceof S0?(at(Hd,"Document no longer in limbo: "+a.key),r.Au.removeReference(a.key,e),r.Au.containsKey(a.key)||D0(r,a.key)):_t(19791,{yu:a})}function F2(r,e){const i=e.key,a=i.path.canonicalString();r.du.get(i)||r.Iu.has(a)||(at(Hd,"New document in limbo: "+i),r.Iu.add(a),Gd(r))}function Gd(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const i=new dt(te.fromString(e)),a=r.mu.next();r.Eu.set(a,new M2(i)),r.du=r.du.insert(i,a),y0(r.remoteStore,new ms(ii(kv(i.path)),a,"TargetPurposeLimboResolution",yc.ue))}}async function yo(r,e,i){const a=At(r),o=[],h=[],d=[];a.Pu.isEmpty()||(a.Pu.forEach((g,y)=>{d.push(a.gu(y,e,i).then(v=>{var A;if((v||i)&&a.isPrimaryClient){const w=v?!v.fromCache:(A=i==null?void 0:i.targetChanges.get(y.targetId))===null||A===void 0?void 0:A.current;a.sharedClientState.updateQueryState(y.targetId,w?"current":"not-current")}if(v){o.push(v);const w=Md.Es(y.targetId,v);h.push(w)}}))}),await Promise.all(d),a.hu.J_(o),await async function(y,v){const A=At(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>$.forEach(v,b=>$.forEach(b.Is,B=>A.persistence.referenceDelegate.addReference(w,b.targetId,B)).next(()=>$.forEach(b.ds,B=>A.persistence.referenceDelegate.removeReference(w,b.targetId,B)))))}catch(w){if(!Ia(w))throw w;at(Ld,"Failed to update sequence numbers: "+w)}for(const w of v){const b=w.targetId;if(!w.fromCache){const B=A.Fs.get(b),G=B.snapshotVersion,tt=B.withLastLimboFreeSnapshotVersion(G);A.Fs=A.Fs.insert(b,tt)}}}(a.localStore,h))}async function Y2(r,e){const i=At(r);if(!i.currentUser.isEqual(e)){at(Hd,"User change. New user:",e.toKey());const a=await d0(i.localStore,e);i.currentUser=e,function(h,d){h.Vu.forEach(g=>{g.forEach(y=>{y.reject(new rt(K.CANCELLED,d))})}),h.Vu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await yo(i,a.Bs)}}function Q2(r,e){const i=At(r),a=i.Eu.get(e);if(a&&a.lu)return Ot().add(a.key);{let o=Ot();const h=i.Tu.get(e);if(!h)return o;for(const d of h){const g=i.Pu.get(d);o=o.unionWith(g.view.tu)}return o}}function N0(r){const e=At(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=w0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q2.bind(null,e),e.hu.J_=D2.bind(null,e.eventManager),e.hu.pu=N2.bind(null,e.eventManager),e}function K2(r){const e=At(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G2.bind(null,e),e}class mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,i){return null}Fu(e,i){return null}vu(e){return XS(this.persistence,new YS,e.initialUser,this.serializer)}Du(e){return new f0(Vd.Vi,this.serializer)}bu(e){return new n2}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mc.provider={build:()=>new mc};class X2 extends mc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,i){qt(this.persistence.referenceDelegate instanceof fc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new IS(a,e.asyncQueue,i)}Du(e){const i=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new f0(a=>fc.Vi(a,i),this.serializer)}}class md{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>B_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y2.bind(null,this.syncEngine),await S2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w2}()}createDatastore(e){const i=Rc(e.databaseInfo.databaseId),a=function(h){return new l2(h)}(e.databaseInfo);return function(h,d,g,y){return new h2(h,d,g,y)}(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return function(a,o,h,d,g){return new d2(a,o,h,d,g)}(this.localStore,this.datastore,e.asyncQueue,i=>B_(this.syncEngine,i,0),function(){return M_.C()?new M_:new i2}())}createSyncEngine(e,i){return function(o,h,d,g,y,v,A){const w=new L2(o,h,d,g,y,v);return A&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const h=At(o);at(gr,"RemoteStore shutting down."),h.Ia.add(5),await po(h),h.Ea.shutdown(),h.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}md.provider={build:()=>new md};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class Z2{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=Xe.UNAUTHENTICATED,this.clientId=Td.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,async d=>{at(Cs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(at(Cs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=kd(i,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Ff(r,e){r.asyncQueue.verifyOperationInProgress(),at(Cs,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener(async o=>{a.isEqual(o)||(await d0(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>{Ts("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{at("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Ts("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function q_(r,e){r.asyncQueue.verifyOperationInProgress();const i=await J2(r);at(Cs,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener(a=>U_(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,o)=>U_(e.remoteStore,o)),r._onlineComponents=e}async function J2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(Cs,"Using user provided OfflineComponentProvider");try{await Ff(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;Ts("Error using user provided cache. Falling back to memory cache: "+i),await Ff(r,new mc)}}else at(Cs,"Using default OfflineComponentProvider"),await Ff(r,new X2(void 0));return r._offlineComponents}async function I0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(Cs,"Using user provided OnlineComponentProvider"),await q_(r,r._uninitializedComponentsProvider._online)):(at(Cs,"Using default OnlineComponentProvider"),await q_(r,new md))),r._onlineComponents}function W2(r){return I0(r).then(e=>e.syncEngine)}async function tR(r){const e=await I0(r),i=e.eventManager;return i.onListen=U2.bind(null,e.syncEngine),i.onUnlisten=z2.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=P2.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=B2.bind(null,e.syncEngine),i}function eR(r,e,i={}){const a=new vs;return r.asyncQueue.enqueueAndForget(async()=>function(h,d,g,y,v){const A=new $2({next:b=>{A.Ou(),d.enqueueAndForget(()=>x2(h,w)),b.fromCache&&y.source==="server"?v.reject(new rt(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:b=>v.reject(b)}),w=new I2(g,A,{includeMetadataChanges:!0,ka:!0});return C2(h,w)}(await tR(r),r.asyncQueue,e,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="firestore.googleapis.com",G_=!0;class F_{constructor(e){var i,a;if(e.host===void 0){if(e.ssl!==void 0)throw new rt(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V0,this.ssl=G_}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:G_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DS)throw new rt(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O0((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xc{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new rt(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new rb;switch(a.type){case"firstParty":return new ub(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new rt(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=H_.get(i);a&&(at("ComponentProvider","Removing Datastore"),H_.delete(i),a.terminate())}(this),Promise.resolve()}}function nR(r,e,i,a={}){var o;r=io(r,xc);const h=_d(e),d=r._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${i}`;h&&(M1(`https://${y}`),j1("Firestore",!0)),d.host!==V0&&d.host!==y&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:h,emulatorOptions:a});if(!nc(v,g)&&(r._setSettings(v),a.mockUserToken)){let A,w;if(typeof a.mockUserToken=="string")A=a.mockUserToken,w=Xe.MOCK_USER;else{A=L1(a.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new rt(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Xe(b)}r._authCredentials=new ab(new Tv(A,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class Ue{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(fo(i,Ue._jsonSchema))return new Ue(e,a||null,new dt(te.fromString(i.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Te("string",Ue._jsonSchemaVersion),referencePath:Te("string")};class Es extends Er{constructor(e,i,a){super(e,i,kv(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new dt(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function M0(r,e,...i){if(r=Aa(r),bv("collection","path",e),r instanceof xc){const a=te.fromString(e,...i);return s_(a),new Es(r,null,a)}{if(!(r instanceof Ue||r instanceof Es))throw new rt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(te.fromString(e,...i));return s_(a),new Es(r.firestore,null,a)}}function L0(r,e,...i){if(r=Aa(r),arguments.length===1&&(e=Td.newId()),bv("doc","path",e),r instanceof xc){const a=te.fromString(e,...i);return i_(a),new Ue(r,null,new dt(a))}{if(!(r instanceof Ue||r instanceof Es))throw new rt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(te.fromString(e,...i));return i_(a),new Ue(r.firestore,r instanceof Es?r.converter:null,new dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="AsyncQueue";class Q_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new g0(this,"async_queue_retry"),this.oc=()=>{const a=Gf();a&&at(Y_,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=e;const i=Gf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const i=Gf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const i=new vs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ia(e))throw e;at(Y_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const i=this._c.then(()=>(this.nc=!0,e().catch(a=>{throw this.tc=a,this.nc=!1,Pi("INTERNAL UNHANDLED ERROR: ",K_(a)),a}).then(a=>(this.nc=!1,a))));return this._c=i,i}enqueueAfterDelay(e,i,a){this.ac(),this.sc.indexOf(e)>-1&&(i=0);const o=Bd.createAndSchedule(this,e,i,a,h=>this.lc(h));return this.ec.push(o),o}ac(){this.tc&&_t(47125,{hc:K_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const i of this.ec)if(i.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.ec)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const i=this.ec.indexOf(e);this.ec.splice(i,1)}}function K_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Dc extends xc{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new Q_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q_(e),this._firestoreClient=void 0,await e}}}function iR(r,e){const i=typeof r=="object"?r:KA(),a=typeof r=="string"?r:ac,o=HA(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=O1("firestore");h&&nR(o,...h)}return o}function U0(r){if(r._terminated)throw new rt(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||sR(r),r._firestoreClient}function sR(r){var e,i,a;const o=r._freezeSettings(),h=function(g,y,v,A){return new Rb(g,y,v,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,O0(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new Z2(r._authCredentials,r._appCheckCredentials,r._queue,h,r._componentsProvider&&function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Ge.fromBase64String(e))}catch(i){throw new rt(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Nn(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fo(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:Te("string",Nn._jsonSchemaVersion),bytes:Te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new rt(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new rt(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new rt(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(fo(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:Te("string",ai._jsonSchemaVersion),latitude:Te("number"),longitude:Te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0}(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fo(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(i=>typeof i=="number"))return new li(e.vectorValues);throw new rt(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Te("string",li._jsonSchemaVersion),vectorValues:Te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=/^__.*__$/;class aR{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,i,this.fieldTransforms):new mo(e,this.data,i,this.fieldTransforms)}}function j0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ec:r})}}class Yd{constructor(e,i,a,o,h,d){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Ac(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.Rc({path:a,mc:!1});return o.fc(e),o}gc(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.Rc({path:a,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return gc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(j0(this.Ec)&&rR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lR{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Rc(e)}Dc(e,i,a,o=!1){return new Yd({Ec:e,methodName:i,bc:a,path:He.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z0(r){const e=r._freezeSettings(),i=Rc(r._databaseId);return new lR(r._databaseId,!!e.ignoreUndefinedProperties,i)}function oR(r,e,i,a,o,h={}){const d=r.Dc(h.merge||h.mergeFields?2:0,e,i,o);q0("Data must be an object, but it was:",d,a);const g=B0(a,d);let y,v;if(h.merge)y=new Pn(d.fieldMask),v=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const w of h.mergeFields){const b=cR(e,w,i);if(!d.contains(b))throw new rt(K.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);fR(A,b)||A.push(b)}y=new Pn(A),v=d.fieldTransforms.filter(w=>y.covers(w.field))}else y=null,v=d.fieldTransforms;return new aR(new Dn(g),y,v)}function uR(r,e,i,a=!1){return Qd(i,r.Dc(a?4:3,e))}function Qd(r,e){if(k0(r=Aa(r)))return q0("Unsupported field value:",e,r),B0(r,e);if(r instanceof P0)return function(a,o){if(!j0(o.Ec))throw o.wc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(a,o){const h=[];let d=0;for(const g of a){let y=Qd(g,o.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),d++}return{arrayValue:{values:h}}}(r,e)}return function(a,o){if((a=Aa(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Kb(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=Jt.fromDate(a);return{timestampValue:hc(o.serializer,h)}}if(a instanceof Jt){const h=new Jt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:hc(o.serializer,h)}}if(a instanceof ai)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Nn)return{bytesValue:s0(o.serializer,a._byteString)};if(a instanceof Ue){const h=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(h))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Id(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof li)return function(d,g){return{mapValue:{fields:{[Ov]:{stringValue:Vv},[lc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw g.wc("VectorValues must only contain numeric values.");return Cd(g.serializer,v)})}}}}}}(a,o);throw o.wc(`Unsupported field value: ${pc(a)}`)}(r,e)}function B0(r,e){const i={};return wv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(r,(a,o)=>{const h=Qd(o,e.Vc(a));h!=null&&(i[a]=h)}),{mapValue:{fields:i}}}function k0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Jt||r instanceof ai||r instanceof Nn||r instanceof Ue||r instanceof P0||r instanceof li)}function q0(r,e,i){if(!k0(i)||!Sv(i)){const a=pc(i);throw a==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+a)}}function cR(r,e,i){if((e=Aa(e))instanceof Fd)return e._internalPath;if(typeof e=="string")return H0(r,e);throw gc("Field path arguments must be of type string or ",r,!1,void 0,i)}const hR=new RegExp("[~\\*/\\[\\]]");function H0(r,e,i){if(e.search(hR)>=0)throw gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Fd(...e.split("."))._internalPath}catch{throw gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function gc(r,e,i,a,o){const h=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(h||d)&&(y+=" (found",h&&(y+=` in field ${a}`),d&&(y+=` in document ${o}`),y+=")"),new rt(K.INVALID_ARGUMENT,g+r+y)}function fR(r,e){return r.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Kd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class dR extends G0{data(){return super.data()}}function Kd(r,e){return typeof e=="string"?H0(r,e):e instanceof Fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new rt(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xd{}class F0 extends Xd{}function gR(r,e,...i){let a=[];e instanceof Xd&&a.push(e),a=a.concat(i),function(h){const d=h.filter(y=>y instanceof Zd).length,g=h.filter(y=>y instanceof $d).length;if(d>1||d>0&&g>0)throw new rt(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)r=o._apply(r);return r}class $d extends F0{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new $d(e,i,a)}_apply(e){const i=this._parse(e);return Y0(e._query,i),new Er(e.firestore,e.converter,sd(e._query,i))}_parse(e){const i=z0(e.firestore);return function(h,d,g,y,v,A,w){let b;if(v.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new rt(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){$_(w,A);const G=[];for(const tt of w)G.push(X_(y,h,tt));b={arrayValue:{values:G}}}else b=X_(y,h,w)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||$_(w,A),b=uR(g,d,w,A==="in"||A==="not-in");return Ee.create(v,A,b)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class Zd extends Xd{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Zd(e,i)}_parse(e){const i=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:jn.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,h){let d=o;const g=h.getFlattenedFilters();for(const y of g)Y0(d,y),d=sd(d,y)}(e._query,i),new Er(e.firestore,e.converter,sd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jd extends F0{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new Jd(e,i)}_apply(e){const i=function(o,h,d){if(o.startAt!==null)throw new rt(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new rt(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oo(h,d)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(o,h){const d=o.explicitOrderBy.concat([h]);return new Oa(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,i))}}function pR(r,e="asc"){const i=e,a=Kd("orderBy",r);return Jd._create(a,i)}function X_(r,e,i){if(typeof(i=Aa(i))=="string"){if(i==="")throw new rt(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&i.indexOf("/")!==-1)throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(te.fromString(i));if(!dt.isDocumentKey(a))throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return f_(r,new dt(a))}if(i instanceof Ue)return f_(r,i._key);throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pc(i)}.`)}function $_(r,e){if(!Array.isArray(r)||r.length===0)throw new rt(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y0(r,e){const i=function(o,h){for(const d of o)for(const g of d.getFlattenedFilters())if(h.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new rt(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new rt(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class yR{convertValue(e,i="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return de(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw _t(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return pr(e,(o,h)=>{a[o]=this.convertValue(h,i)}),a}convertVectorValue(e){var i,a,o;const h=(o=(a=(i=e.fields)===null||i===void 0?void 0:i[lc].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(d=>de(d.doubleValue));return new li(h)}convertGeoPoint(e){return new ai(de(e.latitude),de(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=vc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(ro(e));default:return null}}convertTimestamp(e){const i=bs(e);return new Jt(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=te.fromString(e);qt(c0(a),9688,{name:e});const o=new ao(a.get(1),a.get(3)),h=new dt(a.popFirst(5));return o.isEqual(i)||Pi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(r,e,i){let a;return a=r?r.toFirestore(e):e,a}class Qu{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ea extends G0{constructor(e,i,a,o,h,d){super(e,i,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(Kd("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Ea._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:Te("string",Ea._jsonSchemaVersion),bundleSource:Te("string","DocumentSnapshot"),bundleName:Te("string"),bundle:Te("string")};class tc extends Ea{data(e={}){return super.data(e)}}class Ta{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Qu(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new tc(this._firestore,this._userDataWriter,a.key,a,new Qu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new rt(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>{const y=new tc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Qu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const y=new tc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Qu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,A=-1;return g.type!==0&&(v=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:vR(g.type),doc:y,oldIndex:v,newIndex:A}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Td.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],o=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),a.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:r})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:Te("string",Ta._jsonSchemaVersion),bundleSource:Te("string","QuerySnapshot"),bundleName:Te("string"),bundle:Te("string")};class ER extends yR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,i)}}function TR(r){r=io(r,Er);const e=io(r.firestore,Dc),i=U0(e),a=new ER(e);return mR(r._query),eR(i,r._query).then(o=>new Ta(e,a,r,o))}function AR(r){return Q0(io(r.firestore,Dc),[new xd(r._key,si.none())])}function bR(r,e){const i=io(r.firestore,Dc),a=L0(r),o=_R(r.converter,e);return Q0(i,[oR(z0(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,si.exists(!1))]).then(()=>a)}function Q0(r,e){return function(a,o){const h=new vs;return a.asyncQueue.enqueueAndForget(async()=>k2(await W2(a),o,h)),h.promise}(U0(r),e)}(function(e,i=!0){(function(o){Da=o})(QA),sc(new eo("firestore",(a,{instanceIdentifier:o,options:h})=>{const d=a.getProvider("app").getImmediate(),g=new Dc(new lb(a.getProvider("auth-internal")),new cb(d,a.getProvider("app-check-internal")),function(v,A){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new rt(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(v.options.projectId,A)}(d,o),d);return h=Object.assign({useFetchStreams:i},h),g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),_a(Jy,Wy,e),_a(Jy,Wy,"esm2017")})();var SR="firebase",RR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_a(SR,RR,"app");const wR={apiKey:"AIzaSyBYJ8aGffq3DoTyx-MKHDLqKTzqJVIrdws",authDomain:"dualgrade.firebaseapp.com",projectId:"dualgrade",storageBucket:"dualgrade.appspot.com",messagingSenderId:"588826913037",appId:"1:588826913037:web:65d0b141a93b8c6233a844"},CR=hv(wR),Wd=iR(CR);async function xR(r,e,i="",a=""){console.log("Intentando guardar evaluación:",r,e);try{const o=Object.values(e).reduce((v,A)=>v+(A||0),0),h=Object.keys(e).length*4,d=Math.round(o/h*100),g={studentName:r,scores:e,feedbackText:i,totalScore:o,percentage:d,createdAt:Jt.now(),updatedAt:Jt.now(),evaluatorName:a},y=await bR(M0(Wd,"evaluations"),g);return console.log("Evaluación guardada con ID:",y.id),y.id}catch(o){throw console.error("Error al guardar evaluación:",o),new Error("No se pudo guardar la evaluación")}}async function K0(){try{const r=gR(M0(Wd,"evaluations"),pR("createdAt","desc")),e=await TR(r),i=[];return e.forEach(a=>{i.push({id:a.id,...a.data()})}),i}catch(r){throw console.error("Error al obtener evaluaciones:",r),new Error("No se pudieron cargar las evaluaciones")}}async function DR(r){try{await AR(L0(Wd,"evaluations",r)),console.log("Evaluación eliminada:",r)}catch(e){throw console.error("Error al eliminar evaluación:",e),new Error("No se pudo eliminar la evaluación")}}async function NR(){try{const r=await K0();for(const e of r)e.id&&await DR(e.id);console.log("Todas las evaluaciones han sido eliminadas de Firestore.")}catch(r){console.error("Error clearing evaluations from Firestore:",r)}}const IR=r=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm.375-12H8.25V4.5h2.25V18M12 4.5h3.75m-3.75 3h3.75m-3.75 3h3.75m-3.75 3h3.75M12 18h3.75"})}),OR=r=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.25 12h.008v.008h-.008V12Zm0 3h.008v.008h-.008V15Zm0 3h.008v.008h-.008V18Z"})}),VR=r=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),MR=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5a2.25 2.25 0 0 1-2.25 2.25H15v-4.503a3.375 3.375 0 0 0-3.375-3.375H8.25V3.75a2.25 2.25 0 0 1 2.25-2.25h3.75A2.25 2.25 0 0 1 16.5 3.75Z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 13.5H7.5A2.25 2.25 0 0 0 5.25 15.75V21H10.5V15.75A2.25 2.25 0 0 0 8.25 13.5H9Z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})]}),LR=r=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})]}),UR=()=>{const[r,e]=Zt.useState(""),[i,a]=Zt.useState(""),[o,h]=Zt.useState({}),[d,g]=Zt.useState(0),[y,v]=Zt.useState(null),[A,w]=Zt.useState(null),[b,B]=Zt.useState(!1),[G,tt]=Zt.useState(!1),[J,mt]=Zt.useState(void 0),[ut,st]=Zt.useState(null),[Rt,ht]=Zt.useState(null),[wt,V]=Zt.useState("form"),[S,x]=Zt.useState([]),[O,M]=Zt.useState(!0),L=Zt.useCallback(()=>{M(!0),K0().then(x).finally(()=>M(!1))},[]);Zt.useEffect(()=>{L()},[L]);const C=()=>{e(""),a(""),h({}),g(0),v(null),w(null),mt(void 0),tt(!1),st(null),ht(null)},Ae=Zt.useCallback((gt,ue)=>{h(zn=>({...zn,[gt]:ue})),v(null),w(null),mt(void 0),st(null),ht(null)},[]),ee=Zt.useCallback(gt=>{e(gt),st(null),ht(null)},[]),F=Zt.useCallback(gt=>{a(gt),st(null),ht(null)},[]),et=gt=>{ht(gt),setTimeout(()=>ht(null),3e3)},ot=(gt=!1)=>{if(tt(!0),!r.trim())return st("El nombre del estudiante es requerido."),!1;if(!i)return st("El curso del estudiante es requerido."),!1;if(!Pf(o,Li.length))return st("Todos los indicadores deben ser evaluados para continuar."),!1;if(gt){if(y===null)return st("Por favor, calcule la nota final primero."),!1;if(!A)return st("Por favor, genere la retroalimentación IA primero."),!1}return st(null),!0},jt=Zt.useCallback(()=>{if(!ot())return;const gt=Ey(o);g(gt);const ue=Ty(gt);v(ue),et("Nota calculada exitosamente.")},[o,r,i]),D=Zt.useCallback(async()=>{if(ot()){if(y===null){const gt=Ey(o);g(gt);const ue=Ty(gt);if(v(ue),ue===null){st("Error al calcular la nota antes de generar retroalimentación.");return}}B(!0),w(null),mt(void 0),ht(null);try{const{feedbackText:gt,groundingMetadata:ue}=await E1(r,o);w(gt),mt(ue),gt.startsWith("Error:")?st(gt):et("Retroalimentación generada exitosamente.")}catch(gt){console.error("Error in handleGenerateFeedback:",gt),st("Error al generar retroalimentación. Verifique la consola para más detalles."),w("Error al generar retroalimentación. Verifique la consola para más detalles.")}finally{B(!1)}}},[r,o,y,i]),Z=Zt.useCallback(async()=>{if(!ot(!0)||y===null||!A){st("Complete la evaluación, calcule nota y genere retroalimentación antes de guardar.");return}try{await xR(r,o,A,""),et(`Evaluación para ${r} guardada.`),L()}catch{st("Error al guardar la evaluación.")}},[r,o,A,y,L]),it=Zt.useCallback(async()=>{if(!ot(!0)||y===null||!A){st("Complete la evaluación, calcule nota y genere retroalimentación antes de descargar.");return}const gt=new Date().toLocaleDateString("es-CL");try{await T1({studentName:r,course:i,evaluationDate:gt,scores:o,totalScore:d,finalGrade:y,aiFeedback:A,rubricData:Li,groundingMetadata:J}),et("Informe PDF descargado.")}catch(ue){console.error("Error downloading PDF:",ue),st("Error al descargar el informe PDF.")}},[r,i,o,d,y,A,J]);Zt.useEffect(()=>{r.trim()&&i&&Pf(o,Li.length)&&(ut==="El nombre del estudiante es requerido."||ut==="El curso del estudiante es requerido."||ut==="Todos los indicadores deben ser evaluados para continuar.")&&st(null)},[r,i,o,ut]);const W=r.trim()&&i&&Pf(o,Li.length),ft=W&&y!==null&&A!==null&&!A.startsWith("Error:"),bt=()=>{V(gt=>gt==="form"?"dashboard":"form"),st(null),ht(null)},vt=()=>{C(),V("form"),et("Formulario reiniciado para una nueva evaluación.")},me=async()=>{await NR(),x([]),et("Todas las evaluaciones han sido borradas."),L()};return I.jsxs("div",{className:"min-h-screen bg-slate-100 py-8 px-4 sm:px-6 lg:px-8",children:[I.jsxs("header",{className:"mb-10 text-center relative",children:[I.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 mt-4",children:"Evaluación de Presentaciones Duales 🔩"}),I.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Liceo Industrial de Recoleta"}),I.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-4",children:I.jsx("button",{onClick:bt,className:"flex items-center px-3 py-2 sm:px-4 sm:py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-150",title:wt==="form"?"Ver Dashboard":"Volver al Formulario",children:wt==="form"?I.jsxs(I.Fragment,{children:[I.jsx(LR,{className:"h-5 w-5 sm:mr-2"}),I.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}):I.jsxs(I.Fragment,{children:[I.jsx(Yf,{className:"h-5 w-5 sm:mr-2"}),I.jsx("span",{className:"hidden sm:inline",children:"Formulario"})]})})})]}),Rt&&I.jsx("div",{className:"max-w-4xl mx-auto mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-md relative",role:"alert",children:I.jsx("span",{className:"block sm:inline",children:Rt})}),ut&&I.jsxs("div",{className:"max-w-4xl mx-auto mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative",role:"alert",children:[I.jsx("strong",{className:"font-bold",children:"Error: "}),I.jsx("span",{className:"block sm:inline",children:ut})]}),I.jsx("main",{className:"max-w-4xl mx-auto",children:wt==="form"?I.jsxs(I.Fragment,{children:[I.jsx(MT,{studentName:r,onStudentNameChange:ee,course:i,onCourseChange:F,scores:o,onScoreChange:Ae,isSubmitted:G}),I.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("button",{onClick:jt,disabled:b||!W,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-slate-400 transition-colors duration-150",children:[I.jsx(IR,{className:"h-5 w-5 mr-2"}),"Calcular Nota"]}),I.jsxs("button",{onClick:D,disabled:b||!W||y===null,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-slate-400 transition-colors duration-150",children:[I.jsx(OR,{className:"h-5 w-5 mr-2"}),b?"Generando IA...":"Retroalimentación IA"]})]}),y!==null&&I.jsx(LT,{totalScore:d,finalGrade:y}),I.jsx(UT,{aiFeedback:A,isLoadingFeedback:b,groundingMetadata:J}),ft&&I.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("button",{onClick:Z,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-150",children:[I.jsx(MR,{className:"h-5 w-5 mr-2"}),"Guardar Evaluación"]}),I.jsxs("button",{onClick:it,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-150",children:[I.jsx(VR,{className:"h-5 w-5 mr-2"}),"Descargar Informe (PDF)"]})]}),I.jsx("div",{className:"mt-8 text-center",children:I.jsx("button",{onClick:vt,className:"px-6 py-3 border border-slate-300 text-base font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150",children:"Limpiar y Nueva Evaluación"})})]}):I.jsx(zT,{evaluations:S,onBackToForm:bt,onClearAll:me,isLoading:O})}),I.jsx("footer",{className:"text-center mt-12 py-6 border-t border-slate-300",children:I.jsxs("p",{className:"text-sm text-slate-500",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Herramienta de Evaluación."]})}),I.jsx("div",{id:"pdf-report-content",style:{position:"absolute",left:"-9999px",width:"0px",height:"0px",overflow:"hidden"}})]})},X0=document.getElementById("root");if(!X0)throw new Error("Could not find root element to mount to");const PR=IT.createRoot(X0);PR.render(I.jsx(bT.StrictMode,{children:I.jsx(UR,{})}));
